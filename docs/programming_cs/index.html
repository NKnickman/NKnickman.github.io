
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../programming_graphics/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.21">
    
    
      
        <title>C# - Nathaniel Knickman</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#c" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Nathaniel Knickman" class="md-header__button md-logo" aria-label="Nathaniel Knickman" data-md-component="logo">
      
  <img src="../assets/icons/icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nathaniel Knickman
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              C#
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Nathaniel Knickman" class="md-nav__button md-logo" aria-label="Nathaniel Knickman" data-md-component="logo">
      
  <img src="../assets/icons/icon.svg" alt="logo">

    </a>
    Nathaniel Knickman
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Programming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    C#
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    C#
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Sections">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sections
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#marching-cubes-voxel-terrain-prototype-using-dots" class="md-nav__link">
    <span class="md-ellipsis">
      Marching Cubes Voxel Terrain Prototype Using DOTS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sims-like-building-system-using-ear-clipping-triangulation" class="md-nav__link">
    <span class="md-ellipsis">
      Sims-Like Building System Using Ear Clipping Triangulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processor-nodes-procedural-modelling-nodes-using-xnode-and-dots" class="md-nav__link">
    <span class="md-ellipsis">
      Processor Nodes &amp; Procedural Modelling Nodes Using XNode and DOTS
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../programming_graphics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Art
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Art
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../art_2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2D
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../art_3d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3D
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../art_music/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Music
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Sections">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sections
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#marching-cubes-voxel-terrain-prototype-using-dots" class="md-nav__link">
    <span class="md-ellipsis">
      Marching Cubes Voxel Terrain Prototype Using DOTS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sims-like-building-system-using-ear-clipping-triangulation" class="md-nav__link">
    <span class="md-ellipsis">
      Sims-Like Building System Using Ear Clipping Triangulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processor-nodes-procedural-modelling-nodes-using-xnode-and-dots" class="md-nav__link">
    <span class="md-ellipsis">
      Processor Nodes &amp; Procedural Modelling Nodes Using XNode and DOTS
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div><h1 id="c">C#<a class="headerlink" href="#c" title="Permanent link">¶</a></h1>
<h2 id="marching-cubes-voxel-terrain-prototype-using-dots">Marching Cubes Voxel Terrain Prototype Using DOTS<a class="headerlink" href="#marching-cubes-voxel-terrain-prototype-using-dots" title="Permanent link">¶</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><input id="__tabbed_1_3" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">LOD 16 Test</label><label for="__tabbed_1_2">LOD 13 Test</label><label for="__tabbed_1_3">Code Samples</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div class="video-container"><video style="position:relative;width:100%;height:22.172vw" muted controls alt="type:video"><source src="../assets/media/voxel_terrain/slow_test.mp4" type="video/mp4"></source></video></div>
<div class="admonition quote">
<p class="admonition-title">About</p>
<p>A prototype for performant voxel terrain generation using Unity's burst compiler and job systems. This video showcases a slower test where around 16 levels of detail are generated around the viewer. Each level of detail beyond the second is about twice the size as the last, this exponential growth allows for very far render distance.</p>
</div>
</div>
<div class="tabbed-block">
<p></p><div class="video-container"><video style="position:relative;width:100%;height:22.172vw" muted controls alt="type:video"><source src="../assets/media/voxel_terrain/fast_test.mp4" type="video/mp4"></source></video></div>
<div class="admonition quote">
<p class="admonition-title">About</p>
<p>Here's a faster test generating around 13 levels of detail. It's important to note that the generation makes heavy use of multi-threading. Voxel weight generation is executed per voxel as an IJobParallelFor, whilst the meshing process is done per chunk in an IJobParallelFor.</p>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Grid</label><label for="__tabbed_2_2">Octify LOD</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">grid.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">  1</a></span>
<span class="normal"><a href="#__codelineno-0-2">  2</a></span>
<span class="normal"><a href="#__codelineno-0-3">  3</a></span>
<span class="normal"><a href="#__codelineno-0-4">  4</a></span>
<span class="normal"><a href="#__codelineno-0-5">  5</a></span>
<span class="normal"><a href="#__codelineno-0-6">  6</a></span>
<span class="normal"><a href="#__codelineno-0-7">  7</a></span>
<span class="normal"><a href="#__codelineno-0-8">  8</a></span>
<span class="normal"><a href="#__codelineno-0-9">  9</a></span>
<span class="normal"><a href="#__codelineno-0-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-0-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-0-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-0-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-0-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-0-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-0-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-0-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-0-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-0-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-0-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-0-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-0-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Burst</span><span class="p">;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Collections</span><span class="p">;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Collections.LowLevel.Unsafe</span><span class="p">;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Jobs</span><span class="p">;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Mathematics</span><span class="p">;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Mesh</span><span class="p">;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Grids</span><span class="p">.</span><span class="n">MarchingCubes</span><span class="p">;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine.Jobs</span><span class="p">;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">Grids</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="p">{</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Grid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ChunkComponents</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">MeshFilter</span><span class="w"> </span><span class="n">filter</span><span class="p">;</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">MeshRenderer</span><span class="w"> </span><span class="n">renderer</span><span class="p">;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">MeshCollider</span><span class="w"> </span><span class="n">collider</span><span class="p">;</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TerrainGenerationData</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">            </span><span class="c1">//public TestOperatorJob operatorJob;</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">JobHandle</span><span class="w"> </span><span class="n">operatorJobHandle</span><span class="p">;</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">VoxelizeJob</span><span class="o">&lt;</span><span class="n">OctifyLOD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">voxelizeJob</span><span class="p">;</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">JobHandle</span><span class="w"> </span><span class="n">voxelizeJobHandle</span><span class="p">;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">        </span><span class="c1">// Voxel Terrain</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">        </span><span class="c1">/// &lt;summary&gt; The size of terrain cells represented as a floating-point value. &lt;/summary&gt;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">tScale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.05f</span><span class="p">;</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">        </span><span class="c1">/// &lt;summary&gt; The number of terrain cells that can fit within a single terrain chunk. &lt;/summary&gt;</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16</span><span class="p">;</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">halfTCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tCapacitySquared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">tChunkScale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tScale</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">        </span><span class="c1">//public const int regionCapacity = 2048;</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">regionCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">256</span><span class="p">;</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">        </span><span class="c1">//public const int regionCapacity = 16;</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">regionCellCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">regionCapacity</span><span class="p">;</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">LODs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">17</span><span class="p">;</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="w">        </span><span class="c1">/// &lt;summary&gt; The number of terrain chunks represented around the viewer. &lt;/summary&gt;</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">renderDistance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="m">56</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">LODs</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="p">));</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">        </span><span class="c1">/// &lt;summary&gt; The viewer position converted into terrain chunk space. &lt;/summary&gt;</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">int3</span><span class="w"> </span><span class="n">renderPosition</span><span class="p">;</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="w">        </span><span class="c1">/// &lt;summary&gt; The render position on the last fixed update. &lt;/summary&gt;</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">int3</span><span class="w"> </span><span class="n">lastRenderPosition</span><span class="p">;</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">ChunkComponents</span><span class="p">[]</span><span class="w"> </span><span class="n">chunkComponents</span><span class="p">;</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">Mesh</span><span class="p">[]</span><span class="w"> </span><span class="n">chunkMeshes</span><span class="p">;</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">TerrainGenerationData</span><span class="w"> </span><span class="n">currentTGeneration</span><span class="p">;</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Transform</span><span class="w"> </span><span class="n">viewer</span><span class="p">;</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Material</span><span class="w"> </span><span class="n">material</span><span class="p">;</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">int3</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">NativeGrid</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">OctifyLOD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">terrainWeightGrid</span><span class="p">;</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnDestroy</span><span class="p">()</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">            </span><span class="n">terrainWeightGrid</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">            </span><span class="c1">//terrainMaterialGrid.Dispose();</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="w">            </span><span class="n">currentTGeneration</span><span class="p">.</span><span class="n">voxelizeJob</span><span class="p">.</span><span class="n">meshes</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="n">AddMeshCell</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">cell</span><span class="p">,</span><span class="w"> </span><span class="n">Vector3</span><span class="w"> </span><span class="n">position</span><span class="p">)</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">struct</span><span class="p">,</span><span class="w"> </span><span class="n">IMeshCell</span><span class="p">,</span><span class="w"> </span><span class="n">IJob</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">            </span><span class="n">MeshDataArray</span><span class="w"> </span><span class="n">meshArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllocateWritableMeshData</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="w">            </span><span class="n">MeshData</span><span class="w"> </span><span class="n">meshData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meshArray</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="w">            </span><span class="n">cell</span><span class="p">.</span><span class="n">Mesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meshData</span><span class="p">;</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="w">            </span><span class="n">cell</span><span class="p">.</span><span class="n">Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="w">            </span><span class="n">cell</span><span class="p">.</span><span class="n">Schedule</span><span class="p">().</span><span class="n">Complete</span><span class="p">();</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">            </span><span class="n">Mesh</span><span class="w"> </span><span class="n">mesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Mesh</span><span class="p">();</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">            </span><span class="n">ApplyAndDisposeWritableMeshData</span><span class="p">(</span><span class="n">meshArray</span><span class="p">,</span><span class="w"> </span><span class="n">mesh</span><span class="p">);</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">            </span><span class="n">mesh</span><span class="p">.</span><span class="n">RecalculateBounds</span><span class="p">();</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">            </span><span class="n">GameObject</span><span class="w"> </span><span class="n">gO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">CreatePrimitive</span><span class="p">(</span><span class="n">PrimitiveType</span><span class="p">.</span><span class="n">Cube</span><span class="p">);</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">            </span><span class="n">gO</span><span class="p">.</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">MeshFilter</span><span class="o">&gt;</span><span class="p">().</span><span class="n">sharedMesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mesh</span><span class="p">;</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">            </span><span class="n">gO</span><span class="p">.</span><span class="n">AddComponent</span><span class="o">&lt;</span><span class="n">MeshCollider</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">        </span><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="w">            </span><span class="n">chunkComponents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChunkComponents</span><span class="p">[</span><span class="n">renderDistance</span><span class="p">];</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">            </span><span class="n">chunkMeshes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Mesh</span><span class="p">[</span><span class="n">renderDistance</span><span class="p">];</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">            </span><span class="n">material</span><span class="p">.</span><span class="n">SetVector</span><span class="p">(</span><span class="s">"_ChunkSize"</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">tCapacity</span><span class="p">,</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">,</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">));</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">renderDistance</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="w">                </span><span class="n">GameObject</span><span class="w"> </span><span class="n">gO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GameObject</span><span class="p">();</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="w">                </span><span class="n">chunkComponents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChunkComponents</span><span class="p">()</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="w">                    </span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gO</span><span class="p">.</span><span class="n">AddComponent</span><span class="o">&lt;</span><span class="n">MeshFilter</span><span class="o">&gt;</span><span class="p">(),</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="w">                    </span><span class="n">renderer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gO</span><span class="p">.</span><span class="n">AddComponent</span><span class="o">&lt;</span><span class="n">MeshRenderer</span><span class="o">&gt;</span><span class="p">(),</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">                    </span><span class="n">collider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gO</span><span class="p">.</span><span class="n">AddComponent</span><span class="o">&lt;</span><span class="n">MeshCollider</span><span class="o">&gt;</span><span class="p">(),</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">                </span><span class="p">};</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">                </span><span class="n">chunkComponents</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">renderer</span><span class="p">.</span><span class="n">sharedMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">material</span><span class="p">;</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="w">                </span><span class="n">chunkMeshes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Mesh</span><span class="p">();</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="w">                </span><span class="n">chunkComponents</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">filter</span><span class="p">.</span><span class="n">sharedMesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkMeshes</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="w">            </span><span class="n">terrainWeightGrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NativeGrid</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">OctifyLOD</span><span class="o">&gt;</span><span class="p">(</span><span class="n">LODs</span><span class="p">);</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="w">            </span><span class="n">ForceRegenerate</span><span class="p">();</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="w">            </span><span class="n">InvokeRepeating</span><span class="p">(</span><span class="s">"TryRegenerate"</span><span class="p">,</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">1f</span><span class="p">);</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ForceRegenerate</span><span class="p">()</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="w">            </span><span class="n">renderPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">floor</span><span class="p">(((</span><span class="n">float3</span><span class="p">)</span><span class="n">viewer</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">float3</span><span class="p">)</span><span class="n">halfTCapacity</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">);</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="w">            </span><span class="n">Regenerate</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="w">            </span><span class="n">TryCompleteJobs</span><span class="p">();</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TryRegenerate</span><span class="p">()</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">            </span><span class="n">renderPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">floor</span><span class="p">(((</span><span class="n">float3</span><span class="p">)</span><span class="n">viewer</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">float3</span><span class="p">)</span><span class="n">halfTCapacity</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">);</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">lastRenderPosition</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">renderPosition</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">TryCompleteJobs</span><span class="p">())</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="w">                </span><span class="n">Regenerate</span><span class="p">();</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">TryCompleteJobs</span><span class="p">()</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentTGeneration</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="o">!</span><span class="n">currentTGeneration</span><span class="p">.</span><span class="n">operatorJobHandle</span><span class="p">.</span><span class="n">IsCompleted</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">currentTGeneration</span><span class="p">.</span><span class="n">voxelizeJobHandle</span><span class="p">.</span><span class="n">IsCompleted</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="w">                </span><span class="n">currentTGeneration</span><span class="p">.</span><span class="n">operatorJobHandle</span><span class="p">.</span><span class="n">Complete</span><span class="p">();</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="w">                </span><span class="n">currentTGeneration</span><span class="p">.</span><span class="n">voxelizeJobHandle</span><span class="p">.</span><span class="n">Complete</span><span class="p">();</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="w">                </span><span class="n">ApplyAndDisposeWritableMeshData</span><span class="p">(</span><span class="n">currentTGeneration</span><span class="p">.</span><span class="n">voxelizeJob</span><span class="p">.</span><span class="n">meshes</span><span class="p">,</span><span class="w"> </span><span class="n">chunkMeshes</span><span class="p">);</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">chunkMeshes</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="w">                    </span><span class="n">chunkMeshes</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">RecalculateBounds</span><span class="p">();</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">chunkMeshes</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">vertexCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">64</span><span class="p">)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="w">                        </span><span class="n">chunkComponents</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">collider</span><span class="p">.</span><span class="n">sharedMesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkMeshes</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="w">                </span><span class="n">currentTGeneration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Regenerate</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">)</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="w">            </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">renderPosition</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="w">            </span><span class="n">lastRenderPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">renderPosition</span><span class="p">;</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="w">            </span><span class="n">StaticGridBaseGenerator</span><span class="w"> </span><span class="n">baseGen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StaticGridBaseGenerator</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="w">            </span><span class="n">BiomeGeneratorOperator</span><span class="o">&lt;</span><span class="n">Desert</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BiomeGeneratorOperator</span><span class="o">&lt;</span><span class="n">Desert</span><span class="o">&gt;</span><span class="p">(</span><span class="n">offset</span><span class="p">);</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="w">            </span><span class="n">JobHandle</span><span class="w"> </span><span class="n">jobHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrainWeightGrid</span><span class="p">.</span><span class="n">Operate</span><span class="p">(</span><span class="n">dJob</span><span class="p">,</span><span class="w"> </span><span class="m">64</span><span class="p">,</span><span class="w"> </span><span class="n">terrainWeightGrid</span><span class="p">.</span><span class="n">Operate</span><span class="p">(</span><span class="n">baseGen</span><span class="p">,</span><span class="w"> </span><span class="m">64</span><span class="p">));</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="w">            </span><span class="n">BiomeGeneratorOperator</span><span class="o">&lt;</span><span class="n">Tundra</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BiomeGeneratorOperator</span><span class="o">&lt;</span><span class="n">Tundra</span><span class="o">&gt;</span><span class="p">(</span><span class="n">offset</span><span class="p">);</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="w">            </span><span class="n">jobHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrainWeightGrid</span><span class="p">.</span><span class="n">Operate</span><span class="p">(</span><span class="n">tJob</span><span class="p">,</span><span class="w"> </span><span class="m">64</span><span class="p">,</span><span class="w"> </span><span class="n">jobHandle</span><span class="p">);</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="w">            </span><span class="n">VoxelizeJob</span><span class="o">&lt;</span><span class="n">OctifyLOD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">voxelJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">VoxelizeJob</span><span class="o">&lt;</span><span class="n">OctifyLOD</span><span class="o">&gt;</span><span class="p">()</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="w">                </span><span class="n">LODProcessor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrainWeightGrid</span><span class="p">.</span><span class="n">LODProcessor</span><span class="p">,</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="w">                </span><span class="n">Values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrainWeightGrid</span><span class="p">.</span><span class="n">values</span><span class="p">,</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="w">                </span><span class="n">meshes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllocateWritableMeshData</span><span class="p">(</span><span class="n">renderDistance</span><span class="p">),</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="w">                </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offset</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="w">            </span><span class="n">JobHandle</span><span class="w"> </span><span class="n">voxelJobHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voxelJob</span><span class="p">.</span><span class="n">Schedule</span><span class="p">(</span><span class="n">voxelJob</span><span class="p">.</span><span class="n">meshes</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">jobHandle</span><span class="p">);</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">await</span><span class="p">)</span><span class="w"> </span><span class="n">voxelJobHandle</span><span class="p">.</span><span class="n">Complete</span><span class="p">();</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="w">            </span><span class="n">currentTGeneration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TerrainGenerationData</span><span class="p">()</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="w">                </span><span class="n">operatorJobHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jobHandle</span><span class="p">,</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="w">                </span><span class="n">voxelizeJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voxelJob</span><span class="p">,</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="w">                </span><span class="n">voxelizeJobHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voxelJobHandle</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Tundra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IBiomeGenerator</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="w">            </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="w"> </span><span class="n">noise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="p">()</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="w">                </span><span class="n">Seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="w">                </span><span class="n">Frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12.727f</span><span class="p">,</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="w">                </span><span class="n">SamplerType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="p">.</span><span class="n">Sampler</span><span class="p">.</span><span class="n">Perlin</span><span class="p">,</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="w">                </span><span class="n">FractalType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="p">.</span><span class="n">Fractal</span><span class="p">.</span><span class="n">FBM</span><span class="p">,</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="w">                </span><span class="n">FractalOctaves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="w">                </span><span class="n">FractalGain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7126499f</span><span class="p">,</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="w">                </span><span class="n">FractalLacunarity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2f</span><span class="p">,</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">                </span><span class="n">FractalWeightedStrength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3472509f</span><span class="p">,</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="w">                </span><span class="n">Period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">regionCellCapacity</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">20</span><span class="p">)</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">Climate</span><span class="w"> </span><span class="n">MinimumClimateRequirement</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Climate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">altitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="n">precipitation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0f</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">Climate</span><span class="w"> </span><span class="n">MaximumClimateRequirement</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Climate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">altitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="n">precipitation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="m">5f</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">Sample</span><span class="p">(</span><span class="n">int3</span><span class="w"> </span><span class="n">cellPos</span><span class="p">)</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">noise</span><span class="p">.</span><span class="n">DynamicSample</span><span class="p">(</span><span class="n">cellPos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">cellPos</span><span class="p">.</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">1000f</span><span class="p">);</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Desert</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IBiomeGenerator</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="w">            </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="w"> </span><span class="n">noise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="p">()</span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="w">                </span><span class="n">Seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="w">                </span><span class="n">Frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12.727f</span><span class="p">,</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="w">                </span><span class="n">SamplerType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="p">.</span><span class="n">Sampler</span><span class="p">.</span><span class="n">Perlin</span><span class="p">,</span>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="w">                </span><span class="n">FractalType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DynamicNoise</span><span class="p">.</span><span class="n">Fractal</span><span class="p">.</span><span class="n">FBM</span><span class="p">,</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="w">                </span><span class="n">FractalOctaves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="w">                </span><span class="n">FractalGain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7126499f</span><span class="p">,</span>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="w">                </span><span class="n">FractalLacunarity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2f</span><span class="p">,</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="w">                </span><span class="n">FractalWeightedStrength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3472509f</span><span class="p">,</span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="w">                </span><span class="n">Period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">regionCellCapacity</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">Climate</span><span class="w"> </span><span class="n">MinimumClimateRequirement</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Climate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">altitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="m">5f</span><span class="p">,</span><span class="w"> </span><span class="n">precipitation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="m">5f</span><span class="p">,</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="m">5f</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">Climate</span><span class="w"> </span><span class="n">MaximumClimateRequirement</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Climate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">altitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="n">precipitation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1f</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">Sample</span><span class="p">(</span><span class="n">int3</span><span class="w"> </span><span class="n">cellPos</span><span class="p">)</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">noise</span><span class="p">.</span><span class="n">DynamicSample</span><span class="p">(</span><span class="n">cellPos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">cellPos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">cellPos</span><span class="p">.</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">10000</span><span class="p">;</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="w">        </span><span class="na">[BurstCompile(CompileSynchronously = true)]</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">StaticGridBaseGenerator</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJobParallelFor</span><span class="p">,</span><span class="w"> </span><span class="n">NativeGrid</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">OctifyLOD</span><span class="o">&gt;</span><span class="p">.</span><span class="n">IOperatorJobParallelFor</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="w">            </span><span class="k">private</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">values</span><span class="p">;</span>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Values</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">values</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">OctifyLOD</span><span class="w"> </span><span class="n">LODProcessor</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">int3</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">cellPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">IndexToCellPosition</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="w">                </span><span class="n">values</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">cellPos</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="w">        </span><span class="na">[BurstCompile(CompileSynchronously = true)]</span>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">VoxelizeJob</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJobParallelFor</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">struct</span><span class="p">,</span><span class="w"> </span><span class="n">ILODProcessor</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="w">            </span><span class="na">[ReadOnly]</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="w">            </span><span class="k">private</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">values</span><span class="p">;</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Values</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">values</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">LODProcessor</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">int3</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">MeshDataArray</span><span class="w"> </span><span class="n">meshes</span><span class="p">;</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="w">            </span><span class="k">private</span><span class="w"> </span><span class="n">float3</span><span class="w"> </span><span class="nf">CreateVertex</span><span class="p">(</span><span class="n">float3</span><span class="w"> </span><span class="n">cornerA</span><span class="p">,</span><span class="w"> </span><span class="n">float3</span><span class="w"> </span><span class="n">cornerB</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">weightA</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">weightB</span><span class="cm">/*, out float3 norm*/</span><span class="p">)</span>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">weightA</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">weightB</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">weightA</span><span class="p">);</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">cornerA</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">cornerB</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cornerA</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="w">                </span><span class="n">MeshData</span><span class="w"> </span><span class="n">mesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meshes</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">vertexCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">configurations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">tCapacityCubed</span><span class="p">,</span><span class="w"> </span><span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">weights</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">tCapacityCubed</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">int3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cellPositions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">int3</span><span class="o">&gt;</span><span class="p">(</span><span class="n">tCapacityCubed</span><span class="p">,</span><span class="w"> </span><span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">indexOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">chunkStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">IndexToCellPosition</span><span class="p">(</span><span class="n">indexOffset</span><span class="p">);</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">GetSizeMultiplier</span><span class="p">(</span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">CellPositionToIndex</span><span class="p">(</span><span class="n">chunkStart</span><span class="p">));</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">scaledChunkSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">chunkEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkStart</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scaledChunkSize</span><span class="p">;</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">chunkOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tCapacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">;</span>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">positiveSizeMultiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">GetSizeMultiplier</span><span class="p">(</span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">CellPositionToIndex</span><span class="p">(</span><span class="n">chunkStart</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">chunkOffset</span><span class="p">));</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">negativeSizeMultiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">GetSizeMultiplier</span><span class="p">(</span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">CellPositionToIndex</span><span class="p">(</span><span class="n">chunkStart</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">));</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">posChunkAxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">chunkEnd</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">chunkEnd</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">chunkEnd</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">negChunkAxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">min</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">min</span><span class="p">(</span><span class="n">chunkStart</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">chunkStart</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">chunkStart</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="w">                </span><span class="c1">// Precalculate Vertex Count;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="w">                    </span><span class="n">int3</span><span class="w"> </span><span class="n">cellPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">IndexToCellPosition</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">indexOffset</span><span class="p">);</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="w">                    </span><span class="n">cellPositions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cellPos</span><span class="p">;</span>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">cI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">cI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">8</span><span class="p">;</span><span class="w"> </span><span class="n">cI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cornerPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cellPos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">cI</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">);</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">posVector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">int3</span><span class="p">(</span><span class="n">cornerPos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">posChunkAxis</span><span class="p">);</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">posFactor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">posVector</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">posVector</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">posVector</span><span class="p">.</span><span class="n">z</span><span class="p">));</span>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">negVector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">int3</span><span class="p">(</span><span class="n">cornerPos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">negChunkAxis</span><span class="p">);</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">negFactor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">negVector</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">negVector</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">negVector</span><span class="p">.</span><span class="n">z</span><span class="p">));</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">posFactor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">positiveSizeMultiplier</span><span class="p">,</span><span class="w"> </span><span class="n">negFactor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">negativeSizeMultiplier</span><span class="p">),</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">);</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">fromDimensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">floor</span><span class="p">((</span><span class="n">float3</span><span class="p">)</span><span class="n">cornerPos</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">;</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">toDimensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">float3</span><span class="p">)</span><span class="n">cornerPos</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">;</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0f</span><span class="p">;</span>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">weightContributions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="w">                        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fromDimensions</span><span class="p">.</span><span class="n">z</span><span class="p">;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">toDimensions</span><span class="p">.</span><span class="n">z</span><span class="p">;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">)</span>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="w">                        </span><span class="p">{</span>
</span><span id="__span-0-321"><a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="w">                            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fromDimensions</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">toDimensions</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">)</span>
</span><span id="__span-0-322"><a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="w">                            </span><span class="p">{</span>
</span><span id="__span-0-323"><a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="w">                                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fromDimensions</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">toDimensions</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">cornerSizeMultiplier</span><span class="p">)</span>
</span><span id="__span-0-324"><a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="w">                                </span><span class="p">{</span>
</span><span id="__span-0-325"><a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="w">                                    </span><span class="n">weight</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">values</span><span class="p">[</span><span class="n">LODProcessor</span><span class="p">.</span><span class="n">CellPositionToIndex</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">int3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">))];</span>
</span><span id="__span-0-326"><a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="w">                                    </span><span class="n">weightContributions</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-0-327"><a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="w">                                </span><span class="p">}</span>
</span><span id="__span-0-328"><a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="w">                            </span><span class="p">}</span>
</span><span id="__span-0-329"><a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="w">                        </span><span class="p">}</span>
</span><span id="__span-0-330"><a id="__codelineno-0-330" name="__codelineno-0-330"></a>
</span><span id="__span-0-331"><a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="w">                        </span><span class="n">weight</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">weightContributions</span><span class="p">;</span>
</span><span id="__span-0-332"><a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="w">                        </span><span class="n">weights</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">8</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cI</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weight</span><span class="p">;</span>
</span><span id="__span-0-333"><a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="w">                        </span><span class="n">config</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">saturate</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cI</span><span class="p">);</span>
</span><span id="__span-0-334"><a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-0-335"><a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="w">                    </span><span class="n">config</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="m">16</span><span class="p">;</span>
</span><span id="__span-0-336"><a id="__codelineno-0-336" name="__codelineno-0-336"></a>
</span><span id="__span-0-337"><a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="w">                    </span><span class="n">configurations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>
</span><span id="__span-0-338"><a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="w">                    </span><span class="n">vertexCount</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">triangulation</span><span class="p">[</span><span class="n">config</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">15</span><span class="p">];</span>
</span><span id="__span-0-339"><a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-0-340"><a id="__codelineno-0-340" name="__codelineno-0-340"></a>
</span><span id="__span-0-341"><a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="w">                </span><span class="c1">// Initialize Mesh Data</span>
</span><span id="__span-0-342"><a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">VertexAttributeDescriptor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">descriptors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">VertexAttributeDescriptor</span><span class="o">&gt;</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
</span><span id="__span-0-343"><a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="w">                </span><span class="n">descriptors</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">VertexAttributeDescriptor</span><span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">VertexAttribute</span><span class="p">.</span><span class="n">Position</span><span class="p">);</span>
</span><span id="__span-0-344"><a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="w">                </span><span class="n">descriptors</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">VertexAttributeDescriptor</span><span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">VertexAttribute</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">);</span>
</span><span id="__span-0-345"><a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="w">                </span><span class="n">mesh</span><span class="p">.</span><span class="n">SetVertexBufferParams</span><span class="p">(</span><span class="n">vertexCount</span><span class="p">,</span><span class="w"> </span><span class="n">descriptors</span><span class="p">);</span>
</span><span id="__span-0-346"><a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="w">                </span><span class="n">mesh</span><span class="p">.</span><span class="n">SetIndexBufferParams</span><span class="p">(</span><span class="n">vertexCount</span><span class="p">,</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">IndexFormat</span><span class="p">.</span><span class="n">UInt16</span><span class="p">);</span>
</span><span id="__span-0-347"><a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vertices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mesh</span><span class="p">.</span><span class="n">GetVertexData</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-0-348"><a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">normals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mesh</span><span class="p">.</span><span class="n">GetVertexData</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span><span id="__span-0-349"><a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="w">                </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="kt">ushort</span><span class="o">&gt;</span><span class="w"> </span><span class="n">triangles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mesh</span><span class="p">.</span><span class="n">GetIndexData</span><span class="o">&lt;</span><span class="kt">ushort</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-0-350"><a id="__codelineno-0-350" name="__codelineno-0-350"></a>
</span><span id="__span-0-351"><a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="w">                </span><span class="c1">// Construct The Actual Mesh</span>
</span><span id="__span-0-352"><a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">currentVertIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-0-353"><a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">cI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">cI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">configurations</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">cI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-0-354"><a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-0-355"><a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurations</span><span class="p">[</span><span class="n">cI</span><span class="p">];</span>
</span><span id="__span-0-356"><a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">configurationVertCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">triangulation</span><span class="p">[</span><span class="n">config</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">15</span><span class="p">];</span>
</span><span id="__span-0-357"><a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="w">                    </span><span class="n">int3</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cellPositions</span><span class="p">[</span><span class="n">cI</span><span class="p">];</span>
</span><span id="__span-0-358"><a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">8</span><span class="p">;</span>
</span><span id="__span-0-359"><a id="__codelineno-0-359" name="__codelineno-0-359"></a>
</span><span id="__span-0-360"><a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">vI1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentVertIndex</span><span class="p">;</span>
</span><span id="__span-0-361"><a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">vI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">;</span><span class="w"> </span><span class="n">vI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">configurationVertCount</span><span class="p">;</span><span class="w"> </span><span class="n">vI</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</span><span id="__span-0-362"><a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-0-363"><a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">vI2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vI1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-0-364"><a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">vI3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vI1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-0-365"><a id="__codelineno-0-365" name="__codelineno-0-365"></a>
</span><span id="__span-0-366"><a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">edgeIndexA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">triangulation</span><span class="p">[</span><span class="n">vI</span><span class="p">];</span>
</span><span id="__span-0-367"><a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">a0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerIndexAFromEdge</span><span class="p">[</span><span class="n">edgeIndexA</span><span class="p">];</span>
</span><span id="__span-0-368"><a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerIndexBFromEdge</span><span class="p">[</span><span class="n">edgeIndexA</span><span class="p">];</span>
</span><span id="__span-0-369"><a id="__codelineno-0-369" name="__codelineno-0-369"></a>
</span><span id="__span-0-370"><a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">edgeIndexB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">triangulation</span><span class="p">[</span><span class="n">vI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">];</span>
</span><span id="__span-0-371"><a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">b0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerIndexAFromEdge</span><span class="p">[</span><span class="n">edgeIndexB</span><span class="p">];</span>
</span><span id="__span-0-372"><a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerIndexBFromEdge</span><span class="p">[</span><span class="n">edgeIndexB</span><span class="p">];</span>
</span><span id="__span-0-373"><a id="__codelineno-0-373" name="__codelineno-0-373"></a>
</span><span id="__span-0-374"><a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">edgeIndexC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">triangulation</span><span class="p">[</span><span class="n">vI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">];</span>
</span><span id="__span-0-375"><a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerIndexAFromEdge</span><span class="p">[</span><span class="n">edgeIndexC</span><span class="p">];</span>
</span><span id="__span-0-376"><a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerIndexBFromEdge</span><span class="p">[</span><span class="n">edgeIndexC</span><span class="p">];</span>
</span><span id="__span-0-377"><a id="__codelineno-0-377" name="__codelineno-0-377"></a>
</span><span id="__span-0-378"><a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cA0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">a0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
</span><span id="__span-0-379"><a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cA1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">a1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
</span><span id="__span-0-380"><a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cB0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">b0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
</span><span id="__span-0-381"><a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cB1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">b1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
</span><span id="__span-0-382"><a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cC0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">c0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
</span><span id="__span-0-383"><a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="w">                        </span><span class="n">int3</span><span class="w"> </span><span class="n">cC1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">corners</span><span class="p">[</span><span class="n">c1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sizeMultiplier</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
</span><span id="__span-0-384"><a id="__codelineno-0-384" name="__codelineno-0-384"></a>
</span><span id="__span-0-385"><a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">cIA0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weights</span><span class="p">[</span><span class="n">a0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="p">];</span>
</span><span id="__span-0-386"><a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">cIA1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weights</span><span class="p">[</span><span class="n">a1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="p">];</span>
</span><span id="__span-0-387"><a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">cIB0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weights</span><span class="p">[</span><span class="n">b0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="p">];</span>
</span><span id="__span-0-388"><a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">cIB1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weights</span><span class="p">[</span><span class="n">b1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="p">];</span>
</span><span id="__span-0-389"><a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">cIC0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weights</span><span class="p">[</span><span class="n">c0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="p">];</span>
</span><span id="__span-0-390"><a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="w">                        </span><span class="kt">float</span><span class="w"> </span><span class="n">cIC1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weights</span><span class="p">[</span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">weightStartIndex</span><span class="p">];</span>
</span><span id="__span-0-391"><a id="__codelineno-0-391" name="__codelineno-0-391"></a>
</span><span id="__span-0-392"><a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="w">                        </span><span class="n">vertices</span><span class="p">[</span><span class="n">vI1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateVertex</span><span class="p">(</span><span class="n">cA0</span><span class="p">,</span><span class="w"> </span><span class="n">cA1</span><span class="p">,</span><span class="w"> </span><span class="n">cIA0</span><span class="p">,</span><span class="w"> </span><span class="n">cIA1</span><span class="p">);</span>
</span><span id="__span-0-393"><a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="w">                        </span><span class="n">vertices</span><span class="p">[</span><span class="n">vI2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateVertex</span><span class="p">(</span><span class="n">cB0</span><span class="p">,</span><span class="w"> </span><span class="n">cB1</span><span class="p">,</span><span class="w"> </span><span class="n">cIB0</span><span class="p">,</span><span class="w"> </span><span class="n">cIB1</span><span class="p">);</span>
</span><span id="__span-0-394"><a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="w">                        </span><span class="n">vertices</span><span class="p">[</span><span class="n">vI3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateVertex</span><span class="p">(</span><span class="n">cC0</span><span class="p">,</span><span class="w"> </span><span class="n">cC1</span><span class="p">,</span><span class="w"> </span><span class="n">cIC0</span><span class="p">,</span><span class="w"> </span><span class="n">cIC1</span><span class="p">);</span>
</span><span id="__span-0-395"><a id="__codelineno-0-395" name="__codelineno-0-395"></a>
</span><span id="__span-0-396"><a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="w">                        </span><span class="n">float3</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">cross</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">vI2</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">vertices</span><span class="p">[</span><span class="n">vI1</span><span class="p">],</span><span class="w"> </span><span class="n">vertices</span><span class="p">[</span><span class="n">vI3</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">vertices</span><span class="p">[</span><span class="n">vI1</span><span class="p">]));</span>
</span><span id="__span-0-397"><a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="w">                        </span><span class="n">normals</span><span class="p">[</span><span class="n">vI1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normal</span><span class="p">;</span>
</span><span id="__span-0-398"><a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="w">                        </span><span class="n">normals</span><span class="p">[</span><span class="n">vI2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normal</span><span class="p">;</span>
</span><span id="__span-0-399"><a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="w">                        </span><span class="n">normals</span><span class="p">[</span><span class="n">vI3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normal</span><span class="p">;</span>
</span><span id="__span-0-400"><a id="__codelineno-0-400" name="__codelineno-0-400"></a>
</span><span id="__span-0-401"><a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="w">                        </span><span class="n">triangles</span><span class="p">[</span><span class="n">vI1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">ushort</span><span class="p">)</span><span class="n">vI1</span><span class="p">;</span>
</span><span id="__span-0-402"><a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="w">                        </span><span class="n">triangles</span><span class="p">[</span><span class="n">vI2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">ushort</span><span class="p">)</span><span class="n">vI2</span><span class="p">;</span>
</span><span id="__span-0-403"><a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="w">                        </span><span class="n">triangles</span><span class="p">[</span><span class="n">vI3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">ushort</span><span class="p">)</span><span class="n">vI3</span><span class="p">;</span>
</span><span id="__span-0-404"><a id="__codelineno-0-404" name="__codelineno-0-404"></a>
</span><span id="__span-0-405"><a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="w">                        </span><span class="n">vI1</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">3</span><span class="p">;</span>
</span><span id="__span-0-406"><a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-0-407"><a id="__codelineno-0-407" name="__codelineno-0-407"></a>
</span><span id="__span-0-408"><a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="w">                    </span><span class="n">currentVertIndex</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">configurationVertCount</span><span class="p">;</span>
</span><span id="__span-0-409"><a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-0-410"><a id="__codelineno-0-410" name="__codelineno-0-410"></a>
</span><span id="__span-0-411"><a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="w">                </span><span class="n">mesh</span><span class="p">.</span><span class="n">subMeshCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-0-412"><a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="w">                </span><span class="n">mesh</span><span class="p">.</span><span class="n">SetSubMesh</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Rendering</span><span class="p">.</span><span class="n">SubMeshDescriptor</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">vertexCount</span><span class="p">));</span>
</span><span id="__span-0-413"><a id="__codelineno-0-413" name="__codelineno-0-413"></a>
</span><span id="__span-0-414"><a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="w">                </span><span class="n">configurations</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-0-415"><a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="w">                </span><span class="n">weights</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-0-416"><a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="w">                </span><span class="n">cellPositions</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-0-417"><a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-418"><a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-419"><a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-420"><a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">octify_lod.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">  1</a></span>
<span class="normal"><a href="#__codelineno-1-2">  2</a></span>
<span class="normal"><a href="#__codelineno-1-3">  3</a></span>
<span class="normal"><a href="#__codelineno-1-4">  4</a></span>
<span class="normal"><a href="#__codelineno-1-5">  5</a></span>
<span class="normal"><a href="#__codelineno-1-6">  6</a></span>
<span class="normal"><a href="#__codelineno-1-7">  7</a></span>
<span class="normal"><a href="#__codelineno-1-8">  8</a></span>
<span class="normal"><a href="#__codelineno-1-9">  9</a></span>
<span class="normal"><a href="#__codelineno-1-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-1-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-1-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-1-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-1-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-1-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-1-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-1-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-1-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-1-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-1-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-1-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-1-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-1-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-1-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-1-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-1-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-1-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-1-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-1-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-1-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-1-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-1-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-1-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-1-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-1-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-1-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-1-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-1-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-1-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-1-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-1-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-1-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-1-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-1-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-1-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-1-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-1-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-1-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-1-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-1-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-1-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-1-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-1-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-1-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-1-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-1-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-1-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-1-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-1-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-1-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-1-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-1-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-1-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-1-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-1-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-1-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-1-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-1-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-1-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-1-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-1-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-1-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-1-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-1-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-1-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-1-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-1-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-1-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-1-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-1-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-1-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-1-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-1-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-1-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-1-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-1-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-1-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-1-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-1-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-1-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-1-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-1-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-1-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-1-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-1-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-1-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-1-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-1-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-1-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-1-100">100</a></span>
<span class="normal"><a href="#__codelineno-1-101">101</a></span>
<span class="normal"><a href="#__codelineno-1-102">102</a></span>
<span class="normal"><a href="#__codelineno-1-103">103</a></span>
<span class="normal"><a href="#__codelineno-1-104">104</a></span>
<span class="normal"><a href="#__codelineno-1-105">105</a></span>
<span class="normal"><a href="#__codelineno-1-106">106</a></span>
<span class="normal"><a href="#__codelineno-1-107">107</a></span>
<span class="normal"><a href="#__codelineno-1-108">108</a></span>
<span class="normal"><a href="#__codelineno-1-109">109</a></span>
<span class="normal"><a href="#__codelineno-1-110">110</a></span>
<span class="normal"><a href="#__codelineno-1-111">111</a></span>
<span class="normal"><a href="#__codelineno-1-112">112</a></span>
<span class="normal"><a href="#__codelineno-1-113">113</a></span>
<span class="normal"><a href="#__codelineno-1-114">114</a></span>
<span class="normal"><a href="#__codelineno-1-115">115</a></span>
<span class="normal"><a href="#__codelineno-1-116">116</a></span>
<span class="normal"><a href="#__codelineno-1-117">117</a></span>
<span class="normal"><a href="#__codelineno-1-118">118</a></span>
<span class="normal"><a href="#__codelineno-1-119">119</a></span>
<span class="normal"><a href="#__codelineno-1-120">120</a></span>
<span class="normal"><a href="#__codelineno-1-121">121</a></span>
<span class="normal"><a href="#__codelineno-1-122">122</a></span>
<span class="normal"><a href="#__codelineno-1-123">123</a></span>
<span class="normal"><a href="#__codelineno-1-124">124</a></span>
<span class="normal"><a href="#__codelineno-1-125">125</a></span>
<span class="normal"><a href="#__codelineno-1-126">126</a></span>
<span class="normal"><a href="#__codelineno-1-127">127</a></span>
<span class="normal"><a href="#__codelineno-1-128">128</a></span>
<span class="normal"><a href="#__codelineno-1-129">129</a></span>
<span class="normal"><a href="#__codelineno-1-130">130</a></span>
<span class="normal"><a href="#__codelineno-1-131">131</a></span>
<span class="normal"><a href="#__codelineno-1-132">132</a></span>
<span class="normal"><a href="#__codelineno-1-133">133</a></span>
<span class="normal"><a href="#__codelineno-1-134">134</a></span>
<span class="normal"><a href="#__codelineno-1-135">135</a></span>
<span class="normal"><a href="#__codelineno-1-136">136</a></span>
<span class="normal"><a href="#__codelineno-1-137">137</a></span>
<span class="normal"><a href="#__codelineno-1-138">138</a></span>
<span class="normal"><a href="#__codelineno-1-139">139</a></span>
<span class="normal"><a href="#__codelineno-1-140">140</a></span>
<span class="normal"><a href="#__codelineno-1-141">141</a></span>
<span class="normal"><a href="#__codelineno-1-142">142</a></span>
<span class="normal"><a href="#__codelineno-1-143">143</a></span>
<span class="normal"><a href="#__codelineno-1-144">144</a></span>
<span class="normal"><a href="#__codelineno-1-145">145</a></span>
<span class="normal"><a href="#__codelineno-1-146">146</a></span>
<span class="normal"><a href="#__codelineno-1-147">147</a></span>
<span class="normal"><a href="#__codelineno-1-148">148</a></span>
<span class="normal"><a href="#__codelineno-1-149">149</a></span>
<span class="normal"><a href="#__codelineno-1-150">150</a></span>
<span class="normal"><a href="#__codelineno-1-151">151</a></span>
<span class="normal"><a href="#__codelineno-1-152">152</a></span>
<span class="normal"><a href="#__codelineno-1-153">153</a></span>
<span class="normal"><a href="#__codelineno-1-154">154</a></span>
<span class="normal"><a href="#__codelineno-1-155">155</a></span>
<span class="normal"><a href="#__codelineno-1-156">156</a></span>
<span class="normal"><a href="#__codelineno-1-157">157</a></span>
<span class="normal"><a href="#__codelineno-1-158">158</a></span>
<span class="normal"><a href="#__codelineno-1-159">159</a></span>
<span class="normal"><a href="#__codelineno-1-160">160</a></span>
<span class="normal"><a href="#__codelineno-1-161">161</a></span>
<span class="normal"><a href="#__codelineno-1-162">162</a></span>
<span class="normal"><a href="#__codelineno-1-163">163</a></span>
<span class="normal"><a href="#__codelineno-1-164">164</a></span>
<span class="normal"><a href="#__codelineno-1-165">165</a></span>
<span class="normal"><a href="#__codelineno-1-166">166</a></span>
<span class="normal"><a href="#__codelineno-1-167">167</a></span>
<span class="normal"><a href="#__codelineno-1-168">168</a></span>
<span class="normal"><a href="#__codelineno-1-169">169</a></span>
<span class="normal"><a href="#__codelineno-1-170">170</a></span>
<span class="normal"><a href="#__codelineno-1-171">171</a></span>
<span class="normal"><a href="#__codelineno-1-172">172</a></span>
<span class="normal"><a href="#__codelineno-1-173">173</a></span>
<span class="normal"><a href="#__codelineno-1-174">174</a></span>
<span class="normal"><a href="#__codelineno-1-175">175</a></span>
<span class="normal"><a href="#__codelineno-1-176">176</a></span>
<span class="normal"><a href="#__codelineno-1-177">177</a></span>
<span class="normal"><a href="#__codelineno-1-178">178</a></span>
<span class="normal"><a href="#__codelineno-1-179">179</a></span>
<span class="normal"><a href="#__codelineno-1-180">180</a></span>
<span class="normal"><a href="#__codelineno-1-181">181</a></span>
<span class="normal"><a href="#__codelineno-1-182">182</a></span>
<span class="normal"><a href="#__codelineno-1-183">183</a></span>
<span class="normal"><a href="#__codelineno-1-184">184</a></span>
<span class="normal"><a href="#__codelineno-1-185">185</a></span>
<span class="normal"><a href="#__codelineno-1-186">186</a></span>
<span class="normal"><a href="#__codelineno-1-187">187</a></span>
<span class="normal"><a href="#__codelineno-1-188">188</a></span>
<span class="normal"><a href="#__codelineno-1-189">189</a></span>
<span class="normal"><a href="#__codelineno-1-190">190</a></span>
<span class="normal"><a href="#__codelineno-1-191">191</a></span>
<span class="normal"><a href="#__codelineno-1-192">192</a></span>
<span class="normal"><a href="#__codelineno-1-193">193</a></span>
<span class="normal"><a href="#__codelineno-1-194">194</a></span>
<span class="normal"><a href="#__codelineno-1-195">195</a></span>
<span class="normal"><a href="#__codelineno-1-196">196</a></span>
<span class="normal"><a href="#__codelineno-1-197">197</a></span>
<span class="normal"><a href="#__codelineno-1-198">198</a></span>
<span class="normal"><a href="#__codelineno-1-199">199</a></span>
<span class="normal"><a href="#__codelineno-1-200">200</a></span>
<span class="normal"><a href="#__codelineno-1-201">201</a></span>
<span class="normal"><a href="#__codelineno-1-202">202</a></span>
<span class="normal"><a href="#__codelineno-1-203">203</a></span>
<span class="normal"><a href="#__codelineno-1-204">204</a></span>
<span class="normal"><a href="#__codelineno-1-205">205</a></span>
<span class="normal"><a href="#__codelineno-1-206">206</a></span>
<span class="normal"><a href="#__codelineno-1-207">207</a></span>
<span class="normal"><a href="#__codelineno-1-208">208</a></span>
<span class="normal"><a href="#__codelineno-1-209">209</a></span>
<span class="normal"><a href="#__codelineno-1-210">210</a></span>
<span class="normal"><a href="#__codelineno-1-211">211</a></span>
<span class="normal"><a href="#__codelineno-1-212">212</a></span>
<span class="normal"><a href="#__codelineno-1-213">213</a></span>
<span class="normal"><a href="#__codelineno-1-214">214</a></span>
<span class="normal"><a href="#__codelineno-1-215">215</a></span>
<span class="normal"><a href="#__codelineno-1-216">216</a></span>
<span class="normal"><a href="#__codelineno-1-217">217</a></span>
<span class="normal"><a href="#__codelineno-1-218">218</a></span>
<span class="normal"><a href="#__codelineno-1-219">219</a></span>
<span class="normal"><a href="#__codelineno-1-220">220</a></span>
<span class="normal"><a href="#__codelineno-1-221">221</a></span>
<span class="normal"><a href="#__codelineno-1-222">222</a></span>
<span class="normal"><a href="#__codelineno-1-223">223</a></span>
<span class="normal"><a href="#__codelineno-1-224">224</a></span>
<span class="normal"><a href="#__codelineno-1-225">225</a></span>
<span class="normal"><a href="#__codelineno-1-226">226</a></span>
<span class="normal"><a href="#__codelineno-1-227">227</a></span>
<span class="normal"><a href="#__codelineno-1-228">228</a></span>
<span class="normal"><a href="#__codelineno-1-229">229</a></span>
<span class="normal"><a href="#__codelineno-1-230">230</a></span>
<span class="normal"><a href="#__codelineno-1-231">231</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Mathematics</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Grids</span><span class="p">.</span><span class="n">Grid</span><span class="p">;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">Grids</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="p">{</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">OctifyLOD</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ILODProcessor</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">int3</span><span class="w"> </span><span class="nf">IndexToCellPosition</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">            </span><span class="n">int3</span><span class="w"> </span><span class="n">chunkPosition</span><span class="p">;</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">8</span><span class="p">)</span><span class="w"> </span><span class="n">chunkPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">innerChunks</span><span class="p">[</span><span class="n">chunkIndex</span><span class="p">];</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">            </span><span class="k">else</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">outerIUnwrapped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">8</span><span class="p">;</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">outerIUnwrapped</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">outerChunks</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">                </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">pow</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">layer</span><span class="p">);</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">                </span><span class="n">chunkPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outerChunks</span><span class="p">[</span><span class="n">outerIUnwrapped</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">outerChunks</span><span class="p">.</span><span class="n">Length</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">multiplier</span><span class="p">;</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21"></a>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">            </span><span class="n">int3</span><span class="w"> </span><span class="n">chunkStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkPosition</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">remainder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">            </span><span class="n">int3</span><span class="w"> </span><span class="n">localCellPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">int3</span><span class="p">(</span><span class="n">remainder</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">remainder</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">tCapacitySquared</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">,</span><span class="w"> </span><span class="n">remainder</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacitySquared</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">multiplier</span><span class="p">;</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">chunkStart</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">localCellPosition</span><span class="p">;</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28"></a>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">CellPositionToIndex</span><span class="p">(</span><span class="n">int3</span><span class="w"> </span><span class="n">cellPosition</span><span class="p">)</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="w">            </span><span class="n">int3</span><span class="w"> </span><span class="n">signCorrective</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">min</span><span class="p">((</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">cellPosition</span><span class="p">),</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="w">            </span><span class="n">int3</span><span class="w"> </span><span class="n">absoluteCellPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">abs</span><span class="p">(</span><span class="n">cellPosition</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">signCorrective</span><span class="p">;</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">absoluteCellPosition</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">absoluteCellPosition</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">absoluteCellPosition</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">chunkIndex</span><span class="p">;</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">multiplier</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">)</span><span class="w"> </span><span class="c1">// Inner Chunk</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">chunkPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">floor</span><span class="p">((</span><span class="n">float3</span><span class="p">)</span><span class="n">cellPosition</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">);</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">innerChunkPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkPos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="w">                </span><span class="n">chunkPos</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">innerChunkIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">innerChunkPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">innerChunkPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">innerChunkPos</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">4</span><span class="p">);</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="w">                </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">innerChunkIndex</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">localChunkPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cellPosition</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">chunkPos</span><span class="p">;</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">localIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">localChunkPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">localChunkPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">localChunkPos</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacitySquared</span><span class="p">);</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">globalIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">localIndex</span><span class="p">;</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">globalIndex</span><span class="p">;</span>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="c1">// Outer Chunk</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">max</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">log2</span><span class="p">(</span><span class="n">multiplier</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">));</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">exponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">pow</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">layer</span><span class="p">);</span>
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51"></a><span class="w">                </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exponent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">;</span>
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">halfExponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exponent</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">halfMultiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">multiplier</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">outerChunkPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">int3</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">floor</span><span class="p">((</span><span class="n">float3</span><span class="p">)</span><span class="n">cellPosition</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">halfMultiplier</span><span class="p">);</span>
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">outerChunkPosOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outerChunkPos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">outerChunkIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outerChunkPosOffset</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">outerChunkPosOffset</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">outerChunkCount</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">outerChunkPosOffset</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">outerChunkCountSquared</span><span class="p">);</span>
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57"></a><span class="w">                </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">((</span><span class="n">layer</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">outerChunks</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">outerChunkIndices</span><span class="p">[</span><span class="n">outerChunkIndex</span><span class="p">];</span>
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58"></a><span class="w">                </span><span class="n">outerChunkPos</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">halfMultiplier</span><span class="p">;</span>
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59"></a><span class="w">                </span><span class="n">int3</span><span class="w"> </span><span class="n">localChunkPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cellPosition</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">outerChunkPos</span><span class="p">;</span>
</span><span id="__span-1-60"><a id="__codelineno-1-60" name="__codelineno-1-60"></a><span class="w">                </span><span class="n">localChunkPos</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">halfExponent</span><span class="p">;</span>
</span><span id="__span-1-61"><a id="__codelineno-1-61" name="__codelineno-1-61"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">localIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">localChunkPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">localChunkPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacity</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">localChunkPos</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacitySquared</span><span class="p">);</span>
</span><span id="__span-1-62"><a id="__codelineno-1-62" name="__codelineno-1-62"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">globalIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">localIndex</span><span class="p">;</span>
</span><span id="__span-1-63"><a id="__codelineno-1-63" name="__codelineno-1-63"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">globalIndex</span><span class="p">;</span>
</span><span id="__span-1-64"><a id="__codelineno-1-64" name="__codelineno-1-64"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-1-65"><a id="__codelineno-1-65" name="__codelineno-1-65"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-66"><a id="__codelineno-1-66" name="__codelineno-1-66"></a>
</span><span id="__span-1-67"><a id="__codelineno-1-67" name="__codelineno-1-67"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">GetCellCount</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">LODs</span><span class="p">)</span>
</span><span id="__span-1-68"><a id="__codelineno-1-68" name="__codelineno-1-68"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-69"><a id="__codelineno-1-69" name="__codelineno-1-69"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">innerContribution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">innerChunks</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-1-70"><a id="__codelineno-1-70" name="__codelineno-1-70"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">outerContribution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">LODs</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">outerChunks</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-1-71"><a id="__codelineno-1-71" name="__codelineno-1-71"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">innerContribution</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">outerContribution</span><span class="p">;</span>
</span><span id="__span-1-72"><a id="__codelineno-1-72" name="__codelineno-1-72"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-73"><a id="__codelineno-1-73" name="__codelineno-1-73"></a>
</span><span id="__span-1-74"><a id="__codelineno-1-74" name="__codelineno-1-74"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">GetSizeMultiplier</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
</span><span id="__span-1-75"><a id="__codelineno-1-75" name="__codelineno-1-75"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-76"><a id="__codelineno-1-76" name="__codelineno-1-76"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tCapacityCubed</span><span class="p">;</span>
</span><span id="__span-1-77"><a id="__codelineno-1-77" name="__codelineno-1-77"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-1-78"><a id="__codelineno-1-78" name="__codelineno-1-78"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">8</span><span class="p">)</span>
</span><span id="__span-1-79"><a id="__codelineno-1-79" name="__codelineno-1-79"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-1-80"><a id="__codelineno-1-80" name="__codelineno-1-80"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">outerIUnwrapped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chunkIndex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">8</span><span class="p">;</span>
</span><span id="__span-1-81"><a id="__codelineno-1-81" name="__codelineno-1-81"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">outerIUnwrapped</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">outerChunks</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
</span><span id="__span-1-82"><a id="__codelineno-1-82" name="__codelineno-1-82"></a><span class="w">                </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">math</span><span class="p">.</span><span class="n">pow</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">layer</span><span class="p">);</span>
</span><span id="__span-1-83"><a id="__codelineno-1-83" name="__codelineno-1-83"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-1-84"><a id="__codelineno-1-84" name="__codelineno-1-84"></a>
</span><span id="__span-1-85"><a id="__codelineno-1-85" name="__codelineno-1-85"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">multiplier</span><span class="p">;</span>
</span><span id="__span-1-86"><a id="__codelineno-1-86" name="__codelineno-1-86"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-87"><a id="__codelineno-1-87" name="__codelineno-1-87"></a>
</span><span id="__span-1-88"><a id="__codelineno-1-88" name="__codelineno-1-88"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">int3</span><span class="p">[]</span><span class="w"> </span><span class="n">innerChunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">int3</span><span class="p">[]</span>
</span><span id="__span-1-89"><a id="__codelineno-1-89" name="__codelineno-1-89"></a><span class="p">{</span>
</span><span id="__span-1-90"><a id="__codelineno-1-90" name="__codelineno-1-90"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-91"><a id="__codelineno-1-91" name="__codelineno-1-91"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-92"><a id="__codelineno-1-92" name="__codelineno-1-92"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-93"><a id="__codelineno-1-93" name="__codelineno-1-93"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-94"><a id="__codelineno-1-94" name="__codelineno-1-94"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-95"><a id="__codelineno-1-95" name="__codelineno-1-95"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-96"><a id="__codelineno-1-96" name="__codelineno-1-96"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-97"><a id="__codelineno-1-97" name="__codelineno-1-97"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-1-98"><a id="__codelineno-1-98" name="__codelineno-1-98"></a><span class="p">};</span>
</span><span id="__span-1-99"><a id="__codelineno-1-99" name="__codelineno-1-99"></a>
</span><span id="__span-1-100"><a id="__codelineno-1-100" name="__codelineno-1-100"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">outerChunkCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">;</span>
</span><span id="__span-1-101"><a id="__codelineno-1-101" name="__codelineno-1-101"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">outerChunkCountSquared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outerChunkCount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">outerChunkCount</span><span class="p">;</span>
</span><span id="__span-1-102"><a id="__codelineno-1-102" name="__codelineno-1-102"></a>
</span><span id="__span-1-103"><a id="__codelineno-1-103" name="__codelineno-1-103"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">outerChunkIndices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span>
</span><span id="__span-1-104"><a id="__codelineno-1-104" name="__codelineno-1-104"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-105"><a id="__codelineno-1-105" name="__codelineno-1-105"></a><span class="w">                </span><span class="m">0</span><span class="p">,</span>
</span><span id="__span-1-106"><a id="__codelineno-1-106" name="__codelineno-1-106"></a><span class="w">                </span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-107"><a id="__codelineno-1-107" name="__codelineno-1-107"></a><span class="w">                </span><span class="m">2</span><span class="p">,</span>
</span><span id="__span-1-108"><a id="__codelineno-1-108" name="__codelineno-1-108"></a><span class="w">                </span><span class="m">3</span><span class="p">,</span>
</span><span id="__span-1-109"><a id="__codelineno-1-109" name="__codelineno-1-109"></a><span class="w">                </span><span class="m">4</span><span class="p">,</span>
</span><span id="__span-1-110"><a id="__codelineno-1-110" name="__codelineno-1-110"></a><span class="w">                </span><span class="m">5</span><span class="p">,</span>
</span><span id="__span-1-111"><a id="__codelineno-1-111" name="__codelineno-1-111"></a><span class="w">                </span><span class="m">6</span><span class="p">,</span>
</span><span id="__span-1-112"><a id="__codelineno-1-112" name="__codelineno-1-112"></a><span class="w">                </span><span class="m">7</span><span class="p">,</span>
</span><span id="__span-1-113"><a id="__codelineno-1-113" name="__codelineno-1-113"></a><span class="w">                </span><span class="m">8</span><span class="p">,</span>
</span><span id="__span-1-114"><a id="__codelineno-1-114" name="__codelineno-1-114"></a><span class="w">                </span><span class="m">9</span><span class="p">,</span>
</span><span id="__span-1-115"><a id="__codelineno-1-115" name="__codelineno-1-115"></a><span class="w">                </span><span class="m">10</span><span class="p">,</span>
</span><span id="__span-1-116"><a id="__codelineno-1-116" name="__codelineno-1-116"></a><span class="w">                </span><span class="m">11</span><span class="p">,</span>
</span><span id="__span-1-117"><a id="__codelineno-1-117" name="__codelineno-1-117"></a><span class="w">                </span><span class="m">12</span><span class="p">,</span>
</span><span id="__span-1-118"><a id="__codelineno-1-118" name="__codelineno-1-118"></a><span class="w">                </span><span class="m">13</span><span class="p">,</span>
</span><span id="__span-1-119"><a id="__codelineno-1-119" name="__codelineno-1-119"></a><span class="w">                </span><span class="m">14</span><span class="p">,</span>
</span><span id="__span-1-120"><a id="__codelineno-1-120" name="__codelineno-1-120"></a><span class="w">                </span><span class="m">15</span><span class="p">,</span>
</span><span id="__span-1-121"><a id="__codelineno-1-121" name="__codelineno-1-121"></a><span class="w">                </span><span class="m">16</span><span class="p">,</span>
</span><span id="__span-1-122"><a id="__codelineno-1-122" name="__codelineno-1-122"></a><span class="w">                </span><span class="m">17</span><span class="p">,</span>
</span><span id="__span-1-123"><a id="__codelineno-1-123" name="__codelineno-1-123"></a><span class="w">                </span><span class="m">18</span><span class="p">,</span>
</span><span id="__span-1-124"><a id="__codelineno-1-124" name="__codelineno-1-124"></a><span class="w">                </span><span class="m">19</span><span class="p">,</span>
</span><span id="__span-1-125"><a id="__codelineno-1-125" name="__codelineno-1-125"></a><span class="w">                </span><span class="m">20</span><span class="p">,</span>
</span><span id="__span-1-126"><a id="__codelineno-1-126" name="__codelineno-1-126"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-127"><a id="__codelineno-1-127" name="__codelineno-1-127"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-128"><a id="__codelineno-1-128" name="__codelineno-1-128"></a><span class="w">                </span><span class="m">21</span><span class="p">,</span>
</span><span id="__span-1-129"><a id="__codelineno-1-129" name="__codelineno-1-129"></a><span class="w">                </span><span class="m">22</span><span class="p">,</span>
</span><span id="__span-1-130"><a id="__codelineno-1-130" name="__codelineno-1-130"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-131"><a id="__codelineno-1-131" name="__codelineno-1-131"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-132"><a id="__codelineno-1-132" name="__codelineno-1-132"></a><span class="w">                </span><span class="m">23</span><span class="p">,</span>
</span><span id="__span-1-133"><a id="__codelineno-1-133" name="__codelineno-1-133"></a><span class="w">                </span><span class="m">24</span><span class="p">,</span>
</span><span id="__span-1-134"><a id="__codelineno-1-134" name="__codelineno-1-134"></a><span class="w">                </span><span class="m">25</span><span class="p">,</span>
</span><span id="__span-1-135"><a id="__codelineno-1-135" name="__codelineno-1-135"></a><span class="w">                </span><span class="m">26</span><span class="p">,</span>
</span><span id="__span-1-136"><a id="__codelineno-1-136" name="__codelineno-1-136"></a><span class="w">                </span><span class="m">27</span><span class="p">,</span>
</span><span id="__span-1-137"><a id="__codelineno-1-137" name="__codelineno-1-137"></a><span class="w">                </span><span class="m">28</span><span class="p">,</span>
</span><span id="__span-1-138"><a id="__codelineno-1-138" name="__codelineno-1-138"></a><span class="w">                </span><span class="m">29</span><span class="p">,</span>
</span><span id="__span-1-139"><a id="__codelineno-1-139" name="__codelineno-1-139"></a><span class="w">                </span><span class="m">30</span><span class="p">,</span>
</span><span id="__span-1-140"><a id="__codelineno-1-140" name="__codelineno-1-140"></a><span class="w">                </span><span class="m">31</span><span class="p">,</span>
</span><span id="__span-1-141"><a id="__codelineno-1-141" name="__codelineno-1-141"></a><span class="w">                </span><span class="m">32</span><span class="p">,</span>
</span><span id="__span-1-142"><a id="__codelineno-1-142" name="__codelineno-1-142"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-143"><a id="__codelineno-1-143" name="__codelineno-1-143"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-144"><a id="__codelineno-1-144" name="__codelineno-1-144"></a><span class="w">                </span><span class="m">33</span><span class="p">,</span>
</span><span id="__span-1-145"><a id="__codelineno-1-145" name="__codelineno-1-145"></a><span class="w">                </span><span class="m">34</span><span class="p">,</span>
</span><span id="__span-1-146"><a id="__codelineno-1-146" name="__codelineno-1-146"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-147"><a id="__codelineno-1-147" name="__codelineno-1-147"></a><span class="w">                </span><span class="o">-</span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-1-148"><a id="__codelineno-1-148" name="__codelineno-1-148"></a><span class="w">                </span><span class="m">35</span><span class="p">,</span>
</span><span id="__span-1-149"><a id="__codelineno-1-149" name="__codelineno-1-149"></a><span class="w">                </span><span class="m">36</span><span class="p">,</span>
</span><span id="__span-1-150"><a id="__codelineno-1-150" name="__codelineno-1-150"></a><span class="w">                </span><span class="m">37</span><span class="p">,</span>
</span><span id="__span-1-151"><a id="__codelineno-1-151" name="__codelineno-1-151"></a><span class="w">                </span><span class="m">38</span><span class="p">,</span>
</span><span id="__span-1-152"><a id="__codelineno-1-152" name="__codelineno-1-152"></a><span class="w">                </span><span class="m">39</span><span class="p">,</span>
</span><span id="__span-1-153"><a id="__codelineno-1-153" name="__codelineno-1-153"></a><span class="w">                </span><span class="m">40</span><span class="p">,</span>
</span><span id="__span-1-154"><a id="__codelineno-1-154" name="__codelineno-1-154"></a><span class="w">                </span><span class="m">41</span><span class="p">,</span>
</span><span id="__span-1-155"><a id="__codelineno-1-155" name="__codelineno-1-155"></a><span class="w">                </span><span class="m">42</span><span class="p">,</span>
</span><span id="__span-1-156"><a id="__codelineno-1-156" name="__codelineno-1-156"></a><span class="w">                </span><span class="m">43</span><span class="p">,</span>
</span><span id="__span-1-157"><a id="__codelineno-1-157" name="__codelineno-1-157"></a><span class="w">                </span><span class="m">44</span><span class="p">,</span>
</span><span id="__span-1-158"><a id="__codelineno-1-158" name="__codelineno-1-158"></a><span class="w">                </span><span class="m">45</span><span class="p">,</span>
</span><span id="__span-1-159"><a id="__codelineno-1-159" name="__codelineno-1-159"></a><span class="w">                </span><span class="m">46</span><span class="p">,</span>
</span><span id="__span-1-160"><a id="__codelineno-1-160" name="__codelineno-1-160"></a><span class="w">                </span><span class="m">47</span><span class="p">,</span>
</span><span id="__span-1-161"><a id="__codelineno-1-161" name="__codelineno-1-161"></a><span class="w">                </span><span class="m">48</span><span class="p">,</span>
</span><span id="__span-1-162"><a id="__codelineno-1-162" name="__codelineno-1-162"></a><span class="w">                </span><span class="m">49</span><span class="p">,</span>
</span><span id="__span-1-163"><a id="__codelineno-1-163" name="__codelineno-1-163"></a><span class="w">                </span><span class="m">50</span><span class="p">,</span>
</span><span id="__span-1-164"><a id="__codelineno-1-164" name="__codelineno-1-164"></a><span class="w">                </span><span class="m">51</span><span class="p">,</span>
</span><span id="__span-1-165"><a id="__codelineno-1-165" name="__codelineno-1-165"></a><span class="w">                </span><span class="m">52</span><span class="p">,</span>
</span><span id="__span-1-166"><a id="__codelineno-1-166" name="__codelineno-1-166"></a><span class="w">                </span><span class="m">53</span><span class="p">,</span>
</span><span id="__span-1-167"><a id="__codelineno-1-167" name="__codelineno-1-167"></a><span class="w">                </span><span class="m">54</span><span class="p">,</span>
</span><span id="__span-1-168"><a id="__codelineno-1-168" name="__codelineno-1-168"></a><span class="w">                </span><span class="m">55</span>
</span><span id="__span-1-169"><a id="__codelineno-1-169" name="__codelineno-1-169"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-1-170"><a id="__codelineno-1-170" name="__codelineno-1-170"></a>
</span><span id="__span-1-171"><a id="__codelineno-1-171" name="__codelineno-1-171"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">int3</span><span class="p">[]</span><span class="w"> </span><span class="n">outerChunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">int3</span><span class="p">[]</span>
</span><span id="__span-1-172"><a id="__codelineno-1-172" name="__codelineno-1-172"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-173"><a id="__codelineno-1-173" name="__codelineno-1-173"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-174"><a id="__codelineno-1-174" name="__codelineno-1-174"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-175"><a id="__codelineno-1-175" name="__codelineno-1-175"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-176"><a id="__codelineno-1-176" name="__codelineno-1-176"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-177"><a id="__codelineno-1-177" name="__codelineno-1-177"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-178"><a id="__codelineno-1-178" name="__codelineno-1-178"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-179"><a id="__codelineno-1-179" name="__codelineno-1-179"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-180"><a id="__codelineno-1-180" name="__codelineno-1-180"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-181"><a id="__codelineno-1-181" name="__codelineno-1-181"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-182"><a id="__codelineno-1-182" name="__codelineno-1-182"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-183"><a id="__codelineno-1-183" name="__codelineno-1-183"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-184"><a id="__codelineno-1-184" name="__codelineno-1-184"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-185"><a id="__codelineno-1-185" name="__codelineno-1-185"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-186"><a id="__codelineno-1-186" name="__codelineno-1-186"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-187"><a id="__codelineno-1-187" name="__codelineno-1-187"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-188"><a id="__codelineno-1-188" name="__codelineno-1-188"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">),</span>
</span><span id="__span-1-189"><a id="__codelineno-1-189" name="__codelineno-1-189"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-190"><a id="__codelineno-1-190" name="__codelineno-1-190"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-191"><a id="__codelineno-1-191" name="__codelineno-1-191"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-192"><a id="__codelineno-1-192" name="__codelineno-1-192"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-193"><a id="__codelineno-1-193" name="__codelineno-1-193"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-194"><a id="__codelineno-1-194" name="__codelineno-1-194"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-195"><a id="__codelineno-1-195" name="__codelineno-1-195"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-196"><a id="__codelineno-1-196" name="__codelineno-1-196"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-197"><a id="__codelineno-1-197" name="__codelineno-1-197"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-198"><a id="__codelineno-1-198" name="__codelineno-1-198"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-199"><a id="__codelineno-1-199" name="__codelineno-1-199"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-200"><a id="__codelineno-1-200" name="__codelineno-1-200"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-201"><a id="__codelineno-1-201" name="__codelineno-1-201"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-202"><a id="__codelineno-1-202" name="__codelineno-1-202"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-203"><a id="__codelineno-1-203" name="__codelineno-1-203"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-204"><a id="__codelineno-1-204" name="__codelineno-1-204"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-205"><a id="__codelineno-1-205" name="__codelineno-1-205"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-206"><a id="__codelineno-1-206" name="__codelineno-1-206"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-207"><a id="__codelineno-1-207" name="__codelineno-1-207"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-208"><a id="__codelineno-1-208" name="__codelineno-1-208"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-209"><a id="__codelineno-1-209" name="__codelineno-1-209"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-210"><a id="__codelineno-1-210" name="__codelineno-1-210"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-211"><a id="__codelineno-1-211" name="__codelineno-1-211"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-212"><a id="__codelineno-1-212" name="__codelineno-1-212"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
</span><span id="__span-1-213"><a id="__codelineno-1-213" name="__codelineno-1-213"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-214"><a id="__codelineno-1-214" name="__codelineno-1-214"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-215"><a id="__codelineno-1-215" name="__codelineno-1-215"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-216"><a id="__codelineno-1-216" name="__codelineno-1-216"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-217"><a id="__codelineno-1-217" name="__codelineno-1-217"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-218"><a id="__codelineno-1-218" name="__codelineno-1-218"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-219"><a id="__codelineno-1-219" name="__codelineno-1-219"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-220"><a id="__codelineno-1-220" name="__codelineno-1-220"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-221"><a id="__codelineno-1-221" name="__codelineno-1-221"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-222"><a id="__codelineno-1-222" name="__codelineno-1-222"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-223"><a id="__codelineno-1-223" name="__codelineno-1-223"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-224"><a id="__codelineno-1-224" name="__codelineno-1-224"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-225"><a id="__codelineno-1-225" name="__codelineno-1-225"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-226"><a id="__codelineno-1-226" name="__codelineno-1-226"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-227"><a id="__codelineno-1-227" name="__codelineno-1-227"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
</span><span id="__span-1-228"><a id="__codelineno-1-228" name="__codelineno-1-228"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">int3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
</span><span id="__span-1-229"><a id="__codelineno-1-229" name="__codelineno-1-229"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-1-230"><a id="__codelineno-1-230" name="__codelineno-1-230"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-231"><a id="__codelineno-1-231" name="__codelineno-1-231"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</div>
</div>
</div>
<h2 id="sims-like-building-system-using-ear-clipping-triangulation">Sims-Like Building System Using Ear Clipping Triangulation<a class="headerlink" href="#sims-like-building-system-using-ear-clipping-triangulation" title="Permanent link">¶</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Video</label><label for="__tabbed_3_2">Code Samples</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div class="video-container"><video style="position:relative;width:100%;height:22.172vw" muted controls alt="type:video"><source src="../assets/media/sims_like_building_system/general_showcase.mp4" type="video/mp4"></source></video></div>
<div class="admonition quote">
<p class="admonition-title">About</p>
<p>This system was originally intended for a restaurant management game. Essentially what's happening is the wall segments are being used as sides to solve the ear clipping algorithim. This lets you generate floors for any room shape. I've also incorporated systems for other meshes to be inserted along the wall segments, this allows for placement of doors and windows.</p>
</div>
</div>
<div class="tabbed-block">
<div class="admonition quote">
<p class="admonition-title">About</p>
<p>Showcased here are the two main classes used in generating floor meshes from wall segments. Essentially the 3D mesh information is converted to 2D where the ear clipping algorithim is then applied and converted back to 3D to serve as generated mesh data.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">Polygon2</label><label for="__tabbed_4_2">Triangulate</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">grid.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">  1</a></span>
<span class="normal"><a href="#__codelineno-2-2">  2</a></span>
<span class="normal"><a href="#__codelineno-2-3">  3</a></span>
<span class="normal"><a href="#__codelineno-2-4">  4</a></span>
<span class="normal"><a href="#__codelineno-2-5">  5</a></span>
<span class="normal"><a href="#__codelineno-2-6">  6</a></span>
<span class="normal"><a href="#__codelineno-2-7">  7</a></span>
<span class="normal"><a href="#__codelineno-2-8">  8</a></span>
<span class="normal"><a href="#__codelineno-2-9">  9</a></span>
<span class="normal"><a href="#__codelineno-2-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-2-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-2-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-2-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-2-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-2-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-2-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-2-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-2-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-2-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-2-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-2-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-2-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-2-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-2-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-2-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-2-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-2-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-2-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-2-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-2-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-2-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-2-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-2-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-2-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-2-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-2-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-2-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-2-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-2-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-2-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-2-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-2-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-2-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-2-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-2-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-2-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-2-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-2-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-2-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-2-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-2-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-2-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-2-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-2-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-2-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-2-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-2-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-2-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-2-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-2-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-2-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-2-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-2-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-2-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-2-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-2-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-2-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-2-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-2-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-2-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-2-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-2-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-2-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-2-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-2-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-2-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-2-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-2-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-2-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-2-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-2-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-2-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-2-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-2-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-2-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-2-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-2-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-2-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-2-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-2-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-2-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-2-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-2-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-2-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-2-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-2-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-2-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-2-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-2-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-2-100">100</a></span>
<span class="normal"><a href="#__codelineno-2-101">101</a></span>
<span class="normal"><a href="#__codelineno-2-102">102</a></span>
<span class="normal"><a href="#__codelineno-2-103">103</a></span>
<span class="normal"><a href="#__codelineno-2-104">104</a></span>
<span class="normal"><a href="#__codelineno-2-105">105</a></span>
<span class="normal"><a href="#__codelineno-2-106">106</a></span>
<span class="normal"><a href="#__codelineno-2-107">107</a></span>
<span class="normal"><a href="#__codelineno-2-108">108</a></span>
<span class="normal"><a href="#__codelineno-2-109">109</a></span>
<span class="normal"><a href="#__codelineno-2-110">110</a></span>
<span class="normal"><a href="#__codelineno-2-111">111</a></span>
<span class="normal"><a href="#__codelineno-2-112">112</a></span>
<span class="normal"><a href="#__codelineno-2-113">113</a></span>
<span class="normal"><a href="#__codelineno-2-114">114</a></span>
<span class="normal"><a href="#__codelineno-2-115">115</a></span>
<span class="normal"><a href="#__codelineno-2-116">116</a></span>
<span class="normal"><a href="#__codelineno-2-117">117</a></span>
<span class="normal"><a href="#__codelineno-2-118">118</a></span>
<span class="normal"><a href="#__codelineno-2-119">119</a></span>
<span class="normal"><a href="#__codelineno-2-120">120</a></span>
<span class="normal"><a href="#__codelineno-2-121">121</a></span>
<span class="normal"><a href="#__codelineno-2-122">122</a></span>
<span class="normal"><a href="#__codelineno-2-123">123</a></span>
<span class="normal"><a href="#__codelineno-2-124">124</a></span>
<span class="normal"><a href="#__codelineno-2-125">125</a></span>
<span class="normal"><a href="#__codelineno-2-126">126</a></span>
<span class="normal"><a href="#__codelineno-2-127">127</a></span>
<span class="normal"><a href="#__codelineno-2-128">128</a></span>
<span class="normal"><a href="#__codelineno-2-129">129</a></span>
<span class="normal"><a href="#__codelineno-2-130">130</a></span>
<span class="normal"><a href="#__codelineno-2-131">131</a></span>
<span class="normal"><a href="#__codelineno-2-132">132</a></span>
<span class="normal"><a href="#__codelineno-2-133">133</a></span>
<span class="normal"><a href="#__codelineno-2-134">134</a></span>
<span class="normal"><a href="#__codelineno-2-135">135</a></span>
<span class="normal"><a href="#__codelineno-2-136">136</a></span>
<span class="normal"><a href="#__codelineno-2-137">137</a></span>
<span class="normal"><a href="#__codelineno-2-138">138</a></span>
<span class="normal"><a href="#__codelineno-2-139">139</a></span>
<span class="normal"><a href="#__codelineno-2-140">140</a></span>
<span class="normal"><a href="#__codelineno-2-141">141</a></span>
<span class="normal"><a href="#__codelineno-2-142">142</a></span>
<span class="normal"><a href="#__codelineno-2-143">143</a></span>
<span class="normal"><a href="#__codelineno-2-144">144</a></span>
<span class="normal"><a href="#__codelineno-2-145">145</a></span>
<span class="normal"><a href="#__codelineno-2-146">146</a></span>
<span class="normal"><a href="#__codelineno-2-147">147</a></span>
<span class="normal"><a href="#__codelineno-2-148">148</a></span>
<span class="normal"><a href="#__codelineno-2-149">149</a></span>
<span class="normal"><a href="#__codelineno-2-150">150</a></span>
<span class="normal"><a href="#__codelineno-2-151">151</a></span>
<span class="normal"><a href="#__codelineno-2-152">152</a></span>
<span class="normal"><a href="#__codelineno-2-153">153</a></span>
<span class="normal"><a href="#__codelineno-2-154">154</a></span>
<span class="normal"><a href="#__codelineno-2-155">155</a></span>
<span class="normal"><a href="#__codelineno-2-156">156</a></span>
<span class="normal"><a href="#__codelineno-2-157">157</a></span>
<span class="normal"><a href="#__codelineno-2-158">158</a></span>
<span class="normal"><a href="#__codelineno-2-159">159</a></span>
<span class="normal"><a href="#__codelineno-2-160">160</a></span>
<span class="normal"><a href="#__codelineno-2-161">161</a></span>
<span class="normal"><a href="#__codelineno-2-162">162</a></span>
<span class="normal"><a href="#__codelineno-2-163">163</a></span>
<span class="normal"><a href="#__codelineno-2-164">164</a></span>
<span class="normal"><a href="#__codelineno-2-165">165</a></span>
<span class="normal"><a href="#__codelineno-2-166">166</a></span>
<span class="normal"><a href="#__codelineno-2-167">167</a></span>
<span class="normal"><a href="#__codelineno-2-168">168</a></span>
<span class="normal"><a href="#__codelineno-2-169">169</a></span>
<span class="normal"><a href="#__codelineno-2-170">170</a></span>
<span class="normal"><a href="#__codelineno-2-171">171</a></span>
<span class="normal"><a href="#__codelineno-2-172">172</a></span>
<span class="normal"><a href="#__codelineno-2-173">173</a></span>
<span class="normal"><a href="#__codelineno-2-174">174</a></span>
<span class="normal"><a href="#__codelineno-2-175">175</a></span>
<span class="normal"><a href="#__codelineno-2-176">176</a></span>
<span class="normal"><a href="#__codelineno-2-177">177</a></span>
<span class="normal"><a href="#__codelineno-2-178">178</a></span>
<span class="normal"><a href="#__codelineno-2-179">179</a></span>
<span class="normal"><a href="#__codelineno-2-180">180</a></span>
<span class="normal"><a href="#__codelineno-2-181">181</a></span>
<span class="normal"><a href="#__codelineno-2-182">182</a></span>
<span class="normal"><a href="#__codelineno-2-183">183</a></span>
<span class="normal"><a href="#__codelineno-2-184">184</a></span>
<span class="normal"><a href="#__codelineno-2-185">185</a></span>
<span class="normal"><a href="#__codelineno-2-186">186</a></span>
<span class="normal"><a href="#__codelineno-2-187">187</a></span>
<span class="normal"><a href="#__codelineno-2-188">188</a></span>
<span class="normal"><a href="#__codelineno-2-189">189</a></span>
<span class="normal"><a href="#__codelineno-2-190">190</a></span>
<span class="normal"><a href="#__codelineno-2-191">191</a></span>
<span class="normal"><a href="#__codelineno-2-192">192</a></span>
<span class="normal"><a href="#__codelineno-2-193">193</a></span>
<span class="normal"><a href="#__codelineno-2-194">194</a></span>
<span class="normal"><a href="#__codelineno-2-195">195</a></span>
<span class="normal"><a href="#__codelineno-2-196">196</a></span>
<span class="normal"><a href="#__codelineno-2-197">197</a></span>
<span class="normal"><a href="#__codelineno-2-198">198</a></span>
<span class="normal"><a href="#__codelineno-2-199">199</a></span>
<span class="normal"><a href="#__codelineno-2-200">200</a></span>
<span class="normal"><a href="#__codelineno-2-201">201</a></span>
<span class="normal"><a href="#__codelineno-2-202">202</a></span>
<span class="normal"><a href="#__codelineno-2-203">203</a></span>
<span class="normal"><a href="#__codelineno-2-204">204</a></span>
<span class="normal"><a href="#__codelineno-2-205">205</a></span>
<span class="normal"><a href="#__codelineno-2-206">206</a></span>
<span class="normal"><a href="#__codelineno-2-207">207</a></span>
<span class="normal"><a href="#__codelineno-2-208">208</a></span>
<span class="normal"><a href="#__codelineno-2-209">209</a></span>
<span class="normal"><a href="#__codelineno-2-210">210</a></span>
<span class="normal"><a href="#__codelineno-2-211">211</a></span>
<span class="normal"><a href="#__codelineno-2-212">212</a></span>
<span class="normal"><a href="#__codelineno-2-213">213</a></span>
<span class="normal"><a href="#__codelineno-2-214">214</a></span>
<span class="normal"><a href="#__codelineno-2-215">215</a></span>
<span class="normal"><a href="#__codelineno-2-216">216</a></span>
<span class="normal"><a href="#__codelineno-2-217">217</a></span>
<span class="normal"><a href="#__codelineno-2-218">218</a></span>
<span class="normal"><a href="#__codelineno-2-219">219</a></span>
<span class="normal"><a href="#__codelineno-2-220">220</a></span>
<span class="normal"><a href="#__codelineno-2-221">221</a></span>
<span class="normal"><a href="#__codelineno-2-222">222</a></span>
<span class="normal"><a href="#__codelineno-2-223">223</a></span>
<span class="normal"><a href="#__codelineno-2-224">224</a></span>
<span class="normal"><a href="#__codelineno-2-225">225</a></span>
<span class="normal"><a href="#__codelineno-2-226">226</a></span>
<span class="normal"><a href="#__codelineno-2-227">227</a></span>
<span class="normal"><a href="#__codelineno-2-228">228</a></span>
<span class="normal"><a href="#__codelineno-2-229">229</a></span>
<span class="normal"><a href="#__codelineno-2-230">230</a></span>
<span class="normal"><a href="#__codelineno-2-231">231</a></span>
<span class="normal"><a href="#__codelineno-2-232">232</a></span>
<span class="normal"><a href="#__codelineno-2-233">233</a></span>
<span class="normal"><a href="#__codelineno-2-234">234</a></span>
<span class="normal"><a href="#__codelineno-2-235">235</a></span>
<span class="normal"><a href="#__codelineno-2-236">236</a></span>
<span class="normal"><a href="#__codelineno-2-237">237</a></span>
<span class="normal"><a href="#__codelineno-2-238">238</a></span>
<span class="normal"><a href="#__codelineno-2-239">239</a></span>
<span class="normal"><a href="#__codelineno-2-240">240</a></span>
<span class="normal"><a href="#__codelineno-2-241">241</a></span>
<span class="normal"><a href="#__codelineno-2-242">242</a></span>
<span class="normal"><a href="#__codelineno-2-243">243</a></span>
<span class="normal"><a href="#__codelineno-2-244">244</a></span>
<span class="normal"><a href="#__codelineno-2-245">245</a></span>
<span class="normal"><a href="#__codelineno-2-246">246</a></span>
<span class="normal"><a href="#__codelineno-2-247">247</a></span>
<span class="normal"><a href="#__codelineno-2-248">248</a></span>
<span class="normal"><a href="#__codelineno-2-249">249</a></span>
<span class="normal"><a href="#__codelineno-2-250">250</a></span>
<span class="normal"><a href="#__codelineno-2-251">251</a></span>
<span class="normal"><a href="#__codelineno-2-252">252</a></span>
<span class="normal"><a href="#__codelineno-2-253">253</a></span>
<span class="normal"><a href="#__codelineno-2-254">254</a></span>
<span class="normal"><a href="#__codelineno-2-255">255</a></span>
<span class="normal"><a href="#__codelineno-2-256">256</a></span>
<span class="normal"><a href="#__codelineno-2-257">257</a></span>
<span class="normal"><a href="#__codelineno-2-258">258</a></span>
<span class="normal"><a href="#__codelineno-2-259">259</a></span>
<span class="normal"><a href="#__codelineno-2-260">260</a></span>
<span class="normal"><a href="#__codelineno-2-261">261</a></span>
<span class="normal"><a href="#__codelineno-2-262">262</a></span>
<span class="normal"><a href="#__codelineno-2-263">263</a></span>
<span class="normal"><a href="#__codelineno-2-264">264</a></span>
<span class="normal"><a href="#__codelineno-2-265">265</a></span>
<span class="normal"><a href="#__codelineno-2-266">266</a></span>
<span class="normal"><a href="#__codelineno-2-267">267</a></span>
<span class="normal"><a href="#__codelineno-2-268">268</a></span>
<span class="normal"><a href="#__codelineno-2-269">269</a></span>
<span class="normal"><a href="#__codelineno-2-270">270</a></span>
<span class="normal"><a href="#__codelineno-2-271">271</a></span>
<span class="normal"><a href="#__codelineno-2-272">272</a></span>
<span class="normal"><a href="#__codelineno-2-273">273</a></span>
<span class="normal"><a href="#__codelineno-2-274">274</a></span>
<span class="normal"><a href="#__codelineno-2-275">275</a></span>
<span class="normal"><a href="#__codelineno-2-276">276</a></span>
<span class="normal"><a href="#__codelineno-2-277">277</a></span>
<span class="normal"><a href="#__codelineno-2-278">278</a></span>
<span class="normal"><a href="#__codelineno-2-279">279</a></span>
<span class="normal"><a href="#__codelineno-2-280">280</a></span>
<span class="normal"><a href="#__codelineno-2-281">281</a></span>
<span class="normal"><a href="#__codelineno-2-282">282</a></span>
<span class="normal"><a href="#__codelineno-2-283">283</a></span>
<span class="normal"><a href="#__codelineno-2-284">284</a></span>
<span class="normal"><a href="#__codelineno-2-285">285</a></span>
<span class="normal"><a href="#__codelineno-2-286">286</a></span>
<span class="normal"><a href="#__codelineno-2-287">287</a></span>
<span class="normal"><a href="#__codelineno-2-288">288</a></span>
<span class="normal"><a href="#__codelineno-2-289">289</a></span>
<span class="normal"><a href="#__codelineno-2-290">290</a></span>
<span class="normal"><a href="#__codelineno-2-291">291</a></span>
<span class="normal"><a href="#__codelineno-2-292">292</a></span>
<span class="normal"><a href="#__codelineno-2-293">293</a></span>
<span class="normal"><a href="#__codelineno-2-294">294</a></span>
<span class="normal"><a href="#__codelineno-2-295">295</a></span>
<span class="normal"><a href="#__codelineno-2-296">296</a></span>
<span class="normal"><a href="#__codelineno-2-297">297</a></span>
<span class="normal"><a href="#__codelineno-2-298">298</a></span>
<span class="normal"><a href="#__codelineno-2-299">299</a></span>
<span class="normal"><a href="#__codelineno-2-300">300</a></span>
<span class="normal"><a href="#__codelineno-2-301">301</a></span>
<span class="normal"><a href="#__codelineno-2-302">302</a></span>
<span class="normal"><a href="#__codelineno-2-303">303</a></span>
<span class="normal"><a href="#__codelineno-2-304">304</a></span>
<span class="normal"><a href="#__codelineno-2-305">305</a></span>
<span class="normal"><a href="#__codelineno-2-306">306</a></span>
<span class="normal"><a href="#__codelineno-2-307">307</a></span>
<span class="normal"><a href="#__codelineno-2-308">308</a></span>
<span class="normal"><a href="#__codelineno-2-309">309</a></span>
<span class="normal"><a href="#__codelineno-2-310">310</a></span>
<span class="normal"><a href="#__codelineno-2-311">311</a></span>
<span class="normal"><a href="#__codelineno-2-312">312</a></span>
<span class="normal"><a href="#__codelineno-2-313">313</a></span>
<span class="normal"><a href="#__codelineno-2-314">314</a></span>
<span class="normal"><a href="#__codelineno-2-315">315</a></span>
<span class="normal"><a href="#__codelineno-2-316">316</a></span>
<span class="normal"><a href="#__codelineno-2-317">317</a></span>
<span class="normal"><a href="#__codelineno-2-318">318</a></span>
<span class="normal"><a href="#__codelineno-2-319">319</a></span>
<span class="normal"><a href="#__codelineno-2-320">320</a></span>
<span class="normal"><a href="#__codelineno-2-321">321</a></span>
<span class="normal"><a href="#__codelineno-2-322">322</a></span>
<span class="normal"><a href="#__codelineno-2-323">323</a></span>
<span class="normal"><a href="#__codelineno-2-324">324</a></span>
<span class="normal"><a href="#__codelineno-2-325">325</a></span>
<span class="normal"><a href="#__codelineno-2-326">326</a></span>
<span class="normal"><a href="#__codelineno-2-327">327</a></span>
<span class="normal"><a href="#__codelineno-2-328">328</a></span>
<span class="normal"><a href="#__codelineno-2-329">329</a></span>
<span class="normal"><a href="#__codelineno-2-330">330</a></span>
<span class="normal"><a href="#__codelineno-2-331">331</a></span>
<span class="normal"><a href="#__codelineno-2-332">332</a></span>
<span class="normal"><a href="#__codelineno-2-333">333</a></span>
<span class="normal"><a href="#__codelineno-2-334">334</a></span>
<span class="normal"><a href="#__codelineno-2-335">335</a></span>
<span class="normal"><a href="#__codelineno-2-336">336</a></span>
<span class="normal"><a href="#__codelineno-2-337">337</a></span>
<span class="normal"><a href="#__codelineno-2-338">338</a></span>
<span class="normal"><a href="#__codelineno-2-339">339</a></span>
<span class="normal"><a href="#__codelineno-2-340">340</a></span>
<span class="normal"><a href="#__codelineno-2-341">341</a></span>
<span class="normal"><a href="#__codelineno-2-342">342</a></span>
<span class="normal"><a href="#__codelineno-2-343">343</a></span>
<span class="normal"><a href="#__codelineno-2-344">344</a></span>
<span class="normal"><a href="#__codelineno-2-345">345</a></span>
<span class="normal"><a href="#__codelineno-2-346">346</a></span>
<span class="normal"><a href="#__codelineno-2-347">347</a></span>
<span class="normal"><a href="#__codelineno-2-348">348</a></span>
<span class="normal"><a href="#__codelineno-2-349">349</a></span>
<span class="normal"><a href="#__codelineno-2-350">350</a></span>
<span class="normal"><a href="#__codelineno-2-351">351</a></span>
<span class="normal"><a href="#__codelineno-2-352">352</a></span>
<span class="normal"><a href="#__codelineno-2-353">353</a></span>
<span class="normal"><a href="#__codelineno-2-354">354</a></span>
<span class="normal"><a href="#__codelineno-2-355">355</a></span>
<span class="normal"><a href="#__codelineno-2-356">356</a></span>
<span class="normal"><a href="#__codelineno-2-357">357</a></span>
<span class="normal"><a href="#__codelineno-2-358">358</a></span>
<span class="normal"><a href="#__codelineno-2-359">359</a></span>
<span class="normal"><a href="#__codelineno-2-360">360</a></span>
<span class="normal"><a href="#__codelineno-2-361">361</a></span>
<span class="normal"><a href="#__codelineno-2-362">362</a></span>
<span class="normal"><a href="#__codelineno-2-363">363</a></span>
<span class="normal"><a href="#__codelineno-2-364">364</a></span>
<span class="normal"><a href="#__codelineno-2-365">365</a></span>
<span class="normal"><a href="#__codelineno-2-366">366</a></span>
<span class="normal"><a href="#__codelineno-2-367">367</a></span>
<span class="normal"><a href="#__codelineno-2-368">368</a></span>
<span class="normal"><a href="#__codelineno-2-369">369</a></span>
<span class="normal"><a href="#__codelineno-2-370">370</a></span>
<span class="normal"><a href="#__codelineno-2-371">371</a></span>
<span class="normal"><a href="#__codelineno-2-372">372</a></span>
<span class="normal"><a href="#__codelineno-2-373">373</a></span>
<span class="normal"><a href="#__codelineno-2-374">374</a></span>
<span class="normal"><a href="#__codelineno-2-375">375</a></span>
<span class="normal"><a href="#__codelineno-2-376">376</a></span>
<span class="normal"><a href="#__codelineno-2-377">377</a></span>
<span class="normal"><a href="#__codelineno-2-378">378</a></span>
<span class="normal"><a href="#__codelineno-2-379">379</a></span>
<span class="normal"><a href="#__codelineno-2-380">380</a></span>
<span class="normal"><a href="#__codelineno-2-381">381</a></span>
<span class="normal"><a href="#__codelineno-2-382">382</a></span>
<span class="normal"><a href="#__codelineno-2-383">383</a></span>
<span class="normal"><a href="#__codelineno-2-384">384</a></span>
<span class="normal"><a href="#__codelineno-2-385">385</a></span>
<span class="normal"><a href="#__codelineno-2-386">386</a></span>
<span class="normal"><a href="#__codelineno-2-387">387</a></span>
<span class="normal"><a href="#__codelineno-2-388">388</a></span>
<span class="normal"><a href="#__codelineno-2-389">389</a></span>
<span class="normal"><a href="#__codelineno-2-390">390</a></span>
<span class="normal"><a href="#__codelineno-2-391">391</a></span>
<span class="normal"><a href="#__codelineno-2-392">392</a></span>
<span class="normal"><a href="#__codelineno-2-393">393</a></span>
<span class="normal"><a href="#__codelineno-2-394">394</a></span>
<span class="normal"><a href="#__codelineno-2-395">395</a></span>
<span class="normal"><a href="#__codelineno-2-396">396</a></span>
<span class="normal"><a href="#__codelineno-2-397">397</a></span>
<span class="normal"><a href="#__codelineno-2-398">398</a></span>
<span class="normal"><a href="#__codelineno-2-399">399</a></span>
<span class="normal"><a href="#__codelineno-2-400">400</a></span>
<span class="normal"><a href="#__codelineno-2-401">401</a></span>
<span class="normal"><a href="#__codelineno-2-402">402</a></span>
<span class="normal"><a href="#__codelineno-2-403">403</a></span>
<span class="normal"><a href="#__codelineno-2-404">404</a></span>
<span class="normal"><a href="#__codelineno-2-405">405</a></span>
<span class="normal"><a href="#__codelineno-2-406">406</a></span>
<span class="normal"><a href="#__codelineno-2-407">407</a></span>
<span class="normal"><a href="#__codelineno-2-408">408</a></span>
<span class="normal"><a href="#__codelineno-2-409">409</a></span>
<span class="normal"><a href="#__codelineno-2-410">410</a></span>
<span class="normal"><a href="#__codelineno-2-411">411</a></span>
<span class="normal"><a href="#__codelineno-2-412">412</a></span>
<span class="normal"><a href="#__codelineno-2-413">413</a></span>
<span class="normal"><a href="#__codelineno-2-414">414</a></span>
<span class="normal"><a href="#__codelineno-2-415">415</a></span>
<span class="normal"><a href="#__codelineno-2-416">416</a></span>
<span class="normal"><a href="#__codelineno-2-417">417</a></span>
<span class="normal"><a href="#__codelineno-2-418">418</a></span>
<span class="normal"><a href="#__codelineno-2-419">419</a></span>
<span class="normal"><a href="#__codelineno-2-420">420</a></span>
<span class="normal"><a href="#__codelineno-2-421">421</a></span>
<span class="normal"><a href="#__codelineno-2-422">422</a></span>
<span class="normal"><a href="#__codelineno-2-423">423</a></span>
<span class="normal"><a href="#__codelineno-2-424">424</a></span>
<span class="normal"><a href="#__codelineno-2-425">425</a></span>
<span class="normal"><a href="#__codelineno-2-426">426</a></span>
<span class="normal"><a href="#__codelineno-2-427">427</a></span>
<span class="normal"><a href="#__codelineno-2-428">428</a></span>
<span class="normal"><a href="#__codelineno-2-429">429</a></span>
<span class="normal"><a href="#__codelineno-2-430">430</a></span>
<span class="normal"><a href="#__codelineno-2-431">431</a></span>
<span class="normal"><a href="#__codelineno-2-432">432</a></span>
<span class="normal"><a href="#__codelineno-2-433">433</a></span>
<span class="normal"><a href="#__codelineno-2-434">434</a></span>
<span class="normal"><a href="#__codelineno-2-435">435</a></span>
<span class="normal"><a href="#__codelineno-2-436">436</a></span>
<span class="normal"><a href="#__codelineno-2-437">437</a></span>
<span class="normal"><a href="#__codelineno-2-438">438</a></span>
<span class="normal"><a href="#__codelineno-2-439">439</a></span>
<span class="normal"><a href="#__codelineno-2-440">440</a></span>
<span class="normal"><a href="#__codelineno-2-441">441</a></span>
<span class="normal"><a href="#__codelineno-2-442">442</a></span>
<span class="normal"><a href="#__codelineno-2-443">443</a></span>
<span class="normal"><a href="#__codelineno-2-444">444</a></span>
<span class="normal"><a href="#__codelineno-2-445">445</a></span>
<span class="normal"><a href="#__codelineno-2-446">446</a></span>
<span class="normal"><a href="#__codelineno-2-447">447</a></span>
<span class="normal"><a href="#__codelineno-2-448">448</a></span>
<span class="normal"><a href="#__codelineno-2-449">449</a></span>
<span class="normal"><a href="#__codelineno-2-450">450</a></span>
<span class="normal"><a href="#__codelineno-2-451">451</a></span>
<span class="normal"><a href="#__codelineno-2-452">452</a></span>
<span class="normal"><a href="#__codelineno-2-453">453</a></span>
<span class="normal"><a href="#__codelineno-2-454">454</a></span>
<span class="normal"><a href="#__codelineno-2-455">455</a></span>
<span class="normal"><a href="#__codelineno-2-456">456</a></span>
<span class="normal"><a href="#__codelineno-2-457">457</a></span>
<span class="normal"><a href="#__codelineno-2-458">458</a></span>
<span class="normal"><a href="#__codelineno-2-459">459</a></span>
<span class="normal"><a href="#__codelineno-2-460">460</a></span>
<span class="normal"><a href="#__codelineno-2-461">461</a></span>
<span class="normal"><a href="#__codelineno-2-462">462</a></span>
<span class="normal"><a href="#__codelineno-2-463">463</a></span>
<span class="normal"><a href="#__codelineno-2-464">464</a></span>
<span class="normal"><a href="#__codelineno-2-465">465</a></span>
<span class="normal"><a href="#__codelineno-2-466">466</a></span>
<span class="normal"><a href="#__codelineno-2-467">467</a></span>
<span class="normal"><a href="#__codelineno-2-468">468</a></span>
<span class="normal"><a href="#__codelineno-2-469">469</a></span>
<span class="normal"><a href="#__codelineno-2-470">470</a></span>
<span class="normal"><a href="#__codelineno-2-471">471</a></span>
<span class="normal"><a href="#__codelineno-2-472">472</a></span>
<span class="normal"><a href="#__codelineno-2-473">473</a></span>
<span class="normal"><a href="#__codelineno-2-474">474</a></span>
<span class="normal"><a href="#__codelineno-2-475">475</a></span>
<span class="normal"><a href="#__codelineno-2-476">476</a></span>
<span class="normal"><a href="#__codelineno-2-477">477</a></span>
<span class="normal"><a href="#__codelineno-2-478">478</a></span>
<span class="normal"><a href="#__codelineno-2-479">479</a></span>
<span class="normal"><a href="#__codelineno-2-480">480</a></span>
<span class="normal"><a href="#__codelineno-2-481">481</a></span>
<span class="normal"><a href="#__codelineno-2-482">482</a></span>
<span class="normal"><a href="#__codelineno-2-483">483</a></span>
<span class="normal"><a href="#__codelineno-2-484">484</a></span>
<span class="normal"><a href="#__codelineno-2-485">485</a></span>
<span class="normal"><a href="#__codelineno-2-486">486</a></span>
<span class="normal"><a href="#__codelineno-2-487">487</a></span>
<span class="normal"><a href="#__codelineno-2-488">488</a></span>
<span class="normal"><a href="#__codelineno-2-489">489</a></span>
<span class="normal"><a href="#__codelineno-2-490">490</a></span>
<span class="normal"><a href="#__codelineno-2-491">491</a></span>
<span class="normal"><a href="#__codelineno-2-492">492</a></span>
<span class="normal"><a href="#__codelineno-2-493">493</a></span>
<span class="normal"><a href="#__codelineno-2-494">494</a></span>
<span class="normal"><a href="#__codelineno-2-495">495</a></span>
<span class="normal"><a href="#__codelineno-2-496">496</a></span>
<span class="normal"><a href="#__codelineno-2-497">497</a></span>
<span class="normal"><a href="#__codelineno-2-498">498</a></span>
<span class="normal"><a href="#__codelineno-2-499">499</a></span>
<span class="normal"><a href="#__codelineno-2-500">500</a></span>
<span class="normal"><a href="#__codelineno-2-501">501</a></span>
<span class="normal"><a href="#__codelineno-2-502">502</a></span>
<span class="normal"><a href="#__codelineno-2-503">503</a></span>
<span class="normal"><a href="#__codelineno-2-504">504</a></span>
<span class="normal"><a href="#__codelineno-2-505">505</a></span>
<span class="normal"><a href="#__codelineno-2-506">506</a></span>
<span class="normal"><a href="#__codelineno-2-507">507</a></span>
<span class="normal"><a href="#__codelineno-2-508">508</a></span>
<span class="normal"><a href="#__codelineno-2-509">509</a></span>
<span class="normal"><a href="#__codelineno-2-510">510</a></span>
<span class="normal"><a href="#__codelineno-2-511">511</a></span>
<span class="normal"><a href="#__codelineno-2-512">512</a></span>
<span class="normal"><a href="#__codelineno-2-513">513</a></span>
<span class="normal"><a href="#__codelineno-2-514">514</a></span>
<span class="normal"><a href="#__codelineno-2-515">515</a></span>
<span class="normal"><a href="#__codelineno-2-516">516</a></span>
<span class="normal"><a href="#__codelineno-2-517">517</a></span>
<span class="normal"><a href="#__codelineno-2-518">518</a></span>
<span class="normal"><a href="#__codelineno-2-519">519</a></span>
<span class="normal"><a href="#__codelineno-2-520">520</a></span>
<span class="normal"><a href="#__codelineno-2-521">521</a></span>
<span class="normal"><a href="#__codelineno-2-522">522</a></span>
<span class="normal"><a href="#__codelineno-2-523">523</a></span>
<span class="normal"><a href="#__codelineno-2-524">524</a></span>
<span class="normal"><a href="#__codelineno-2-525">525</a></span>
<span class="normal"><a href="#__codelineno-2-526">526</a></span>
<span class="normal"><a href="#__codelineno-2-527">527</a></span>
<span class="normal"><a href="#__codelineno-2-528">528</a></span>
<span class="normal"><a href="#__codelineno-2-529">529</a></span>
<span class="normal"><a href="#__codelineno-2-530">530</a></span>
<span class="normal"><a href="#__codelineno-2-531">531</a></span>
<span class="normal"><a href="#__codelineno-2-532">532</a></span>
<span class="normal"><a href="#__codelineno-2-533">533</a></span>
<span class="normal"><a href="#__codelineno-2-534">534</a></span>
<span class="normal"><a href="#__codelineno-2-535">535</a></span>
<span class="normal"><a href="#__codelineno-2-536">536</a></span>
<span class="normal"><a href="#__codelineno-2-537">537</a></span>
<span class="normal"><a href="#__codelineno-2-538">538</a></span>
<span class="normal"><a href="#__codelineno-2-539">539</a></span>
<span class="normal"><a href="#__codelineno-2-540">540</a></span>
<span class="normal"><a href="#__codelineno-2-541">541</a></span>
<span class="normal"><a href="#__codelineno-2-542">542</a></span>
<span class="normal"><a href="#__codelineno-2-543">543</a></span>
<span class="normal"><a href="#__codelineno-2-544">544</a></span>
<span class="normal"><a href="#__codelineno-2-545">545</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Polygon2</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="p">{</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Polygon2RaycastHit</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">indexA</span><span class="p">;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">indexB</span><span class="p">;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">point</span><span class="p">;</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">angle</span><span class="p">;</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">points</span><span class="p">;</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17"></a>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Rect</span><span class="w"> </span><span class="n">bounds</span><span class="p">;</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19"></a>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Rect</span><span class="w"> </span><span class="n">Bounds</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">        </span><span class="k">get</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bounds</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">default</span><span class="p">)</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">                </span><span class="n">Vector2</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">points</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="w">                </span><span class="n">Vector2</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">points</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28"></a>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">                </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">points</span><span class="p">)</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">min</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">min</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">min</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">min</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">max</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">max</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36"></a>
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="w">                </span><span class="n">bounds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rect</span><span class="p">(</span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">min</span><span class="p">);</span>
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39"></a>
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">bounds</span><span class="p">;</span>
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43"></a>
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Valid</span>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46"></a><span class="w">        </span><span class="k">get</span>
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51"></a>
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Polygon2</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">points</span><span class="p">)</span>
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">points</span><span class="p">;</span>
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55"></a><span class="w">        </span><span class="n">bounds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rect</span><span class="p">();</span>
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57"></a>
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsPointInTriangle</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">pt</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">v2</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">v3</span><span class="p">)</span>
</span><span id="__span-2-59"><a id="__codelineno-2-59" name="__codelineno-2-59"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-60"><a id="__codelineno-2-60" name="__codelineno-2-60"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">d1</span><span class="p">,</span><span class="w"> </span><span class="n">d2</span><span class="p">,</span><span class="w"> </span><span class="n">d3</span><span class="p">;</span>
</span><span id="__span-2-61"><a id="__codelineno-2-61" name="__codelineno-2-61"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">has_neg</span><span class="p">,</span><span class="w"> </span><span class="n">has_pos</span><span class="p">;</span>
</span><span id="__span-2-62"><a id="__codelineno-2-62" name="__codelineno-2-62"></a>
</span><span id="__span-2-63"><a id="__codelineno-2-63" name="__codelineno-2-63"></a><span class="w">        </span><span class="n">d1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EdgeSign</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span>
</span><span id="__span-2-64"><a id="__codelineno-2-64" name="__codelineno-2-64"></a><span class="w">        </span><span class="n">d2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EdgeSign</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">);</span>
</span><span id="__span-2-65"><a id="__codelineno-2-65" name="__codelineno-2-65"></a><span class="w">        </span><span class="n">d3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EdgeSign</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span>
</span><span id="__span-2-66"><a id="__codelineno-2-66" name="__codelineno-2-66"></a>
</span><span id="__span-2-67"><a id="__codelineno-2-67" name="__codelineno-2-67"></a><span class="w">        </span><span class="n">has_neg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">d1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">d2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">d3</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-2-68"><a id="__codelineno-2-68" name="__codelineno-2-68"></a><span class="w">        </span><span class="n">has_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">d1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">d2</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">d3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-2-69"><a id="__codelineno-2-69" name="__codelineno-2-69"></a>
</span><span id="__span-2-70"><a id="__codelineno-2-70" name="__codelineno-2-70"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="n">has_neg</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">has_pos</span><span class="p">);</span>
</span><span id="__span-2-71"><a id="__codelineno-2-71" name="__codelineno-2-71"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-72"><a id="__codelineno-2-72" name="__codelineno-2-72"></a>
</span><span id="__span-2-73"><a id="__codelineno-2-73" name="__codelineno-2-73"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">GetLineIntersection</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">a2</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">b1</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">b2</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="p">)</span>
</span><span id="__span-2-74"><a id="__codelineno-2-74" name="__codelineno-2-74"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-75"><a id="__codelineno-2-75" name="__codelineno-2-75"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-2-76"><a id="__codelineno-2-76" name="__codelineno-2-76"></a>
</span><span id="__span-2-77"><a id="__codelineno-2-77" name="__codelineno-2-77"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tmp</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-78"><a id="__codelineno-2-78" name="__codelineno-2-78"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-79"><a id="__codelineno-2-79" name="__codelineno-2-79"></a><span class="w">            </span><span class="n">intersectionPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-2-80"><a id="__codelineno-2-80" name="__codelineno-2-80"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-2-81"><a id="__codelineno-2-81" name="__codelineno-2-81"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-82"><a id="__codelineno-2-82" name="__codelineno-2-82"></a>
</span><span id="__span-2-83"><a id="__codelineno-2-83" name="__codelineno-2-83"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">mu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">a1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">a1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
</span><span id="__span-2-84"><a id="__codelineno-2-84" name="__codelineno-2-84"></a>
</span><span id="__span-2-85"><a id="__codelineno-2-85" name="__codelineno-2-85"></a><span class="w">        </span><span class="n">intersectionPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mu</span><span class="p">,</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mu</span><span class="p">);;</span>
</span><span id="__span-2-86"><a id="__codelineno-2-86" name="__codelineno-2-86"></a>
</span><span id="__span-2-87"><a id="__codelineno-2-87" name="__codelineno-2-87"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">directionalCheck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Dot</span><span class="p">(</span><span class="n">a2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Dot</span><span class="p">(</span><span class="n">b2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">,</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-88"><a id="__codelineno-2-88" name="__codelineno-2-88"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">distanceCheck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">b1</span><span class="p">,</span><span class="w"> </span><span class="n">b2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">b1</span><span class="p">,</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="p">);</span>
</span><span id="__span-2-89"><a id="__codelineno-2-89" name="__codelineno-2-89"></a>
</span><span id="__span-2-90"><a id="__codelineno-2-90" name="__codelineno-2-90"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">directionalCheck</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">distanceCheck</span><span class="p">;</span>
</span><span id="__span-2-91"><a id="__codelineno-2-91" name="__codelineno-2-91"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-92"><a id="__codelineno-2-92" name="__codelineno-2-92"></a>
</span><span id="__span-2-93"><a id="__codelineno-2-93" name="__codelineno-2-93"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="nf">GetLineIntersection</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">a2</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">b1</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">b2</span><span class="p">)</span>
</span><span id="__span-2-94"><a id="__codelineno-2-94" name="__codelineno-2-94"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-95"><a id="__codelineno-2-95" name="__codelineno-2-95"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-2-96"><a id="__codelineno-2-96" name="__codelineno-2-96"></a>
</span><span id="__span-2-97"><a id="__codelineno-2-97" name="__codelineno-2-97"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tmp</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-98"><a id="__codelineno-2-98" name="__codelineno-2-98"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-99"><a id="__codelineno-2-99" name="__codelineno-2-99"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-2-100"><a id="__codelineno-2-100" name="__codelineno-2-100"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-101"><a id="__codelineno-2-101" name="__codelineno-2-101"></a>
</span><span id="__span-2-102"><a id="__codelineno-2-102" name="__codelineno-2-102"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">mu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">a1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">a1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
</span><span id="__span-2-103"><a id="__codelineno-2-103" name="__codelineno-2-103"></a>
</span><span id="__span-2-104"><a id="__codelineno-2-104" name="__codelineno-2-104"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">Vector2</span><span class="p">(</span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mu</span><span class="p">,</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">b2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mu</span><span class="p">);</span>
</span><span id="__span-2-105"><a id="__codelineno-2-105" name="__codelineno-2-105"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-106"><a id="__codelineno-2-106" name="__codelineno-2-106"></a>
</span><span id="__span-2-107"><a id="__codelineno-2-107" name="__codelineno-2-107"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">GetClosest</span><span class="p">(</span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inVectors</span><span class="p">,</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toVectors</span><span class="p">)</span>
</span><span id="__span-2-108"><a id="__codelineno-2-108" name="__codelineno-2-108"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-109"><a id="__codelineno-2-109" name="__codelineno-2-109"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">toClosest</span><span class="p">;</span>
</span><span id="__span-2-110"><a id="__codelineno-2-110" name="__codelineno-2-110"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">GetClosest</span><span class="p">(</span><span class="n">inVectors</span><span class="p">,</span><span class="w"> </span><span class="n">toVectors</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">toClosest</span><span class="p">);</span>
</span><span id="__span-2-111"><a id="__codelineno-2-111" name="__codelineno-2-111"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-112"><a id="__codelineno-2-112" name="__codelineno-2-112"></a>
</span><span id="__span-2-113"><a id="__codelineno-2-113" name="__codelineno-2-113"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">GetClosest</span><span class="p">(</span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inVectors</span><span class="p">,</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toVectors</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">toClosest</span><span class="p">)</span>
</span><span id="__span-2-114"><a id="__codelineno-2-114" name="__codelineno-2-114"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-115"><a id="__codelineno-2-115" name="__codelineno-2-115"></a><span class="w">        </span><span class="n">toClosest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-116"><a id="__codelineno-2-116" name="__codelineno-2-116"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inVectors</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">toVectors</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-117"><a id="__codelineno-2-117" name="__codelineno-2-117"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-118"><a id="__codelineno-2-118" name="__codelineno-2-118"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-119"><a id="__codelineno-2-119" name="__codelineno-2-119"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-120"><a id="__codelineno-2-120" name="__codelineno-2-120"></a>
</span><span id="__span-2-121"><a id="__codelineno-2-121" name="__codelineno-2-121"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">closest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-122"><a id="__codelineno-2-122" name="__codelineno-2-122"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">closestDistance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">inVectors</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">toVectors</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
</span><span id="__span-2-123"><a id="__codelineno-2-123" name="__codelineno-2-123"></a>
</span><span id="__span-2-124"><a id="__codelineno-2-124" name="__codelineno-2-124"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">inI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">inI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">inVectors</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">inI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-125"><a id="__codelineno-2-125" name="__codelineno-2-125"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-126"><a id="__codelineno-2-126" name="__codelineno-2-126"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">toI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">toI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">toVectors</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">toI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-127"><a id="__codelineno-2-127" name="__codelineno-2-127"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-128"><a id="__codelineno-2-128" name="__codelineno-2-128"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">inVectors</span><span class="p">[</span><span class="n">inI</span><span class="p">],</span><span class="w"> </span><span class="n">toVectors</span><span class="p">[</span><span class="n">toI</span><span class="p">]);</span>
</span><span id="__span-2-129"><a id="__codelineno-2-129" name="__codelineno-2-129"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">distance</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">closestDistance</span><span class="p">)</span>
</span><span id="__span-2-130"><a id="__codelineno-2-130" name="__codelineno-2-130"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-131"><a id="__codelineno-2-131" name="__codelineno-2-131"></a><span class="w">                    </span><span class="n">closest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inI</span><span class="p">;</span>
</span><span id="__span-2-132"><a id="__codelineno-2-132" name="__codelineno-2-132"></a><span class="w">                    </span><span class="n">toClosest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toI</span><span class="p">;</span>
</span><span id="__span-2-133"><a id="__codelineno-2-133" name="__codelineno-2-133"></a><span class="w">                    </span><span class="n">closestDistance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distance</span><span class="p">;</span>
</span><span id="__span-2-134"><a id="__codelineno-2-134" name="__codelineno-2-134"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-135"><a id="__codelineno-2-135" name="__codelineno-2-135"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-136"><a id="__codelineno-2-136" name="__codelineno-2-136"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-137"><a id="__codelineno-2-137" name="__codelineno-2-137"></a>
</span><span id="__span-2-138"><a id="__codelineno-2-138" name="__codelineno-2-138"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">closest</span><span class="p">;</span>
</span><span id="__span-2-139"><a id="__codelineno-2-139" name="__codelineno-2-139"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-140"><a id="__codelineno-2-140" name="__codelineno-2-140"></a>
</span><span id="__span-2-141"><a id="__codelineno-2-141" name="__codelineno-2-141"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">GetFarthest</span><span class="p">(</span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inVectors</span><span class="p">,</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toVectors</span><span class="p">)</span>
</span><span id="__span-2-142"><a id="__codelineno-2-142" name="__codelineno-2-142"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-143"><a id="__codelineno-2-143" name="__codelineno-2-143"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">toFarthest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-144"><a id="__codelineno-2-144" name="__codelineno-2-144"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">GetFarthest</span><span class="p">(</span><span class="n">inVectors</span><span class="p">,</span><span class="w"> </span><span class="n">toVectors</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">toFarthest</span><span class="p">);</span>
</span><span id="__span-2-145"><a id="__codelineno-2-145" name="__codelineno-2-145"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-146"><a id="__codelineno-2-146" name="__codelineno-2-146"></a>
</span><span id="__span-2-147"><a id="__codelineno-2-147" name="__codelineno-2-147"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">GetFarthest</span><span class="p">(</span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inVectors</span><span class="p">,</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toVectors</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">toFarthest</span><span class="p">)</span>
</span><span id="__span-2-148"><a id="__codelineno-2-148" name="__codelineno-2-148"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-149"><a id="__codelineno-2-149" name="__codelineno-2-149"></a><span class="w">        </span><span class="n">toFarthest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-150"><a id="__codelineno-2-150" name="__codelineno-2-150"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inVectors</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">toVectors</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-151"><a id="__codelineno-2-151" name="__codelineno-2-151"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-152"><a id="__codelineno-2-152" name="__codelineno-2-152"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-153"><a id="__codelineno-2-153" name="__codelineno-2-153"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-154"><a id="__codelineno-2-154" name="__codelineno-2-154"></a>
</span><span id="__span-2-155"><a id="__codelineno-2-155" name="__codelineno-2-155"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">farthest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-156"><a id="__codelineno-2-156" name="__codelineno-2-156"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">farthestDistance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">inVectors</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">toVectors</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
</span><span id="__span-2-157"><a id="__codelineno-2-157" name="__codelineno-2-157"></a>
</span><span id="__span-2-158"><a id="__codelineno-2-158" name="__codelineno-2-158"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">inI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">inI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">inVectors</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">inI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-159"><a id="__codelineno-2-159" name="__codelineno-2-159"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-160"><a id="__codelineno-2-160" name="__codelineno-2-160"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">toI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">toI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">toVectors</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">toI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-161"><a id="__codelineno-2-161" name="__codelineno-2-161"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-162"><a id="__codelineno-2-162" name="__codelineno-2-162"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">inVectors</span><span class="p">[</span><span class="n">inI</span><span class="p">],</span><span class="w"> </span><span class="n">toVectors</span><span class="p">[</span><span class="n">toI</span><span class="p">]);</span>
</span><span id="__span-2-163"><a id="__codelineno-2-163" name="__codelineno-2-163"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">distance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">farthestDistance</span><span class="p">)</span>
</span><span id="__span-2-164"><a id="__codelineno-2-164" name="__codelineno-2-164"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-165"><a id="__codelineno-2-165" name="__codelineno-2-165"></a><span class="w">                    </span><span class="n">farthest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inI</span><span class="p">;</span>
</span><span id="__span-2-166"><a id="__codelineno-2-166" name="__codelineno-2-166"></a><span class="w">                    </span><span class="n">toFarthest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toI</span><span class="p">;</span>
</span><span id="__span-2-167"><a id="__codelineno-2-167" name="__codelineno-2-167"></a><span class="w">                    </span><span class="n">farthestDistance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distance</span><span class="p">;</span>
</span><span id="__span-2-168"><a id="__codelineno-2-168" name="__codelineno-2-168"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-169"><a id="__codelineno-2-169" name="__codelineno-2-169"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-170"><a id="__codelineno-2-170" name="__codelineno-2-170"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-171"><a id="__codelineno-2-171" name="__codelineno-2-171"></a>
</span><span id="__span-2-172"><a id="__codelineno-2-172" name="__codelineno-2-172"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">farthest</span><span class="p">;</span>
</span><span id="__span-2-173"><a id="__codelineno-2-173" name="__codelineno-2-173"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-174"><a id="__codelineno-2-174" name="__codelineno-2-174"></a>
</span><span id="__span-2-175"><a id="__codelineno-2-175" name="__codelineno-2-175"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Segmentcast</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="n">debugColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">)</span>
</span><span id="__span-2-176"><a id="__codelineno-2-176" name="__codelineno-2-176"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-177"><a id="__codelineno-2-177" name="__codelineno-2-177"></a><span class="w">        </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-2-178"><a id="__codelineno-2-178" name="__codelineno-2-178"></a>
</span><span id="__span-2-179"><a id="__codelineno-2-179" name="__codelineno-2-179"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pointI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">pointI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">pointI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-180"><a id="__codelineno-2-180" name="__codelineno-2-180"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-181"><a id="__codelineno-2-181" name="__codelineno-2-181"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">pointI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-2-182"><a id="__codelineno-2-182" name="__codelineno-2-182"></a>
</span><span id="__span-2-183"><a id="__codelineno-2-183" name="__codelineno-2-183"></a><span class="w">            </span><span class="n">Vector2</span><span class="w"> </span><span class="n">pointA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">];</span>
</span><span id="__span-2-184"><a id="__codelineno-2-184" name="__codelineno-2-184"></a><span class="w">            </span><span class="n">Vector2</span><span class="w"> </span><span class="n">pointB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">points</span><span class="p">[</span><span class="n">pointBI</span><span class="p">];</span>
</span><span id="__span-2-185"><a id="__codelineno-2-185" name="__codelineno-2-185"></a>
</span><span id="__span-2-186"><a id="__codelineno-2-186" name="__codelineno-2-186"></a><span class="w">            </span><span class="n">Vector2</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="p">;</span>
</span><span id="__span-2-187"><a id="__codelineno-2-187" name="__codelineno-2-187"></a>
</span><span id="__span-2-188"><a id="__codelineno-2-188" name="__codelineno-2-188"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">GetLineIntersection</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">pointA</span><span class="p">,</span><span class="w"> </span><span class="n">pointB</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="p">))</span>
</span><span id="__span-2-189"><a id="__codelineno-2-189" name="__codelineno-2-189"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-190"><a id="__codelineno-2-190" name="__codelineno-2-190"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">currentAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mathf</span><span class="p">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">Dot</span><span class="p">((</span><span class="n">pointB</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pointA</span><span class="p">).</span><span class="n">normalized</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="p">).</span><span class="n">normalized</span><span class="p">));</span>
</span><span id="__span-2-191"><a id="__codelineno-2-191" name="__codelineno-2-191"></a>
</span><span id="__span-2-192"><a id="__codelineno-2-192" name="__codelineno-2-192"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hits</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">intersectionPoint</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">currentAngle</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">hits</span><span class="p">[</span><span class="n">intersectionPoint</span><span class="p">].</span><span class="n">angle</span><span class="p">)</span><span class="w"> </span><span class="c1">// Check for touching points like corners and hole entrances.</span>
</span><span id="__span-2-193"><a id="__codelineno-2-193" name="__codelineno-2-193"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-194"><a id="__codelineno-2-194" name="__codelineno-2-194"></a><span class="w">                    </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-2-195"><a id="__codelineno-2-195" name="__codelineno-2-195"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-196"><a id="__codelineno-2-196" name="__codelineno-2-196"></a>
</span><span id="__span-2-197"><a id="__codelineno-2-197" name="__codelineno-2-197"></a><span class="w">                </span><span class="n">hits</span><span class="p">[</span><span class="n">intersectionPoint</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Polygon2RaycastHit</span><span class="p">()</span>
</span><span id="__span-2-198"><a id="__codelineno-2-198" name="__codelineno-2-198"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-199"><a id="__codelineno-2-199" name="__codelineno-2-199"></a><span class="w">                    </span><span class="n">indexA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointI</span><span class="p">,</span>
</span><span id="__span-2-200"><a id="__codelineno-2-200" name="__codelineno-2-200"></a><span class="w">                    </span><span class="n">indexB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointBI</span><span class="p">,</span>
</span><span id="__span-2-201"><a id="__codelineno-2-201" name="__codelineno-2-201"></a><span class="w">                    </span><span class="n">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">intersectionPoint</span><span class="p">,</span>
</span><span id="__span-2-202"><a id="__codelineno-2-202" name="__codelineno-2-202"></a><span class="w">                    </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentAngle</span>
</span><span id="__span-2-203"><a id="__codelineno-2-203" name="__codelineno-2-203"></a><span class="w">                </span><span class="p">};</span>
</span><span id="__span-2-204"><a id="__codelineno-2-204" name="__codelineno-2-204"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-205"><a id="__codelineno-2-205" name="__codelineno-2-205"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-206"><a id="__codelineno-2-206" name="__codelineno-2-206"></a>
</span><span id="__span-2-207"><a id="__codelineno-2-207" name="__codelineno-2-207"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hitsList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hits</span><span class="p">.</span><span class="n">Values</span><span class="p">);</span>
</span><span id="__span-2-208"><a id="__codelineno-2-208" name="__codelineno-2-208"></a>
</span><span id="__span-2-209"><a id="__codelineno-2-209" name="__codelineno-2-209"></a><span class="w">        </span><span class="n">hitsList</span><span class="p">.</span><span class="n">Sort</span><span class="p">((</span><span class="n">aHit</span><span class="p">,</span><span class="w"> </span><span class="n">bHit</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">aHit</span><span class="p">.</span><span class="n">point</span><span class="p">).</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">bHit</span><span class="p">.</span><span class="n">point</span><span class="p">)));</span>
</span><span id="__span-2-210"><a id="__codelineno-2-210" name="__codelineno-2-210"></a>
</span><span id="__span-2-211"><a id="__codelineno-2-211" name="__codelineno-2-211"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">debugColor</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">default</span><span class="p">)</span>
</span><span id="__span-2-212"><a id="__codelineno-2-212" name="__codelineno-2-212"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-213"><a id="__codelineno-2-213" name="__codelineno-2-213"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Polygon2RaycastHit</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">hitsList</span><span class="p">)</span>
</span><span id="__span-2-214"><a id="__codelineno-2-214" name="__codelineno-2-214"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-215"><a id="__codelineno-2-215" name="__codelineno-2-215"></a><span class="w">                </span><span class="n">TimedDebug</span><span class="p">.</span><span class="n">ArrowSequence</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">hit</span><span class="p">.</span><span class="n">indexA</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">points</span><span class="p">[</span><span class="n">hit</span><span class="p">.</span><span class="n">indexA</span><span class="p">].</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">hit</span><span class="p">.</span><span class="n">indexB</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">points</span><span class="p">[</span><span class="n">hit</span><span class="p">.</span><span class="n">indexB</span><span class="p">].</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">debugColor</span><span class="p">);</span>
</span><span id="__span-2-216"><a id="__codelineno-2-216" name="__codelineno-2-216"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-217"><a id="__codelineno-2-217" name="__codelineno-2-217"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-218"><a id="__codelineno-2-218" name="__codelineno-2-218"></a>
</span><span id="__span-2-219"><a id="__codelineno-2-219" name="__codelineno-2-219"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">hitsList</span><span class="p">;</span>
</span><span id="__span-2-220"><a id="__codelineno-2-220" name="__codelineno-2-220"></a>
</span><span id="__span-2-221"><a id="__codelineno-2-221" name="__codelineno-2-221"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-222"><a id="__codelineno-2-222" name="__codelineno-2-222"></a>
</span><span id="__span-2-223"><a id="__codelineno-2-223" name="__codelineno-2-223"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">PointIsInside</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">point</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">distance</span><span class="p">)</span>
</span><span id="__span-2-224"><a id="__codelineno-2-224" name="__codelineno-2-224"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-225"><a id="__codelineno-2-225" name="__codelineno-2-225"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Segmentcast</span><span class="p">(</span><span class="n">point</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">((</span><span class="n">point</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Bounds</span><span class="p">.</span><span class="n">center</span><span class="p">).</span><span class="n">normalized</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">magnitude</span><span class="p">)),</span><span class="w"> </span><span class="n">point</span><span class="p">);</span>
</span><span id="__span-2-226"><a id="__codelineno-2-226" name="__codelineno-2-226"></a><span class="w">        </span><span class="n">Vector2</span><span class="w"> </span><span class="n">pointOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">((</span><span class="n">point</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Bounds</span><span class="p">.</span><span class="n">center</span><span class="p">).</span><span class="n">normalized</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">magnitude</span><span class="p">));</span>
</span><span id="__span-2-227"><a id="__codelineno-2-227" name="__codelineno-2-227"></a>
</span><span id="__span-2-228"><a id="__codelineno-2-228" name="__codelineno-2-228"></a><span class="w">        </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m">1f</span><span class="p">;</span>
</span><span id="__span-2-229"><a id="__codelineno-2-229" name="__codelineno-2-229"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hits</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-230"><a id="__codelineno-2-230" name="__codelineno-2-230"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-231"><a id="__codelineno-2-231" name="__codelineno-2-231"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">closest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-232"><a id="__codelineno-2-232" name="__codelineno-2-232"></a><span class="w">            </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">);</span>
</span><span id="__span-2-233"><a id="__codelineno-2-233" name="__codelineno-2-233"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">hitI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">hitI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">hitI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-234"><a id="__codelineno-2-234" name="__codelineno-2-234"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-235"><a id="__codelineno-2-235" name="__codelineno-2-235"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">currentDistance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">);</span>
</span><span id="__span-2-236"><a id="__codelineno-2-236" name="__codelineno-2-236"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentDistance</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">distance</span><span class="p">)</span>
</span><span id="__span-2-237"><a id="__codelineno-2-237" name="__codelineno-2-237"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-238"><a id="__codelineno-2-238" name="__codelineno-2-238"></a><span class="w">                    </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentDistance</span><span class="p">;</span>
</span><span id="__span-2-239"><a id="__codelineno-2-239" name="__codelineno-2-239"></a><span class="w">                    </span><span class="n">closest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitI</span><span class="p">;</span>
</span><span id="__span-2-240"><a id="__codelineno-2-240" name="__codelineno-2-240"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-241"><a id="__codelineno-2-241" name="__codelineno-2-241"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-242"><a id="__codelineno-2-242" name="__codelineno-2-242"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-243"><a id="__codelineno-2-243" name="__codelineno-2-243"></a>
</span><span id="__span-2-244"><a id="__codelineno-2-244" name="__codelineno-2-244"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-245"><a id="__codelineno-2-245" name="__codelineno-2-245"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-246"><a id="__codelineno-2-246" name="__codelineno-2-246"></a>
</span><span id="__span-2-247"><a id="__codelineno-2-247" name="__codelineno-2-247"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">PointIsInside</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">point</span><span class="p">)</span>
</span><span id="__span-2-248"><a id="__codelineno-2-248" name="__codelineno-2-248"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-249"><a id="__codelineno-2-249" name="__codelineno-2-249"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">PointIsInside</span><span class="p">(</span><span class="n">point</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">distance</span><span class="p">);</span>
</span><span id="__span-2-250"><a id="__codelineno-2-250" name="__codelineno-2-250"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-251"><a id="__codelineno-2-251" name="__codelineno-2-251"></a>
</span><span id="__span-2-252"><a id="__codelineno-2-252" name="__codelineno-2-252"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ShatterConnections</span><span class="p">(</span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">connections</span><span class="p">)</span>
</span><span id="__span-2-253"><a id="__codelineno-2-253" name="__codelineno-2-253"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-254"><a id="__codelineno-2-254" name="__codelineno-2-254"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">polygons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-2-255"><a id="__codelineno-2-255" name="__codelineno-2-255"></a>
</span><span id="__span-2-256"><a id="__codelineno-2-256" name="__codelineno-2-256"></a><span class="w">        </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">currentPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Polygon2</span><span class="p">();</span>
</span><span id="__span-2-257"><a id="__codelineno-2-257" name="__codelineno-2-257"></a><span class="w">        </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-2-258"><a id="__codelineno-2-258" name="__codelineno-2-258"></a>
</span><span id="__span-2-259"><a id="__codelineno-2-259" name="__codelineno-2-259"></a><span class="w">        </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">iteratedConnections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="p">();</span>
</span><span id="__span-2-260"><a id="__codelineno-2-260" name="__codelineno-2-260"></a>
</span><span id="__span-2-261"><a id="__codelineno-2-261" name="__codelineno-2-261"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">possibleConnectionA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Enumerable</span><span class="p">.</span><span class="n">ToList</span><span class="p">(</span><span class="n">connections</span><span class="p">.</span><span class="n">Keys</span><span class="p">);</span>
</span><span id="__span-2-262"><a id="__codelineno-2-262" name="__codelineno-2-262"></a>
</span><span id="__span-2-263"><a id="__codelineno-2-263" name="__codelineno-2-263"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">foundAnotherLead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-2-264"><a id="__codelineno-2-264" name="__codelineno-2-264"></a><span class="w">        </span><span class="n">Vector2</span><span class="w"> </span><span class="n">leadA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">possibleConnectionA</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-2-265"><a id="__codelineno-2-265" name="__codelineno-2-265"></a>
</span><span id="__span-2-266"><a id="__codelineno-2-266" name="__codelineno-2-266"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">possibleConnectionB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Enumerable</span><span class="p">.</span><span class="n">ToList</span><span class="p">(</span><span class="n">connections</span><span class="p">[</span><span class="n">leadA</span><span class="p">]);</span>
</span><span id="__span-2-267"><a id="__codelineno-2-267" name="__codelineno-2-267"></a><span class="w">        </span><span class="n">Vector2</span><span class="w"> </span><span class="n">leadB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">possibleConnectionB</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-2-268"><a id="__codelineno-2-268" name="__codelineno-2-268"></a>
</span><span id="__span-2-269"><a id="__codelineno-2-269" name="__codelineno-2-269"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">foundAnotherLead</span><span class="p">)</span>
</span><span id="__span-2-270"><a id="__codelineno-2-270" name="__codelineno-2-270"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-271"><a id="__codelineno-2-271" name="__codelineno-2-271"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">iteratedConnections</span><span class="p">.</span><span class="n">TryAdd</span><span class="p">(</span><span class="n">leadA</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">iteratedConnections</span><span class="p">[</span><span class="n">leadA</span><span class="p">].</span><span class="n">Contains</span><span class="p">(</span><span class="n">leadB</span><span class="p">))</span>
</span><span id="__span-2-272"><a id="__codelineno-2-272" name="__codelineno-2-272"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-273"><a id="__codelineno-2-273" name="__codelineno-2-273"></a><span class="w">                </span><span class="n">iteratedConnections</span><span class="p">[</span><span class="n">leadA</span><span class="p">].</span><span class="n">Add</span><span class="p">(</span><span class="n">leadB</span><span class="p">);</span>
</span><span id="__span-2-274"><a id="__codelineno-2-274" name="__codelineno-2-274"></a>
</span><span id="__span-2-275"><a id="__codelineno-2-275" name="__codelineno-2-275"></a><span class="w">                </span><span class="c1">// First, find the sharpest angle.</span>
</span><span id="__span-2-276"><a id="__codelineno-2-276" name="__codelineno-2-276"></a>
</span><span id="__span-2-277"><a id="__codelineno-2-277" name="__codelineno-2-277"></a><span class="w">                </span><span class="n">Vector2</span><span class="w"> </span><span class="n">greatestAngleTarget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">leadB</span><span class="p">;</span>
</span><span id="__span-2-278"><a id="__codelineno-2-278" name="__codelineno-2-278"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">greatestAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m">181f</span><span class="p">;</span>
</span><span id="__span-2-279"><a id="__codelineno-2-279" name="__codelineno-2-279"></a>
</span><span id="__span-2-280"><a id="__codelineno-2-280" name="__codelineno-2-280"></a><span class="w">                </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">nextSegment</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">connections</span><span class="p">[</span><span class="n">leadB</span><span class="p">])</span>
</span><span id="__span-2-281"><a id="__codelineno-2-281" name="__codelineno-2-281"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-282"><a id="__codelineno-2-282" name="__codelineno-2-282"></a><span class="w">                    </span><span class="kt">float</span><span class="w"> </span><span class="n">currentAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">SignedAngle</span><span class="p">(</span><span class="n">leadB</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">leadA</span><span class="p">,</span><span class="w"> </span><span class="n">nextSegment</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">leadB</span><span class="p">);</span>
</span><span id="__span-2-283"><a id="__codelineno-2-283" name="__codelineno-2-283"></a>
</span><span id="__span-2-284"><a id="__codelineno-2-284" name="__codelineno-2-284"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentAngle</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">greatestAngle</span><span class="p">)</span>
</span><span id="__span-2-285"><a id="__codelineno-2-285" name="__codelineno-2-285"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-2-286"><a id="__codelineno-2-286" name="__codelineno-2-286"></a><span class="w">                        </span><span class="n">greatestAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentAngle</span><span class="p">;</span>
</span><span id="__span-2-287"><a id="__codelineno-2-287" name="__codelineno-2-287"></a><span class="w">                        </span><span class="n">greatestAngleTarget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nextSegment</span><span class="p">;</span>
</span><span id="__span-2-288"><a id="__codelineno-2-288" name="__codelineno-2-288"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-2-289"><a id="__codelineno-2-289" name="__codelineno-2-289"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-290"><a id="__codelineno-2-290" name="__codelineno-2-290"></a>
</span><span id="__span-2-291"><a id="__codelineno-2-291" name="__codelineno-2-291"></a><span class="w">                </span><span class="c1">// Then, iterate to that angle.</span>
</span><span id="__span-2-292"><a id="__codelineno-2-292" name="__codelineno-2-292"></a>
</span><span id="__span-2-293"><a id="__codelineno-2-293" name="__codelineno-2-293"></a><span class="w">                </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">leadA</span><span class="p">);</span>
</span><span id="__span-2-294"><a id="__codelineno-2-294" name="__codelineno-2-294"></a>
</span><span id="__span-2-295"><a id="__codelineno-2-295" name="__codelineno-2-295"></a><span class="w">                </span><span class="n">leadA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">leadB</span><span class="p">;</span>
</span><span id="__span-2-296"><a id="__codelineno-2-296" name="__codelineno-2-296"></a><span class="w">                </span><span class="n">leadB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">greatestAngleTarget</span><span class="p">;</span>
</span><span id="__span-2-297"><a id="__codelineno-2-297" name="__codelineno-2-297"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-298"><a id="__codelineno-2-298" name="__codelineno-2-298"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="c1">// Otherwise, look through all possible direction combinations to find any that haven't been added yet.</span>
</span><span id="__span-2-299"><a id="__codelineno-2-299" name="__codelineno-2-299"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-300"><a id="__codelineno-2-300" name="__codelineno-2-300"></a><span class="w">                </span><span class="n">polygons</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">currentPolygon</span><span class="p">);</span>
</span><span id="__span-2-301"><a id="__codelineno-2-301" name="__codelineno-2-301"></a><span class="w">                </span><span class="n">currentPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Polygon2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-2-302"><a id="__codelineno-2-302" name="__codelineno-2-302"></a>
</span><span id="__span-2-303"><a id="__codelineno-2-303" name="__codelineno-2-303"></a><span class="w">                </span><span class="n">foundAnotherLead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-2-304"><a id="__codelineno-2-304" name="__codelineno-2-304"></a>
</span><span id="__span-2-305"><a id="__codelineno-2-305" name="__codelineno-2-305"></a><span class="w">                </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">conA</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">connections</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
</span><span id="__span-2-306"><a id="__codelineno-2-306" name="__codelineno-2-306"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-307"><a id="__codelineno-2-307" name="__codelineno-2-307"></a><span class="w">                    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">conB</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">connections</span><span class="p">[</span><span class="n">conA</span><span class="p">])</span>
</span><span id="__span-2-308"><a id="__codelineno-2-308" name="__codelineno-2-308"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-2-309"><a id="__codelineno-2-309" name="__codelineno-2-309"></a><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">iteratedConnections</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">conA</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">iteratedConnections</span><span class="p">[</span><span class="n">conA</span><span class="p">].</span><span class="n">Contains</span><span class="p">(</span><span class="n">conB</span><span class="p">))</span>
</span><span id="__span-2-310"><a id="__codelineno-2-310" name="__codelineno-2-310"></a><span class="w">                        </span><span class="p">{</span>
</span><span id="__span-2-311"><a id="__codelineno-2-311" name="__codelineno-2-311"></a><span class="w">                            </span><span class="n">leadA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conA</span><span class="p">;</span>
</span><span id="__span-2-312"><a id="__codelineno-2-312" name="__codelineno-2-312"></a><span class="w">                            </span><span class="n">leadB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conB</span><span class="p">;</span>
</span><span id="__span-2-313"><a id="__codelineno-2-313" name="__codelineno-2-313"></a>
</span><span id="__span-2-314"><a id="__codelineno-2-314" name="__codelineno-2-314"></a><span class="w">                            </span><span class="n">foundAnotherLead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-2-315"><a id="__codelineno-2-315" name="__codelineno-2-315"></a><span class="w">                            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-316"><a id="__codelineno-2-316" name="__codelineno-2-316"></a><span class="w">                        </span><span class="p">}</span>
</span><span id="__span-2-317"><a id="__codelineno-2-317" name="__codelineno-2-317"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-2-318"><a id="__codelineno-2-318" name="__codelineno-2-318"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foundAnotherLead</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-319"><a id="__codelineno-2-319" name="__codelineno-2-319"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-320"><a id="__codelineno-2-320" name="__codelineno-2-320"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-321"><a id="__codelineno-2-321" name="__codelineno-2-321"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-322"><a id="__codelineno-2-322" name="__codelineno-2-322"></a>
</span><span id="__span-2-323"><a id="__codelineno-2-323" name="__codelineno-2-323"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">polygons</span><span class="p">;</span>
</span><span id="__span-2-324"><a id="__codelineno-2-324" name="__codelineno-2-324"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-325"><a id="__codelineno-2-325" name="__codelineno-2-325"></a>
</span><span id="__span-2-326"><a id="__codelineno-2-326" name="__codelineno-2-326"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Polygon2</span><span class="w"> </span><span class="nf">CutHole</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">what</span><span class="p">,</span><span class="w"> </span><span class="k">ref</span><span class="w"> </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">intoWhat</span><span class="p">)</span>
</span><span id="__span-2-327"><a id="__codelineno-2-327" name="__codelineno-2-327"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-328"><a id="__codelineno-2-328" name="__codelineno-2-328"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">whatClosestI</span><span class="p">;</span>
</span><span id="__span-2-329"><a id="__codelineno-2-329" name="__codelineno-2-329"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">intoWhatClosestI</span><span class="p">;</span>
</span><span id="__span-2-330"><a id="__codelineno-2-330" name="__codelineno-2-330"></a>
</span><span id="__span-2-331"><a id="__codelineno-2-331" name="__codelineno-2-331"></a><span class="w">        </span><span class="n">whatClosestI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetClosest</span><span class="p">(</span><span class="n">what</span><span class="p">.</span><span class="n">points</span><span class="p">,</span><span class="w"> </span><span class="n">intoWhat</span><span class="p">.</span><span class="n">points</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">intoWhatClosestI</span><span class="p">);</span>
</span><span id="__span-2-332"><a id="__codelineno-2-332" name="__codelineno-2-332"></a>
</span><span id="__span-2-333"><a id="__codelineno-2-333" name="__codelineno-2-333"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inserts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-2-334"><a id="__codelineno-2-334" name="__codelineno-2-334"></a>
</span><span id="__span-2-335"><a id="__codelineno-2-335" name="__codelineno-2-335"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">whatI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">whatI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">what</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">whatI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-336"><a id="__codelineno-2-336" name="__codelineno-2-336"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-337"><a id="__codelineno-2-337" name="__codelineno-2-337"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">reverseI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="n">whatI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">whatClosestI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">what</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">what</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-2-338"><a id="__codelineno-2-338" name="__codelineno-2-338"></a><span class="w">            </span><span class="n">inserts</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">what</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">reverseI</span><span class="p">]);</span>
</span><span id="__span-2-339"><a id="__codelineno-2-339" name="__codelineno-2-339"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-340"><a id="__codelineno-2-340" name="__codelineno-2-340"></a>
</span><span id="__span-2-341"><a id="__codelineno-2-341" name="__codelineno-2-341"></a><span class="w">        </span><span class="n">inserts</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">what</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">whatClosestI</span><span class="p">]);</span>
</span><span id="__span-2-342"><a id="__codelineno-2-342" name="__codelineno-2-342"></a><span class="w">        </span><span class="n">inserts</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">intoWhat</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">intoWhatClosestI</span><span class="p">]);</span>
</span><span id="__span-2-343"><a id="__codelineno-2-343" name="__codelineno-2-343"></a>
</span><span id="__span-2-344"><a id="__codelineno-2-344" name="__codelineno-2-344"></a><span class="w">        </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">polygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Polygon2</span><span class="p">(</span><span class="n">intoWhat</span><span class="p">.</span><span class="n">points</span><span class="p">);</span>
</span><span id="__span-2-345"><a id="__codelineno-2-345" name="__codelineno-2-345"></a><span class="w">        </span><span class="n">polygon</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">InsertRange</span><span class="p">(</span><span class="n">intoWhatClosestI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">inserts</span><span class="p">);</span>
</span><span id="__span-2-346"><a id="__codelineno-2-346" name="__codelineno-2-346"></a>
</span><span id="__span-2-347"><a id="__codelineno-2-347" name="__codelineno-2-347"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">polygon</span><span class="p">;</span>
</span><span id="__span-2-348"><a id="__codelineno-2-348" name="__codelineno-2-348"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-349"><a id="__codelineno-2-349" name="__codelineno-2-349"></a>
</span><span id="__span-2-350"><a id="__codelineno-2-350" name="__codelineno-2-350"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">OverlapBounds</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">above</span><span class="p">,</span><span class="w"> </span><span class="k">ref</span><span class="w"> </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">below</span><span class="p">)</span>
</span><span id="__span-2-351"><a id="__codelineno-2-351" name="__codelineno-2-351"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-352"><a id="__codelineno-2-352" name="__codelineno-2-352"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">pointAI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-353"><a id="__codelineno-2-353" name="__codelineno-2-353"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-354"><a id="__codelineno-2-354" name="__codelineno-2-354"></a>
</span><span id="__span-2-355"><a id="__codelineno-2-355" name="__codelineno-2-355"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">belowOutside</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-356"><a id="__codelineno-2-356" name="__codelineno-2-356"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">aboveOutside</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-357"><a id="__codelineno-2-357" name="__codelineno-2-357"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">containsIntersections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-2-358"><a id="__codelineno-2-358" name="__codelineno-2-358"></a>
</span><span id="__span-2-359"><a id="__codelineno-2-359" name="__codelineno-2-359"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pointI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">pointI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">above</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">pointI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-360"><a id="__codelineno-2-360" name="__codelineno-2-360"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-361"><a id="__codelineno-2-361" name="__codelineno-2-361"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">below</span><span class="p">.</span><span class="n">PointIsInside</span><span class="p">(</span><span class="n">above</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">]))</span>
</span><span id="__span-2-362"><a id="__codelineno-2-362" name="__codelineno-2-362"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-363"><a id="__codelineno-2-363" name="__codelineno-2-363"></a><span class="w">                </span><span class="n">aboveOutside</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-2-364"><a id="__codelineno-2-364" name="__codelineno-2-364"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-365"><a id="__codelineno-2-365" name="__codelineno-2-365"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-366"><a id="__codelineno-2-366" name="__codelineno-2-366"></a>
</span><span id="__span-2-367"><a id="__codelineno-2-367" name="__codelineno-2-367"></a><span class="w">        </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">leads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">();</span>
</span><span id="__span-2-368"><a id="__codelineno-2-368" name="__codelineno-2-368"></a>
</span><span id="__span-2-369"><a id="__codelineno-2-369" name="__codelineno-2-369"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pointI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">pointI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">pointI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-370"><a id="__codelineno-2-370" name="__codelineno-2-370"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-371"><a id="__codelineno-2-371" name="__codelineno-2-371"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">modOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-2-372"><a id="__codelineno-2-372" name="__codelineno-2-372"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">pointTempBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">pointI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-2-373"><a id="__codelineno-2-373" name="__codelineno-2-373"></a>
</span><span id="__span-2-374"><a id="__codelineno-2-374" name="__codelineno-2-374"></a><span class="w">            </span><span class="kt">bool</span><span class="w"> </span><span class="n">insideAbove</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">above</span><span class="p">.</span><span class="n">PointIsInside</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">],</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">distance</span><span class="p">);</span>
</span><span id="__span-2-375"><a id="__codelineno-2-375" name="__codelineno-2-375"></a>
</span><span id="__span-2-376"><a id="__codelineno-2-376" name="__codelineno-2-376"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">insideAbove</span><span class="p">)</span>
</span><span id="__span-2-377"><a id="__codelineno-2-377" name="__codelineno-2-377"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-378"><a id="__codelineno-2-378" name="__codelineno-2-378"></a><span class="w">                </span><span class="n">belowOutside</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-2-379"><a id="__codelineno-2-379" name="__codelineno-2-379"></a>
</span><span id="__span-2-380"><a id="__codelineno-2-380" name="__codelineno-2-380"></a><span class="w">                </span><span class="n">pointAI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointI</span><span class="p">;</span>
</span><span id="__span-2-381"><a id="__codelineno-2-381" name="__codelineno-2-381"></a><span class="w">                </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointTempBI</span><span class="p">;</span>
</span><span id="__span-2-382"><a id="__codelineno-2-382" name="__codelineno-2-382"></a>
</span><span id="__span-2-383"><a id="__codelineno-2-383" name="__codelineno-2-383"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">leads</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">]))</span>
</span><span id="__span-2-384"><a id="__codelineno-2-384" name="__codelineno-2-384"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-385"><a id="__codelineno-2-385" name="__codelineno-2-385"></a><span class="w">                    </span><span class="n">leads</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">],</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">());</span>
</span><span id="__span-2-386"><a id="__codelineno-2-386" name="__codelineno-2-386"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-387"><a id="__codelineno-2-387" name="__codelineno-2-387"></a><span class="w">                </span><span class="n">leads</span><span class="p">[</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">]].</span><span class="n">Add</span><span class="p">(</span><span class="n">pointI</span><span class="p">);</span>
</span><span id="__span-2-388"><a id="__codelineno-2-388" name="__codelineno-2-388"></a>
</span><span id="__span-2-389"><a id="__codelineno-2-389" name="__codelineno-2-389"></a><span class="w">                </span><span class="n">Debug</span><span class="p">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">].</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">1.3f</span><span class="p">,</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">].</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="m">0.1f</span><span class="p">,</span><span class="w"> </span><span class="m">0.1f</span><span class="p">),</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">0f</span><span class="p">),</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="m">20000f</span><span class="p">);</span>
</span><span id="__span-2-390"><a id="__codelineno-2-390" name="__codelineno-2-390"></a>
</span><span id="__span-2-391"><a id="__codelineno-2-391" name="__codelineno-2-391"></a><span class="w">                </span><span class="n">modOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-2-392"><a id="__codelineno-2-392" name="__codelineno-2-392"></a>
</span><span id="__span-2-393"><a id="__codelineno-2-393" name="__codelineno-2-393"></a><span class="w">                </span><span class="c1">//break;</span>
</span><span id="__span-2-394"><a id="__codelineno-2-394" name="__codelineno-2-394"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-395"><a id="__codelineno-2-395" name="__codelineno-2-395"></a>
</span><span id="__span-2-396"><a id="__codelineno-2-396" name="__codelineno-2-396"></a><span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">above</span><span class="p">.</span><span class="n">Segmentcast</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointI</span><span class="p">],</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointTempBI</span><span class="p">]);</span>
</span><span id="__span-2-397"><a id="__codelineno-2-397" name="__codelineno-2-397"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">hitI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">hitI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">hitI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-398"><a id="__codelineno-2-398" name="__codelineno-2-398"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-399"><a id="__codelineno-2-399" name="__codelineno-2-399"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointAI</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointBI</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-400"><a id="__codelineno-2-400" name="__codelineno-2-400"></a>
</span><span id="__span-2-401"><a id="__codelineno-2-401" name="__codelineno-2-401"></a><span class="w">                </span><span class="n">containsIntersections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-2-402"><a id="__codelineno-2-402" name="__codelineno-2-402"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">hitI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">modOffset</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-403"><a id="__codelineno-2-403" name="__codelineno-2-403"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-404"><a id="__codelineno-2-404" name="__codelineno-2-404"></a><span class="w">                    </span><span class="n">Debug</span><span class="p">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">1.3f</span><span class="p">,</span><span class="w"> </span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="m">0.1f</span><span class="p">,</span><span class="w"> </span><span class="m">0.1f</span><span class="p">),</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">0f</span><span class="p">),</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="m">20000f</span><span class="p">);</span>
</span><span id="__span-2-405"><a id="__codelineno-2-405" name="__codelineno-2-405"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">leads</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">))</span>
</span><span id="__span-2-406"><a id="__codelineno-2-406" name="__codelineno-2-406"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-2-407"><a id="__codelineno-2-407" name="__codelineno-2-407"></a><span class="w">                        </span><span class="n">leads</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">());</span>
</span><span id="__span-2-408"><a id="__codelineno-2-408" name="__codelineno-2-408"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-2-409"><a id="__codelineno-2-409" name="__codelineno-2-409"></a><span class="w">                    </span><span class="n">leads</span><span class="p">[</span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">].</span><span class="n">point</span><span class="p">].</span><span class="n">Add</span><span class="p">(</span><span class="n">pointI</span><span class="p">);</span>
</span><span id="__span-2-410"><a id="__codelineno-2-410" name="__codelineno-2-410"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-411"><a id="__codelineno-2-411" name="__codelineno-2-411"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-412"><a id="__codelineno-2-412" name="__codelineno-2-412"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-413"><a id="__codelineno-2-413" name="__codelineno-2-413"></a>
</span><span id="__span-2-414"><a id="__codelineno-2-414" name="__codelineno-2-414"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">belowOutside</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-415"><a id="__codelineno-2-415" name="__codelineno-2-415"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-416"><a id="__codelineno-2-416" name="__codelineno-2-416"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Polygon2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-2-417"><a id="__codelineno-2-417" name="__codelineno-2-417"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-418"><a id="__codelineno-2-418" name="__codelineno-2-418"></a>
</span><span id="__span-2-419"><a id="__codelineno-2-419" name="__codelineno-2-419"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">belowOutside</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">containsIntersections</span><span class="p">)</span>
</span><span id="__span-2-420"><a id="__codelineno-2-420" name="__codelineno-2-420"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-421"><a id="__codelineno-2-421" name="__codelineno-2-421"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aboveOutside</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</span><span id="__span-2-422"><a id="__codelineno-2-422" name="__codelineno-2-422"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-423"><a id="__codelineno-2-423" name="__codelineno-2-423"></a><span class="w">                </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">"All above points are inside. Cutting hole in below."</span><span class="p">);</span>
</span><span id="__span-2-424"><a id="__codelineno-2-424" name="__codelineno-2-424"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">CutHole</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">above</span><span class="p">,</span><span class="w"> </span><span class="k">ref</span><span class="w"> </span><span class="n">below</span><span class="p">)</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-2-425"><a id="__codelineno-2-425" name="__codelineno-2-425"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-426"><a id="__codelineno-2-426" name="__codelineno-2-426"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">aboveOutside</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">above</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span>
</span><span id="__span-2-427"><a id="__codelineno-2-427" name="__codelineno-2-427"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-428"><a id="__codelineno-2-428" name="__codelineno-2-428"></a><span class="w">                </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">"Shapes are separated. No operations are needed."</span><span class="p">);</span>
</span><span id="__span-2-429"><a id="__codelineno-2-429" name="__codelineno-2-429"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
</span><span id="__span-2-430"><a id="__codelineno-2-430" name="__codelineno-2-430"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-431"><a id="__codelineno-2-431" name="__codelineno-2-431"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-432"><a id="__codelineno-2-432" name="__codelineno-2-432"></a>
</span><span id="__span-2-433"><a id="__codelineno-2-433" name="__codelineno-2-433"></a><span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">"Complex shape detected, beggining boolean process."</span><span class="p">);</span>
</span><span id="__span-2-434"><a id="__codelineno-2-434" name="__codelineno-2-434"></a>
</span><span id="__span-2-435"><a id="__codelineno-2-435" name="__codelineno-2-435"></a><span class="w">        </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">currentPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">below</span><span class="p">;</span>
</span><span id="__span-2-436"><a id="__codelineno-2-436" name="__codelineno-2-436"></a><span class="w">        </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">otherPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">above</span><span class="p">;</span>
</span><span id="__span-2-437"><a id="__codelineno-2-437" name="__codelineno-2-437"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-2-438"><a id="__codelineno-2-438" name="__codelineno-2-438"></a><span class="w">        </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">iteratedSegments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="p">();</span>
</span><span id="__span-2-439"><a id="__codelineno-2-439" name="__codelineno-2-439"></a><span class="w">        </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">shapeSegments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="p">,</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;&gt;</span><span class="p">();</span>
</span><span id="__span-2-440"><a id="__codelineno-2-440" name="__codelineno-2-440"></a>
</span><span id="__span-2-441"><a id="__codelineno-2-441" name="__codelineno-2-441"></a><span class="w">        </span><span class="n">Vector2</span><span class="w"> </span><span class="n">pointA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointAI</span><span class="p">];</span>
</span><span id="__span-2-442"><a id="__codelineno-2-442" name="__codelineno-2-442"></a><span class="w">        </span><span class="n">Vector2</span><span class="w"> </span><span class="n">pointB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointBI</span><span class="p">];</span>
</span><span id="__span-2-443"><a id="__codelineno-2-443" name="__codelineno-2-443"></a>
</span><span id="__span-2-444"><a id="__codelineno-2-444" name="__codelineno-2-444"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
</span><span id="__span-2-445"><a id="__codelineno-2-445" name="__codelineno-2-445"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-446"><a id="__codelineno-2-446" name="__codelineno-2-446"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">iteratedSegments</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">pointA</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">iteratedSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">].</span><span class="n">Contains</span><span class="p">(</span><span class="n">pointB</span><span class="p">))</span>
</span><span id="__span-2-447"><a id="__codelineno-2-447" name="__codelineno-2-447"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-448"><a id="__codelineno-2-448" name="__codelineno-2-448"></a><span class="w">                </span><span class="kt">bool</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-2-449"><a id="__codelineno-2-449" name="__codelineno-2-449"></a><span class="w">                </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">leads</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
</span><span id="__span-2-450"><a id="__codelineno-2-450" name="__codelineno-2-450"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-451"><a id="__codelineno-2-451" name="__codelineno-2-451"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">leads</span><span class="p">[</span><span class="n">point</span><span class="p">].</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-452"><a id="__codelineno-2-452" name="__codelineno-2-452"></a>
</span><span id="__span-2-453"><a id="__codelineno-2-453" name="__codelineno-2-453"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">iteratedSegments</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">point</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">iteratedSegments</span><span class="p">[</span><span class="n">point</span><span class="p">].</span><span class="n">Contains</span><span class="p">(</span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[(</span><span class="n">leads</span><span class="p">[</span><span class="n">point</span><span class="p">][</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">]))</span>
</span><span id="__span-2-454"><a id="__codelineno-2-454" name="__codelineno-2-454"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-2-455"><a id="__codelineno-2-455" name="__codelineno-2-455"></a><span class="w">                        </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-2-456"><a id="__codelineno-2-456" name="__codelineno-2-456"></a>
</span><span id="__span-2-457"><a id="__codelineno-2-457" name="__codelineno-2-457"></a><span class="w">                        </span><span class="n">pointAI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">leads</span><span class="p">[</span><span class="n">point</span><span class="p">][</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-2-458"><a id="__codelineno-2-458" name="__codelineno-2-458"></a><span class="w">                        </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">leads</span><span class="p">[</span><span class="n">point</span><span class="p">][</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-2-459"><a id="__codelineno-2-459" name="__codelineno-2-459"></a>
</span><span id="__span-2-460"><a id="__codelineno-2-460" name="__codelineno-2-460"></a><span class="w">                        </span><span class="n">pointA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="p">;</span>
</span><span id="__span-2-461"><a id="__codelineno-2-461" name="__codelineno-2-461"></a><span class="w">                        </span><span class="n">pointB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointBI</span><span class="p">];</span>
</span><span id="__span-2-462"><a id="__codelineno-2-462" name="__codelineno-2-462"></a>
</span><span id="__span-2-463"><a id="__codelineno-2-463" name="__codelineno-2-463"></a><span class="w">                        </span><span class="n">currentPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">below</span><span class="p">;</span>
</span><span id="__span-2-464"><a id="__codelineno-2-464" name="__codelineno-2-464"></a><span class="w">                        </span><span class="n">otherPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">above</span><span class="p">;</span>
</span><span id="__span-2-465"><a id="__codelineno-2-465" name="__codelineno-2-465"></a>
</span><span id="__span-2-466"><a id="__codelineno-2-466" name="__codelineno-2-466"></a><span class="w">                        </span><span class="n">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-2-467"><a id="__codelineno-2-467" name="__codelineno-2-467"></a>
</span><span id="__span-2-468"><a id="__codelineno-2-468" name="__codelineno-2-468"></a><span class="w">                        </span><span class="n">leads</span><span class="p">[</span><span class="n">point</span><span class="p">].</span><span class="n">RemoveAt</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-2-469"><a id="__codelineno-2-469" name="__codelineno-2-469"></a>
</span><span id="__span-2-470"><a id="__codelineno-2-470" name="__codelineno-2-470"></a><span class="w">                        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-471"><a id="__codelineno-2-471" name="__codelineno-2-471"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-2-472"><a id="__codelineno-2-472" name="__codelineno-2-472"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-473"><a id="__codelineno-2-473" name="__codelineno-2-473"></a>
</span><span id="__span-2-474"><a id="__codelineno-2-474" name="__codelineno-2-474"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-475"><a id="__codelineno-2-475" name="__codelineno-2-475"></a>
</span><span id="__span-2-476"><a id="__codelineno-2-476" name="__codelineno-2-476"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-477"><a id="__codelineno-2-477" name="__codelineno-2-477"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-478"><a id="__codelineno-2-478" name="__codelineno-2-478"></a>
</span><span id="__span-2-479"><a id="__codelineno-2-479" name="__codelineno-2-479"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">iteratedSegments</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">pointA</span><span class="p">))</span>
</span><span id="__span-2-480"><a id="__codelineno-2-480" name="__codelineno-2-480"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-481"><a id="__codelineno-2-481" name="__codelineno-2-481"></a><span class="w">                </span><span class="n">iteratedSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-2-482"><a id="__codelineno-2-482" name="__codelineno-2-482"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-483"><a id="__codelineno-2-483" name="__codelineno-2-483"></a><span class="w">            </span><span class="n">iteratedSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">].</span><span class="n">Add</span><span class="p">(</span><span class="n">pointB</span><span class="p">);</span>
</span><span id="__span-2-484"><a id="__codelineno-2-484" name="__codelineno-2-484"></a>
</span><span id="__span-2-485"><a id="__codelineno-2-485" name="__codelineno-2-485"></a><span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Polygon2RaycastHit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">otherPolygon</span><span class="p">.</span><span class="n">Segmentcast</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span><span class="w"> </span><span class="n">pointB</span><span class="p">);</span>
</span><span id="__span-2-486"><a id="__codelineno-2-486" name="__codelineno-2-486"></a>
</span><span id="__span-2-487"><a id="__codelineno-2-487" name="__codelineno-2-487"></a>
</span><span id="__span-2-488"><a id="__codelineno-2-488" name="__codelineno-2-488"></a><span class="w">            </span><span class="kt">bool</span><span class="w"> </span><span class="n">foundHit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-2-489"><a id="__codelineno-2-489" name="__codelineno-2-489"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">hitI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">hitI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">hitI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-490"><a id="__codelineno-2-490" name="__codelineno-2-490"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-2-491"><a id="__codelineno-2-491" name="__codelineno-2-491"></a><span class="w">                </span><span class="n">Polygon2RaycastHit</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hits</span><span class="p">[</span><span class="n">hitI</span><span class="p">];</span>
</span><span id="__span-2-492"><a id="__codelineno-2-492" name="__codelineno-2-492"></a>
</span><span id="__span-2-493"><a id="__codelineno-2-493" name="__codelineno-2-493"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">pointA</span><span class="p">)</span>
</span><span id="__span-2-494"><a id="__codelineno-2-494" name="__codelineno-2-494"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-2-495"><a id="__codelineno-2-495" name="__codelineno-2-495"></a><span class="w">                    </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">polySwap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">;</span>
</span><span id="__span-2-496"><a id="__codelineno-2-496" name="__codelineno-2-496"></a><span class="w">                    </span><span class="n">currentPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">otherPolygon</span><span class="p">;</span>
</span><span id="__span-2-497"><a id="__codelineno-2-497" name="__codelineno-2-497"></a><span class="w">                    </span><span class="n">otherPolygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">polySwap</span><span class="p">;</span>
</span><span id="__span-2-498"><a id="__codelineno-2-498" name="__codelineno-2-498"></a>
</span><span id="__span-2-499"><a id="__codelineno-2-499" name="__codelineno-2-499"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">step</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
</span><span id="__span-2-500"><a id="__codelineno-2-500" name="__codelineno-2-500"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-2-501"><a id="__codelineno-2-501" name="__codelineno-2-501"></a>
</span><span id="__span-2-502"><a id="__codelineno-2-502" name="__codelineno-2-502"></a><span class="w">                        </span><span class="n">pointAI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">indexB</span><span class="p">;</span>
</span><span id="__span-2-503"><a id="__codelineno-2-503" name="__codelineno-2-503"></a><span class="w">                        </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">indexA</span><span class="p">;</span>
</span><span id="__span-2-504"><a id="__codelineno-2-504" name="__codelineno-2-504"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-2-505"><a id="__codelineno-2-505" name="__codelineno-2-505"></a><span class="w">                    </span><span class="k">else</span>
</span><span id="__span-2-506"><a id="__codelineno-2-506" name="__codelineno-2-506"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-2-507"><a id="__codelineno-2-507" name="__codelineno-2-507"></a><span class="w">                        </span><span class="n">pointAI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">indexA</span><span class="p">;</span>
</span><span id="__span-2-508"><a id="__codelineno-2-508" name="__codelineno-2-508"></a><span class="w">                        </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">indexB</span><span class="p">;</span>
</span><span id="__span-2-509"><a id="__codelineno-2-509" name="__codelineno-2-509"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-2-510"><a id="__codelineno-2-510" name="__codelineno-2-510"></a>
</span><span id="__span-2-511"><a id="__codelineno-2-511" name="__codelineno-2-511"></a><span class="w">                    </span><span class="n">TimedDebug</span><span class="p">.</span><span class="n">ArrowSequence</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">pointA</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">pointA</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">green</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">red</span><span class="p">);</span>
</span><span id="__span-2-512"><a id="__codelineno-2-512" name="__codelineno-2-512"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shapeSegments</span><span class="p">.</span><span class="n">TryAdd</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">shapeSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">].</span><span class="n">Contains</span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">shapeSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">].</span><span class="n">Add</span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-513"><a id="__codelineno-2-513" name="__codelineno-2-513"></a>
</span><span id="__span-2-514"><a id="__codelineno-2-514" name="__codelineno-2-514"></a><span class="w">                    </span><span class="n">pointA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">;</span>
</span><span id="__span-2-515"><a id="__codelineno-2-515" name="__codelineno-2-515"></a>
</span><span id="__span-2-516"><a id="__codelineno-2-516" name="__codelineno-2-516"></a><span class="w">                    </span><span class="n">pointB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointBI</span><span class="p">];</span>
</span><span id="__span-2-517"><a id="__codelineno-2-517" name="__codelineno-2-517"></a>
</span><span id="__span-2-518"><a id="__codelineno-2-518" name="__codelineno-2-518"></a><span class="w">                    </span><span class="n">step</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-2-519"><a id="__codelineno-2-519" name="__codelineno-2-519"></a>
</span><span id="__span-2-520"><a id="__codelineno-2-520" name="__codelineno-2-520"></a><span class="w">                    </span><span class="n">foundHit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-2-521"><a id="__codelineno-2-521" name="__codelineno-2-521"></a>
</span><span id="__span-2-522"><a id="__codelineno-2-522" name="__codelineno-2-522"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-523"><a id="__codelineno-2-523" name="__codelineno-2-523"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-524"><a id="__codelineno-2-524" name="__codelineno-2-524"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-2-525"><a id="__codelineno-2-525" name="__codelineno-2-525"></a>
</span><span id="__span-2-526"><a id="__codelineno-2-526" name="__codelineno-2-526"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foundHit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-527"><a id="__codelineno-2-527" name="__codelineno-2-527"></a>
</span><span id="__span-2-528"><a id="__codelineno-2-528" name="__codelineno-2-528"></a><span class="w">            </span><span class="n">TimedDebug</span><span class="p">.</span><span class="n">ArrowSequence</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">pointA</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">pointA</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">pointB</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0.3f</span><span class="p">,</span><span class="w"> </span><span class="n">pointB</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">green</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">red</span><span class="p">);</span>
</span><span id="__span-2-529"><a id="__codelineno-2-529" name="__codelineno-2-529"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shapeSegments</span><span class="p">.</span><span class="n">TryAdd</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">shapeSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">].</span><span class="n">Contains</span><span class="p">(</span><span class="n">pointB</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">shapeSegments</span><span class="p">[</span><span class="n">pointA</span><span class="p">].</span><span class="n">Add</span><span class="p">(</span><span class="n">pointB</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-530"><a id="__codelineno-2-530" name="__codelineno-2-530"></a>
</span><span id="__span-2-531"><a id="__codelineno-2-531" name="__codelineno-2-531"></a><span class="w">            </span><span class="n">pointAI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">pointAI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-2-532"><a id="__codelineno-2-532" name="__codelineno-2-532"></a><span class="w">            </span><span class="n">pointBI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">pointBI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-2-533"><a id="__codelineno-2-533" name="__codelineno-2-533"></a>
</span><span id="__span-2-534"><a id="__codelineno-2-534" name="__codelineno-2-534"></a><span class="w">            </span><span class="n">pointA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointAI</span><span class="p">];</span>
</span><span id="__span-2-535"><a id="__codelineno-2-535" name="__codelineno-2-535"></a><span class="w">            </span><span class="n">pointB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPolygon</span><span class="p">.</span><span class="n">points</span><span class="p">[</span><span class="n">pointBI</span><span class="p">];</span>
</span><span id="__span-2-536"><a id="__codelineno-2-536" name="__codelineno-2-536"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-537"><a id="__codelineno-2-537" name="__codelineno-2-537"></a>
</span><span id="__span-2-538"><a id="__codelineno-2-538" name="__codelineno-2-538"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">ShatterConnections</span><span class="p">(</span><span class="n">shapeSegments</span><span class="p">);</span>
</span><span id="__span-2-539"><a id="__codelineno-2-539" name="__codelineno-2-539"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-540"><a id="__codelineno-2-540" name="__codelineno-2-540"></a>
</span><span id="__span-2-541"><a id="__codelineno-2-541" name="__codelineno-2-541"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">EdgeSign</span><span class="p">(</span><span class="n">Vector2</span><span class="w"> </span><span class="n">pt</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">v2</span><span class="p">)</span>
</span><span id="__span-2-542"><a id="__codelineno-2-542" name="__codelineno-2-542"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-543"><a id="__codelineno-2-543" name="__codelineno-2-543"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-2-544"><a id="__codelineno-2-544" name="__codelineno-2-544"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-545"><a id="__codelineno-2-545" name="__codelineno-2-545"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">register_types.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span>
<span class="normal"><a href="#__codelineno-3-38">38</a></span>
<span class="normal"><a href="#__codelineno-3-39">39</a></span>
<span class="normal"><a href="#__codelineno-3-40">40</a></span>
<span class="normal"><a href="#__codelineno-3-41">41</a></span>
<span class="normal"><a href="#__codelineno-3-42">42</a></span>
<span class="normal"><a href="#__codelineno-3-43">43</a></span>
<span class="normal"><a href="#__codelineno-3-44">44</a></span>
<span class="normal"><a href="#__codelineno-3-45">45</a></span>
<span class="normal"><a href="#__codelineno-3-46">46</a></span>
<span class="normal"><a href="#__codelineno-3-47">47</a></span>
<span class="normal"><a href="#__codelineno-3-48">48</a></span>
<span class="normal"><a href="#__codelineno-3-49">49</a></span>
<span class="normal"><a href="#__codelineno-3-50">50</a></span>
<span class="normal"><a href="#__codelineno-3-51">51</a></span>
<span class="normal"><a href="#__codelineno-3-52">52</a></span>
<span class="normal"><a href="#__codelineno-3-53">53</a></span>
<span class="normal"><a href="#__codelineno-3-54">54</a></span>
<span class="normal"><a href="#__codelineno-3-55">55</a></span>
<span class="normal"><a href="#__codelineno-3-56">56</a></span>
<span class="normal"><a href="#__codelineno-3-57">57</a></span>
<span class="normal"><a href="#__codelineno-3-58">58</a></span>
<span class="normal"><a href="#__codelineno-3-59">59</a></span>
<span class="normal"><a href="#__codelineno-3-60">60</a></span>
<span class="normal"><a href="#__codelineno-3-61">61</a></span>
<span class="normal"><a href="#__codelineno-3-62">62</a></span>
<span class="normal"><a href="#__codelineno-3-63">63</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Triangulate</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="p">{</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Polygon2</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Triangulate</span><span class="p">(</span><span class="n">Polygon2</span><span class="w"> </span><span class="n">polygon</span><span class="p">)</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Polygon2</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">());</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">targetVertices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Vector2</span><span class="o">&gt;</span><span class="p">(</span><span class="n">polygon</span><span class="p">.</span><span class="n">points</span><span class="p">);</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13"></a>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">iterations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15"></a>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">            </span><span class="n">iterations</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19"></a>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">vertI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">vertI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">vertI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">aI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">vertI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">bI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">vertI</span><span class="p">);</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">cI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">vertI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25"></a>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="w">                </span><span class="n">Vector2</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">[</span><span class="n">aI</span><span class="p">];</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="w">                </span><span class="n">Vector2</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">[</span><span class="n">bI</span><span class="p">];</span>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="w">                </span><span class="n">Vector2</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">[</span><span class="n">cI</span><span class="p">];</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29"></a>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30"></a><span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">SignedAngle</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31"></a>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="w">                </span><span class="kt">bool</span><span class="w"> </span><span class="n">angleCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0f</span><span class="p">;</span>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33"></a><span class="w">                </span><span class="kt">bool</span><span class="w"> </span><span class="n">collisionCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">colVertI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">vertI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">colVertI</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">aI</span><span class="p">;</span><span class="w"> </span><span class="n">colVertI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">colVertI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span>
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Polygon2</span><span class="p">.</span><span class="n">IsPointInTriangle</span><span class="p">(</span><span class="n">targetVertices</span><span class="p">[</span><span class="n">colVertI</span><span class="p">],</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">))</span>
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="w">                    </span><span class="p">{</span>
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38"></a><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">targetVertices</span><span class="p">[</span><span class="n">colVertI</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">[</span><span class="n">colVertI</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">targetVertices</span><span class="p">[</span><span class="n">colVertI</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">c</span><span class="p">))</span>
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39"></a><span class="w">                        </span><span class="p">{</span>
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40"></a>
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41"></a><span class="w">                        </span><span class="p">}</span>
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42"></a><span class="w">                        </span><span class="k">else</span>
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43"></a><span class="w">                        </span><span class="p">{</span>
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44"></a><span class="w">                            </span><span class="n">collisionCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45"></a><span class="w">                            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-3-46"><a id="__codelineno-3-46" name="__codelineno-3-46"></a><span class="w">                        </span><span class="p">}</span>
</span><span id="__span-3-47"><a id="__codelineno-3-47" name="__codelineno-3-47"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-3-48"><a id="__codelineno-3-48" name="__codelineno-3-48"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-3-49"><a id="__codelineno-3-49" name="__codelineno-3-49"></a>
</span><span id="__span-3-50"><a id="__codelineno-3-50" name="__codelineno-3-50"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">angleCase</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">collisionCase</span><span class="p">)</span>
</span><span id="__span-3-51"><a id="__codelineno-3-51" name="__codelineno-3-51"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-3-52"><a id="__codelineno-3-52" name="__codelineno-3-52"></a><span class="w">                    </span><span class="n">result</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</span><span id="__span-3-53"><a id="__codelineno-3-53" name="__codelineno-3-53"></a><span class="w">                    </span><span class="n">result</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-3-54"><a id="__codelineno-3-54" name="__codelineno-3-54"></a><span class="w">                    </span><span class="n">result</span><span class="p">.</span><span class="n">points</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span><span id="__span-3-55"><a id="__codelineno-3-55" name="__codelineno-3-55"></a>
</span><span id="__span-3-56"><a id="__codelineno-3-56" name="__codelineno-3-56"></a><span class="w">                    </span><span class="n">targetVertices</span><span class="p">.</span><span class="n">RemoveAt</span><span class="p">(</span><span class="n">bI</span><span class="p">);</span>
</span><span id="__span-3-57"><a id="__codelineno-3-57" name="__codelineno-3-57"></a>
</span><span id="__span-3-58"><a id="__codelineno-3-58" name="__codelineno-3-58"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-3-59"><a id="__codelineno-3-59" name="__codelineno-3-59"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-3-60"><a id="__codelineno-3-60" name="__codelineno-3-60"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-3-61"><a id="__codelineno-3-61" name="__codelineno-3-61"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-62"><a id="__codelineno-3-62" name="__codelineno-3-62"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-63"><a id="__codelineno-3-63" name="__codelineno-3-63"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</div>
</div>
</div>
<h2 id="processor-nodes-procedural-modelling-nodes-using-xnode-and-dots">Processor Nodes &amp; Procedural Modelling Nodes Using XNode and DOTS<a class="headerlink" href="#processor-nodes-procedural-modelling-nodes-using-xnode-and-dots" title="Permanent link">¶</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked id="__tabbed_5_1" name="__tabbed_5" type="radio"><input id="__tabbed_5_2" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">Video</label><label for="__tabbed_5_2">Code Samples</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div class="video-container"><video style="position:relative;width:100%;height:22.172vw" muted controls alt="type:video"><source src="../assets/media/model_graph/showcase.mp4" type="video/mp4"></source></video></div>
<div class="admonition quote">
<p class="admonition-title">About</p>
<p>The goal of this project was the ability to prototpe and implement procedural geometry "rulesets" at high speeds. I have a particular affinity for procedural generation in games, and as such it's required me to develop tools to structure procedural systems faster. With the procedural modelling nodes, the process of developing procedural rules becomes more akin to asset development. This tool was built using XNode libraries, which I've used to implement directional evaluation of nodes, aswell as value type and collection convertability between nodes (e.g. a float output could be converted to a vector input or a collection of vectors could be converted to a single value and vice versa.) The tool was inspired by Blender's geometry nodes, with the hopes that it could integrate into the Unity workflow just as seamlessly.</p>
</div>
</div>
<div class="tabbed-block">
<div class="admonition quote">
<p class="admonition-title">About</p>
<p>The modelling nodes were designed with a flexible inheritence hiearchy in mind. All modelling nodes inherit from another type of node called a "ProcessorNode". Essentially what this node does is provide basic functionality for processing mutable input and output values in a sequential fashion. If you wanted to create a different type of ProcessorNode, perhaps for defining AI behaviors or animation states, you could easily use the ProcessorNode as a base class.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="6:4"><input checked id="__tabbed_6_1" name="__tabbed_6" type="radio"><input id="__tabbed_6_2" name="__tabbed_6" type="radio"><input id="__tabbed_6_3" name="__tabbed_6" type="radio"><input id="__tabbed_6_4" name="__tabbed_6" type="radio"><div class="tabbed-labels"><label for="__tabbed_6_1">ProcessorGraph</label><label for="__tabbed_6_2">ProcessorNode</label><label for="__tabbed_6_3">LogNode</label><label for="__tabbed_6_4">OperatorNode</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">ProcessorGraph.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">  1</a></span>
<span class="normal"><a href="#__codelineno-4-2">  2</a></span>
<span class="normal"><a href="#__codelineno-4-3">  3</a></span>
<span class="normal"><a href="#__codelineno-4-4">  4</a></span>
<span class="normal"><a href="#__codelineno-4-5">  5</a></span>
<span class="normal"><a href="#__codelineno-4-6">  6</a></span>
<span class="normal"><a href="#__codelineno-4-7">  7</a></span>
<span class="normal"><a href="#__codelineno-4-8">  8</a></span>
<span class="normal"><a href="#__codelineno-4-9">  9</a></span>
<span class="normal"><a href="#__codelineno-4-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-4-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-4-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-4-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-4-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-4-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-4-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-4-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-4-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-4-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-4-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-4-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-4-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-4-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-4-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-4-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-4-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-4-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-4-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-4-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-4-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-4-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-4-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-4-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-4-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-4-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-4-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-4-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-4-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-4-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-4-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-4-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-4-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-4-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-4-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-4-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-4-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-4-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-4-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-4-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-4-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-4-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-4-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-4-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-4-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-4-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-4-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-4-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-4-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-4-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-4-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-4-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-4-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-4-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-4-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-4-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-4-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-4-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-4-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-4-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-4-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-4-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-4-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-4-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-4-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-4-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-4-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-4-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-4-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-4-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-4-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-4-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-4-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-4-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-4-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-4-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-4-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-4-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-4-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-4-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-4-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-4-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-4-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-4-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-4-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-4-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-4-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-4-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-4-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-4-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-4-100">100</a></span>
<span class="normal"><a href="#__codelineno-4-101">101</a></span>
<span class="normal"><a href="#__codelineno-4-102">102</a></span>
<span class="normal"><a href="#__codelineno-4-103">103</a></span>
<span class="normal"><a href="#__codelineno-4-104">104</a></span>
<span class="normal"><a href="#__codelineno-4-105">105</a></span>
<span class="normal"><a href="#__codelineno-4-106">106</a></span>
<span class="normal"><a href="#__codelineno-4-107">107</a></span>
<span class="normal"><a href="#__codelineno-4-108">108</a></span>
<span class="normal"><a href="#__codelineno-4-109">109</a></span>
<span class="normal"><a href="#__codelineno-4-110">110</a></span>
<span class="normal"><a href="#__codelineno-4-111">111</a></span>
<span class="normal"><a href="#__codelineno-4-112">112</a></span>
<span class="normal"><a href="#__codelineno-4-113">113</a></span>
<span class="normal"><a href="#__codelineno-4-114">114</a></span>
<span class="normal"><a href="#__codelineno-4-115">115</a></span>
<span class="normal"><a href="#__codelineno-4-116">116</a></span>
<span class="normal"><a href="#__codelineno-4-117">117</a></span>
<span class="normal"><a href="#__codelineno-4-118">118</a></span>
<span class="normal"><a href="#__codelineno-4-119">119</a></span>
<span class="normal"><a href="#__codelineno-4-120">120</a></span>
<span class="normal"><a href="#__codelineno-4-121">121</a></span>
<span class="normal"><a href="#__codelineno-4-122">122</a></span>
<span class="normal"><a href="#__codelineno-4-123">123</a></span>
<span class="normal"><a href="#__codelineno-4-124">124</a></span>
<span class="normal"><a href="#__codelineno-4-125">125</a></span>
<span class="normal"><a href="#__codelineno-4-126">126</a></span>
<span class="normal"><a href="#__codelineno-4-127">127</a></span>
<span class="normal"><a href="#__codelineno-4-128">128</a></span>
<span class="normal"><a href="#__codelineno-4-129">129</a></span>
<span class="normal"><a href="#__codelineno-4-130">130</a></span>
<span class="normal"><a href="#__codelineno-4-131">131</a></span>
<span class="normal"><a href="#__codelineno-4-132">132</a></span>
<span class="normal"><a href="#__codelineno-4-133">133</a></span>
<span class="normal"><a href="#__codelineno-4-134">134</a></span>
<span class="normal"><a href="#__codelineno-4-135">135</a></span>
<span class="normal"><a href="#__codelineno-4-136">136</a></span>
<span class="normal"><a href="#__codelineno-4-137">137</a></span>
<span class="normal"><a href="#__codelineno-4-138">138</a></span>
<span class="normal"><a href="#__codelineno-4-139">139</a></span>
<span class="normal"><a href="#__codelineno-4-140">140</a></span>
<span class="normal"><a href="#__codelineno-4-141">141</a></span>
<span class="normal"><a href="#__codelineno-4-142">142</a></span>
<span class="normal"><a href="#__codelineno-4-143">143</a></span>
<span class="normal"><a href="#__codelineno-4-144">144</a></span>
<span class="normal"><a href="#__codelineno-4-145">145</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">XNode</span><span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Collections</span><span class="p">;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="cp">#if UNITY_EDITOR</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="k">using</span><span class="w"> </span><span class="nn">XNodeEditor</span><span class="p">;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="cp">#endif</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">XNodeCore</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="p">{</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">    </span><span class="c1">///&lt;summary&gt;A graph whose nodes can process ports before passing them. This is useful for caching large calculations and re-using them.&lt;/summary&gt;</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">    </span><span class="na">[CreateAssetMenu]</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ProcessorGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">NodeGraph</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">ProcessorGraph</span><span class="w"> </span><span class="n">currentGraph</span><span class="p">;</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20"></a>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">StringList</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringList</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">ProcessorGraph</span><span class="w"> </span><span class="n">inheritParameters</span><span class="p">;</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23"></a>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="n">IncludeNodeTypes</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">typeof</span><span class="p">(</span><span class="n">ProcessorNode</span><span class="p">)</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="n">ExcludeNodeTypes</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26"></a>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">processedFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">();</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">ProcessorNode</span><span class="o">&gt;</span><span class="w"> </span><span class="n">processedNodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">ProcessorNode</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Process</span><span class="p">()</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="w">            </span><span class="n">Field</span><span class="p">.</span><span class="n">converter</span><span class="p">.</span><span class="n">cachedConversions</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="w">            </span><span class="n">processedFields</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">            </span><span class="n">processedNodes</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">ProcessorNode</span><span class="w"> </span><span class="n">capNode</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">FindAll</span><span class="p">((</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="w">                </span><span class="n">ProcessorNode</span><span class="w"> </span><span class="n">pN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ProcessorNode</span><span class="p">;</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">pN</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">pN</span><span class="p">.</span><span class="n">outFields</span><span class="p">.</span><span class="n">Any</span><span class="p">((</span><span class="n">oF</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">oF</span><span class="p">.</span><span class="n">Connected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="w">            </span><span class="p">}))</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="w">                </span><span class="n">ProcessRecursive</span><span class="p">(</span><span class="n">capNode</span><span class="p">);</span>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43"></a>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">ProcessorGraph</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">currentGraph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45"></a>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ProcessBranch</span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48"></a><span class="w">            </span><span class="n">Tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">GetHashCode</span><span class="p">(),</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">GetHashCode</span><span class="p">());</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49"></a>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">processedFields</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">pair</span><span class="p">))</span>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52"></a><span class="w">                </span><span class="n">processedFields</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">pair</span><span class="p">);</span>
</span><span id="__span-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53"></a><span class="w">                </span><span class="n">ProcessRecursive</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">node</span><span class="p">);</span>
</span><span id="__span-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56"></a>
</span><span id="__span-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ProcessRecursive</span><span class="p">(</span><span class="n">ProcessorNode</span><span class="w"> </span><span class="n">node</span><span class="p">)</span>
</span><span id="__span-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59"></a><span class="w">            </span><span class="kt">bool</span><span class="w"> </span><span class="n">processed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">processedNodes</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span><span id="__span-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">processed</span><span class="p">)</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">ConfigureInFields</span><span class="p">();</span>
</span><span id="__span-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61"></a>
</span><span id="__span-4-62"><a id="__codelineno-4-62" name="__codelineno-4-62"></a><span class="w">            </span><span class="c1">// Process All Needed Inputs</span>
</span><span id="__span-4-63"><a id="__codelineno-4-63" name="__codelineno-4-63"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">InField</span><span class="w"> </span><span class="n">inField</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">inFields</span><span class="p">)</span>
</span><span id="__span-4-64"><a id="__codelineno-4-64" name="__codelineno-4-64"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-65"><a id="__codelineno-4-65" name="__codelineno-4-65"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inField</span><span class="p">.</span><span class="n">Connected</span><span class="p">)</span>
</span><span id="__span-4-66"><a id="__codelineno-4-66" name="__codelineno-4-66"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-4-67"><a id="__codelineno-4-67" name="__codelineno-4-67"></a><span class="w">                    </span><span class="n">ProcessBranch</span><span class="p">(</span><span class="n">inField</span><span class="p">,</span><span class="w"> </span><span class="n">inField</span><span class="p">.</span><span class="n">connectedOutField</span><span class="p">);</span>
</span><span id="__span-4-68"><a id="__codelineno-4-68" name="__codelineno-4-68"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-4-69"><a id="__codelineno-4-69" name="__codelineno-4-69"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-70"><a id="__codelineno-4-70" name="__codelineno-4-70"></a>
</span><span id="__span-4-71"><a id="__codelineno-4-71" name="__codelineno-4-71"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">processed</span><span class="p">)</span>
</span><span id="__span-4-72"><a id="__codelineno-4-72" name="__codelineno-4-72"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-73"><a id="__codelineno-4-73" name="__codelineno-4-73"></a><span class="w">                </span><span class="n">node</span><span class="p">.</span><span class="n">GraphProcess</span><span class="p">();</span>
</span><span id="__span-4-74"><a id="__codelineno-4-74" name="__codelineno-4-74"></a><span class="w">                </span><span class="n">node</span><span class="p">.</span><span class="n">ConfigureOutFields</span><span class="p">();</span>
</span><span id="__span-4-75"><a id="__codelineno-4-75" name="__codelineno-4-75"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-76"><a id="__codelineno-4-76" name="__codelineno-4-76"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-77"><a id="__codelineno-4-77" name="__codelineno-4-77"></a>
</span><span id="__span-4-78"><a id="__codelineno-4-78" name="__codelineno-4-78"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="n">validTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span>
</span><span id="__span-4-79"><a id="__codelineno-4-79" name="__codelineno-4-79"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-80"><a id="__codelineno-4-80" name="__codelineno-4-80"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">InSingleField</span><span class="o">&lt;&gt;</span><span class="p">),</span>
</span><span id="__span-4-81"><a id="__codelineno-4-81" name="__codelineno-4-81"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">InMultiField</span><span class="o">&lt;&gt;</span><span class="p">),</span>
</span><span id="__span-4-82"><a id="__codelineno-4-82" name="__codelineno-4-82"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">OutSingleField</span><span class="o">&lt;&gt;</span><span class="p">),</span>
</span><span id="__span-4-83"><a id="__codelineno-4-83" name="__codelineno-4-83"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">OutMultiField</span><span class="o">&lt;&gt;</span><span class="p">)</span>
</span><span id="__span-4-84"><a id="__codelineno-4-84" name="__codelineno-4-84"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-4-85"><a id="__codelineno-4-85" name="__codelineno-4-85"></a>
</span><span id="__span-4-86"><a id="__codelineno-4-86" name="__codelineno-4-86"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="n">inputTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span>
</span><span id="__span-4-87"><a id="__codelineno-4-87" name="__codelineno-4-87"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-88"><a id="__codelineno-4-88" name="__codelineno-4-88"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">InSingleField</span><span class="o">&lt;&gt;</span><span class="p">),</span>
</span><span id="__span-4-89"><a id="__codelineno-4-89" name="__codelineno-4-89"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">InMultiField</span><span class="o">&lt;&gt;</span><span class="p">)</span>
</span><span id="__span-4-90"><a id="__codelineno-4-90" name="__codelineno-4-90"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-4-91"><a id="__codelineno-4-91" name="__codelineno-4-91"></a>
</span><span id="__span-4-92"><a id="__codelineno-4-92" name="__codelineno-4-92"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="n">outputTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span>
</span><span id="__span-4-93"><a id="__codelineno-4-93" name="__codelineno-4-93"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-94"><a id="__codelineno-4-94" name="__codelineno-4-94"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">OutSingleField</span><span class="o">&lt;&gt;</span><span class="p">),</span>
</span><span id="__span-4-95"><a id="__codelineno-4-95" name="__codelineno-4-95"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">OutMultiField</span><span class="o">&lt;&gt;</span><span class="p">)</span>
</span><span id="__span-4-96"><a id="__codelineno-4-96" name="__codelineno-4-96"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-4-97"><a id="__codelineno-4-97" name="__codelineno-4-97"></a>
</span><span id="__span-4-98"><a id="__codelineno-4-98" name="__codelineno-4-98"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span><span class="w"> </span><span class="n">multiTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type</span><span class="p">[]</span>
</span><span id="__span-4-99"><a id="__codelineno-4-99" name="__codelineno-4-99"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-100"><a id="__codelineno-4-100" name="__codelineno-4-100"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">InMultiField</span><span class="o">&lt;&gt;</span><span class="p">),</span>
</span><span id="__span-4-101"><a id="__codelineno-4-101" name="__codelineno-4-101"></a><span class="w">            </span><span class="k">typeof</span><span class="p">(</span><span class="n">OutMultiField</span><span class="o">&lt;&gt;</span><span class="p">)</span>
</span><span id="__span-4-102"><a id="__codelineno-4-102" name="__codelineno-4-102"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-4-103"><a id="__codelineno-4-103" name="__codelineno-4-103"></a>
</span><span id="__span-4-104"><a id="__codelineno-4-104" name="__codelineno-4-104"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">validTypes</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="n">GetGenericTypeDefinition</span><span class="p">());</span>
</span><span id="__span-4-105"><a id="__codelineno-4-105" name="__codelineno-4-105"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsInput</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">inputTypes</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="n">GetGenericTypeDefinition</span><span class="p">());</span>
</span><span id="__span-4-106"><a id="__codelineno-4-106" name="__codelineno-4-106"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsOutput</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">outputTypes</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="n">GetGenericTypeDefinition</span><span class="p">());</span>
</span><span id="__span-4-107"><a id="__codelineno-4-107" name="__codelineno-4-107"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsMulti</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">multiTypes</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="n">GetGenericTypeDefinition</span><span class="p">());</span>
</span><span id="__span-4-108"><a id="__codelineno-4-108" name="__codelineno-4-108"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsSingle</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">!</span><span class="n">IsMulti</span><span class="p">(</span><span class="n">type</span><span class="p">);</span>
</span><span id="__span-4-109"><a id="__codelineno-4-109" name="__codelineno-4-109"></a>
</span><span id="__span-4-110"><a id="__codelineno-4-110" name="__codelineno-4-110"></a><span class="w">        </span><span class="cp">#if UNITY_EDITOR</span>
</span><span id="__span-4-111"><a id="__codelineno-4-111" name="__codelineno-4-111"></a>
</span><span id="__span-4-112"><a id="__codelineno-4-112" name="__codelineno-4-112"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">SetCircleTexture</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span>
</span><span id="__span-4-113"><a id="__codelineno-4-113" name="__codelineno-4-113"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-114"><a id="__codelineno-4-114" name="__codelineno-4-114"></a><span class="w">            </span><span class="n">NodeEditorWindow</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">graphEditor</span><span class="p">.</span><span class="n">GetPortStyle</span><span class="p">(</span><span class="n">port</span><span class="p">).</span><span class="n">normal</span><span class="p">.</span><span class="n">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NodeEditorResources</span><span class="p">.</span><span class="n">dotOuter</span><span class="p">;</span>
</span><span id="__span-4-115"><a id="__codelineno-4-115" name="__codelineno-4-115"></a><span class="w">            </span><span class="n">NodeEditorWindow</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">graphEditor</span><span class="p">.</span><span class="n">GetPortStyle</span><span class="p">(</span><span class="n">port</span><span class="p">).</span><span class="n">active</span><span class="p">.</span><span class="n">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NodeEditorResources</span><span class="p">.</span><span class="n">dot</span><span class="p">;</span>
</span><span id="__span-4-116"><a id="__codelineno-4-116" name="__codelineno-4-116"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-117"><a id="__codelineno-4-117" name="__codelineno-4-117"></a>
</span><span id="__span-4-118"><a id="__codelineno-4-118" name="__codelineno-4-118"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">SetTriangleTexture</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span>
</span><span id="__span-4-119"><a id="__codelineno-4-119" name="__codelineno-4-119"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-120"><a id="__codelineno-4-120" name="__codelineno-4-120"></a><span class="w">            </span><span class="n">NodeEditorWindow</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">graphEditor</span><span class="p">.</span><span class="n">GetPortStyle</span><span class="p">(</span><span class="n">port</span><span class="p">).</span><span class="n">normal</span><span class="p">.</span><span class="n">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="o">&lt;</span><span class="n">Texture2D</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"xnodecore_tri_outer"</span><span class="p">);</span>
</span><span id="__span-4-121"><a id="__codelineno-4-121" name="__codelineno-4-121"></a><span class="w">            </span><span class="n">NodeEditorWindow</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">graphEditor</span><span class="p">.</span><span class="n">GetPortStyle</span><span class="p">(</span><span class="n">port</span><span class="p">).</span><span class="n">active</span><span class="p">.</span><span class="n">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="o">&lt;</span><span class="n">Texture2D</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"xnodecore_tri"</span><span class="p">);</span>
</span><span id="__span-4-122"><a id="__codelineno-4-122" name="__codelineno-4-122"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-123"><a id="__codelineno-4-123" name="__codelineno-4-123"></a>
</span><span id="__span-4-124"><a id="__codelineno-4-124" name="__codelineno-4-124"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">SetHollowTriangleTexture</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span>
</span><span id="__span-4-125"><a id="__codelineno-4-125" name="__codelineno-4-125"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-126"><a id="__codelineno-4-126" name="__codelineno-4-126"></a><span class="w">            </span><span class="n">NodeEditorWindow</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">graphEditor</span><span class="p">.</span><span class="n">GetPortStyle</span><span class="p">(</span><span class="n">port</span><span class="p">).</span><span class="n">normal</span><span class="p">.</span><span class="n">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="o">&lt;</span><span class="n">Texture2D</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"xnodecore_tri_outer"</span><span class="p">);</span>
</span><span id="__span-4-127"><a id="__codelineno-4-127" name="__codelineno-4-127"></a><span class="w">            </span><span class="n">NodeEditorWindow</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">graphEditor</span><span class="p">.</span><span class="n">GetPortStyle</span><span class="p">(</span><span class="n">port</span><span class="p">).</span><span class="n">active</span><span class="p">.</span><span class="n">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="o">&lt;</span><span class="n">Texture2D</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"xnodecore_tri_hollow"</span><span class="p">);</span>
</span><span id="__span-4-128"><a id="__codelineno-4-128" name="__codelineno-4-128"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-129"><a id="__codelineno-4-129" name="__codelineno-4-129"></a>
</span><span id="__span-4-130"><a id="__codelineno-4-130" name="__codelineno-4-130"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">SetPortTexture</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span>
</span><span id="__span-4-131"><a id="__codelineno-4-131" name="__codelineno-4-131"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-132"><a id="__codelineno-4-132" name="__codelineno-4-132"></a><span class="w">            </span><span class="c1">//Debug.Log(port.ValueType);</span>
</span><span id="__span-4-133"><a id="__codelineno-4-133" name="__codelineno-4-133"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">ValueType</span><span class="p">.</span><span class="n">IsGenericType</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">IsMulti</span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">ValueType</span><span class="p">))</span>
</span><span id="__span-4-134"><a id="__codelineno-4-134" name="__codelineno-4-134"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-135"><a id="__codelineno-4-135" name="__codelineno-4-135"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">IsConnected</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">IsSingle</span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">GetConnection</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">ValueType</span><span class="p">))</span><span class="w"> </span><span class="n">SetHollowTriangleTexture</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
</span><span id="__span-4-136"><a id="__codelineno-4-136" name="__codelineno-4-136"></a><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">IsConnected</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">port</span><span class="p">.</span><span class="n">IsOutput</span><span class="p">)</span><span class="w"> </span><span class="n">SetTriangleTexture</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
</span><span id="__span-4-137"><a id="__codelineno-4-137" name="__codelineno-4-137"></a><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="nf">SetHollowTriangleTexture</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
</span><span id="__span-4-138"><a id="__codelineno-4-138" name="__codelineno-4-138"></a><span class="w">                </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-4-139"><a id="__codelineno-4-139" name="__codelineno-4-139"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-140"><a id="__codelineno-4-140" name="__codelineno-4-140"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="nf">SetCircleTexture</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
</span><span id="__span-4-141"><a id="__codelineno-4-141" name="__codelineno-4-141"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-142"><a id="__codelineno-4-142" name="__codelineno-4-142"></a>
</span><span id="__span-4-143"><a id="__codelineno-4-143" name="__codelineno-4-143"></a><span class="w">        </span><span class="cp">#endif</span>
</span><span id="__span-4-144"><a id="__codelineno-4-144" name="__codelineno-4-144"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-145"><a id="__codelineno-4-145" name="__codelineno-4-145"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">ProcessorNode.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">  1</a></span>
<span class="normal"><a href="#__codelineno-5-2">  2</a></span>
<span class="normal"><a href="#__codelineno-5-3">  3</a></span>
<span class="normal"><a href="#__codelineno-5-4">  4</a></span>
<span class="normal"><a href="#__codelineno-5-5">  5</a></span>
<span class="normal"><a href="#__codelineno-5-6">  6</a></span>
<span class="normal"><a href="#__codelineno-5-7">  7</a></span>
<span class="normal"><a href="#__codelineno-5-8">  8</a></span>
<span class="normal"><a href="#__codelineno-5-9">  9</a></span>
<span class="normal"><a href="#__codelineno-5-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-5-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-5-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-5-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-5-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-5-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-5-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-5-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-5-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-5-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-5-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-5-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-5-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-5-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-5-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-5-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-5-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-5-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-5-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-5-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-5-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-5-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-5-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-5-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-5-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-5-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-5-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-5-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-5-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-5-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-5-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-5-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-5-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-5-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-5-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-5-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-5-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-5-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-5-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-5-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-5-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-5-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-5-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-5-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-5-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-5-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-5-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-5-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-5-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-5-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-5-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-5-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-5-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-5-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-5-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-5-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-5-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-5-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-5-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-5-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-5-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-5-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-5-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-5-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-5-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-5-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-5-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-5-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-5-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-5-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-5-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-5-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-5-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-5-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-5-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-5-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-5-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-5-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-5-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-5-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-5-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-5-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-5-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-5-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-5-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-5-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-5-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-5-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-5-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-5-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-5-100">100</a></span>
<span class="normal"><a href="#__codelineno-5-101">101</a></span>
<span class="normal"><a href="#__codelineno-5-102">102</a></span>
<span class="normal"><a href="#__codelineno-5-103">103</a></span>
<span class="normal"><a href="#__codelineno-5-104">104</a></span>
<span class="normal"><a href="#__codelineno-5-105">105</a></span>
<span class="normal"><a href="#__codelineno-5-106">106</a></span>
<span class="normal"><a href="#__codelineno-5-107">107</a></span>
<span class="normal"><a href="#__codelineno-5-108">108</a></span>
<span class="normal"><a href="#__codelineno-5-109">109</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">XNode</span><span class="p">;</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">XNodeCore</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="p">{</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="c1">///&lt;summary&gt;A node which can process ports before passing them. This is useful for caching large calculations and re-using them.&lt;/summary&gt;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">abstract</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ProcessorNode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Node</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">ProcessorGraph</span><span class="w"> </span><span class="n">pGraph</span><span class="p">;</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">InField</span><span class="o">&gt;</span><span class="w"> </span><span class="n">currentInFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">InField</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OutField</span><span class="o">&gt;</span><span class="w"> </span><span class="n">currentOutFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OutField</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">        </span><span class="na">[NonSerialized]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">InField</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">InField</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">        </span><span class="na">[NonSerialized]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OutField</span><span class="o">&gt;</span><span class="w"> </span><span class="n">outFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OutField</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19"></a>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">ProcessorNode</span><span class="p">()</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">            </span><span class="n">inFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentInFields</span><span class="p">;</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">            </span><span class="n">currentInFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">InField</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24"></a>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="w">            </span><span class="n">outFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentOutFields</span><span class="p">;</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">            </span><span class="n">currentOutFields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OutField</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28"></a>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnEnable</span><span class="p">()</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="w">            </span><span class="k">base</span><span class="p">.</span><span class="n">OnEnable</span><span class="p">();</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32"></a><span class="w">            </span><span class="n">pGraph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessorGraph</span><span class="p">.</span><span class="n">currentGraph</span><span class="p">;</span>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33"></a><span class="w">            </span><span class="n">CreateDynamicFields</span><span class="p">();</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35"></a>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="kt">object</span><span class="w"> </span><span class="nf">GetValue</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37"></a>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ConfigureInFields</span><span class="p">()</span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">InField</span><span class="w"> </span><span class="n">inField</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">inFields</span><span class="p">)</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42"></a><span class="w">                </span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetInputPort</span><span class="p">(</span><span class="n">inField</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">port</span><span class="p">.</span><span class="n">IsConnected</span><span class="p">)</span><span class="w"> </span><span class="n">inField</span><span class="p">.</span><span class="n">connectedOutField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">ProcessorNode</span><span class="p">)</span><span class="n">port</span><span class="p">.</span><span class="n">GetConnection</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">node</span><span class="p">).</span><span class="n">outFields</span><span class="p">.</span><span class="n">Find</span><span class="p">((</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">port</span><span class="p">.</span><span class="n">GetConnection</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">fieldName</span><span class="p">);</span>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46"></a>
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">GraphProcess</span><span class="p">()</span>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">InField</span><span class="w"> </span><span class="n">inField</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">inFields</span><span class="p">)</span>
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51"></a><span class="w">                </span><span class="n">inField</span><span class="p">.</span><span class="n">Configure</span><span class="p">();</span>
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53"></a>
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54"></a><span class="w">            </span><span class="n">Process</span><span class="p">();</span>
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56"></a>
</span><span id="__span-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ConfigureOutFields</span><span class="p">()</span>
</span><span id="__span-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">OutField</span><span class="w"> </span><span class="n">outField</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">outFields</span><span class="p">)</span>
</span><span id="__span-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61"></a><span class="w">                </span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetOutputPort</span><span class="p">(</span><span class="n">outField</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">port</span><span class="p">.</span><span class="n">IsConnected</span><span class="p">)</span><span class="w"> </span><span class="n">outField</span><span class="p">.</span><span class="n">connectedInField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">ProcessorNode</span><span class="p">)</span><span class="n">port</span><span class="p">.</span><span class="n">GetConnection</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">node</span><span class="p">).</span><span class="n">inFields</span><span class="p">.</span><span class="n">Find</span><span class="p">((</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">port</span><span class="p">.</span><span class="n">GetConnection</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">fieldName</span><span class="p">);</span>
</span><span id="__span-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63"></a>
</span><span id="__span-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64"></a><span class="w">                </span><span class="n">outField</span><span class="p">.</span><span class="n">ClearCache</span><span class="p">();</span>
</span><span id="__span-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67"></a>
</span><span id="__span-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CreateDynamicFields</span><span class="p">()</span>
</span><span id="__span-5-69"><a id="__codelineno-5-69" name="__codelineno-5-69"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-70"><a id="__codelineno-5-70" name="__codelineno-5-70"></a><span class="w">            </span><span class="n">DynamicFields</span><span class="p">();</span>
</span><span id="__span-5-71"><a id="__codelineno-5-71" name="__codelineno-5-71"></a>
</span><span id="__span-5-72"><a id="__codelineno-5-72" name="__codelineno-5-72"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">InField</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">currentInFields</span><span class="p">)</span>
</span><span id="__span-5-73"><a id="__codelineno-5-73" name="__codelineno-5-73"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-5-74"><a id="__codelineno-5-74" name="__codelineno-5-74"></a><span class="w">                </span><span class="n">field</span><span class="p">.</span><span class="n">isDynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-5-75"><a id="__codelineno-5-75" name="__codelineno-5-75"></a><span class="w">                </span><span class="n">field</span><span class="p">.</span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
</span><span id="__span-5-76"><a id="__codelineno-5-76" name="__codelineno-5-76"></a><span class="w">                </span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetInputPort</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-5-77"><a id="__codelineno-5-77" name="__codelineno-5-77"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AddDynamicInput</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">ValueType</span><span class="p">,</span><span class="w"> </span><span class="n">fieldName</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-5-78"><a id="__codelineno-5-78" name="__codelineno-5-78"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-79"><a id="__codelineno-5-79" name="__codelineno-5-79"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">OutField</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">currentOutFields</span><span class="p">)</span>
</span><span id="__span-5-80"><a id="__codelineno-5-80" name="__codelineno-5-80"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-5-81"><a id="__codelineno-5-81" name="__codelineno-5-81"></a><span class="w">                </span><span class="n">field</span><span class="p">.</span><span class="n">isDynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
</span><span id="__span-5-82"><a id="__codelineno-5-82" name="__codelineno-5-82"></a><span class="w">                </span><span class="n">field</span><span class="p">.</span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
</span><span id="__span-5-83"><a id="__codelineno-5-83" name="__codelineno-5-83"></a><span class="w">                </span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetOutputPort</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-5-84"><a id="__codelineno-5-84" name="__codelineno-5-84"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">port</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AddDynamicOutput</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">ValueType</span><span class="p">,</span><span class="w"> </span><span class="n">fieldName</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-5-85"><a id="__codelineno-5-85" name="__codelineno-5-85"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-86"><a id="__codelineno-5-86" name="__codelineno-5-86"></a>
</span><span id="__span-5-87"><a id="__codelineno-5-87" name="__codelineno-5-87"></a><span class="w">            </span><span class="n">inFields</span><span class="p">.</span><span class="n">AddRange</span><span class="p">(</span><span class="n">currentInFields</span><span class="p">);</span>
</span><span id="__span-5-88"><a id="__codelineno-5-88" name="__codelineno-5-88"></a><span class="w">            </span><span class="n">outFields</span><span class="p">.</span><span class="n">AddRange</span><span class="p">(</span><span class="n">currentOutFields</span><span class="p">);</span>
</span><span id="__span-5-89"><a id="__codelineno-5-89" name="__codelineno-5-89"></a><span class="w">            </span><span class="n">currentInFields</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span><span id="__span-5-90"><a id="__codelineno-5-90" name="__codelineno-5-90"></a><span class="w">            </span><span class="n">currentOutFields</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span><span id="__span-5-91"><a id="__codelineno-5-91" name="__codelineno-5-91"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-92"><a id="__codelineno-5-92" name="__codelineno-5-92"></a>
</span><span id="__span-5-93"><a id="__codelineno-5-93" name="__codelineno-5-93"></a><span class="w">        </span><span class="k">protected</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">DynamicFields</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-5-94"><a id="__codelineno-5-94" name="__codelineno-5-94"></a>
</span><span id="__span-5-95"><a id="__codelineno-5-95" name="__codelineno-5-95"></a><span class="w">        </span><span class="cp">#if UNITY_EDITOR</span>
</span><span id="__span-5-96"><a id="__codelineno-5-96" name="__codelineno-5-96"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="nf">DynamicType</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">GetType</span><span class="p">();</span>
</span><span id="__span-5-97"><a id="__codelineno-5-97" name="__codelineno-5-97"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">DynamicCopy</span><span class="p">(</span><span class="n">ProcessorNode</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-5-98"><a id="__codelineno-5-98" name="__codelineno-5-98"></a>
</span><span id="__span-5-99"><a id="__codelineno-5-99" name="__codelineno-5-99"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">InField</span><span class="w"> </span><span class="nf">InputPortToField</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">fieldName</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">InField</span><span class="p">)</span><span class="n">GetType</span><span class="p">().</span><span class="n">GetField</span><span class="p">(</span><span class="n">fieldName</span><span class="p">).</span><span class="n">GetValue</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-5-100"><a id="__codelineno-5-100" name="__codelineno-5-100"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">InField</span><span class="w"> </span><span class="nf">InputPortToField</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">InputPortToField</span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">fieldName</span><span class="p">);</span>
</span><span id="__span-5-101"><a id="__codelineno-5-101" name="__codelineno-5-101"></a>
</span><span id="__span-5-102"><a id="__codelineno-5-102" name="__codelineno-5-102"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">OutField</span><span class="w"> </span><span class="nf">OutputPortToField</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">fieldName</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">OutField</span><span class="p">)</span><span class="n">GetType</span><span class="p">().</span><span class="n">GetField</span><span class="p">(</span><span class="n">fieldName</span><span class="p">).</span><span class="n">GetValue</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-5-103"><a id="__codelineno-5-103" name="__codelineno-5-103"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">OutField</span><span class="w"> </span><span class="nf">OutputPortToField</span><span class="p">(</span><span class="n">NodePort</span><span class="w"> </span><span class="n">port</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">OutputPortToField</span><span class="p">(</span><span class="n">port</span><span class="p">.</span><span class="n">fieldName</span><span class="p">);</span>
</span><span id="__span-5-104"><a id="__codelineno-5-104" name="__codelineno-5-104"></a><span class="w">        </span><span class="cp">#endif</span>
</span><span id="__span-5-105"><a id="__codelineno-5-105" name="__codelineno-5-105"></a>
</span><span id="__span-5-106"><a id="__codelineno-5-106" name="__codelineno-5-106"></a><span class="w">        </span><span class="c1">///&lt;summary&gt;Receive and process port information before passing it.&lt;/summary&gt;</span>
</span><span id="__span-5-107"><a id="__codelineno-5-107" name="__codelineno-5-107"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Process</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-5-108"><a id="__codelineno-5-108" name="__codelineno-5-108"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-109"><a id="__codelineno-5-109" name="__codelineno-5-109"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">LogNode.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">XNode</span><span class="p">;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">XNodeCore</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="p">{</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">    </span><span class="na">[CreateNodeMenu("Debug/Log")]</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">LogNode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">CoreNode</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">InSingleField</span><span class="o">&lt;</span><span class="kt">object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InSingleField</span><span class="o">&lt;</span><span class="kt">object</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Process</span><span class="p">()</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">            </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-cs highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">ExtrudeMeshOperatorNode.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">  1</a></span>
<span class="normal"><a href="#__codelineno-7-2">  2</a></span>
<span class="normal"><a href="#__codelineno-7-3">  3</a></span>
<span class="normal"><a href="#__codelineno-7-4">  4</a></span>
<span class="normal"><a href="#__codelineno-7-5">  5</a></span>
<span class="normal"><a href="#__codelineno-7-6">  6</a></span>
<span class="normal"><a href="#__codelineno-7-7">  7</a></span>
<span class="normal"><a href="#__codelineno-7-8">  8</a></span>
<span class="normal"><a href="#__codelineno-7-9">  9</a></span>
<span class="normal"><a href="#__codelineno-7-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-7-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-7-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-7-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-7-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-7-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-7-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-7-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-7-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-7-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-7-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-7-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-7-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-7-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-7-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-7-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-7-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-7-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-7-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-7-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-7-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-7-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-7-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-7-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-7-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-7-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-7-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-7-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-7-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-7-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-7-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-7-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-7-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-7-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-7-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-7-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-7-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-7-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-7-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-7-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-7-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-7-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-7-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-7-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-7-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-7-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-7-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-7-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-7-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-7-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-7-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-7-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-7-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-7-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-7-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-7-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-7-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-7-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-7-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-7-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-7-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-7-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-7-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-7-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-7-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-7-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-7-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-7-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-7-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-7-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-7-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-7-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-7-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-7-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-7-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-7-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-7-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-7-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-7-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-7-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-7-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-7-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-7-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-7-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-7-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-7-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-7-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-7-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-7-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-7-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-7-100">100</a></span>
<span class="normal"><a href="#__codelineno-7-101">101</a></span>
<span class="normal"><a href="#__codelineno-7-102">102</a></span>
<span class="normal"><a href="#__codelineno-7-103">103</a></span>
<span class="normal"><a href="#__codelineno-7-104">104</a></span>
<span class="normal"><a href="#__codelineno-7-105">105</a></span>
<span class="normal"><a href="#__codelineno-7-106">106</a></span>
<span class="normal"><a href="#__codelineno-7-107">107</a></span>
<span class="normal"><a href="#__codelineno-7-108">108</a></span>
<span class="normal"><a href="#__codelineno-7-109">109</a></span>
<span class="normal"><a href="#__codelineno-7-110">110</a></span>
<span class="normal"><a href="#__codelineno-7-111">111</a></span>
<span class="normal"><a href="#__codelineno-7-112">112</a></span>
<span class="normal"><a href="#__codelineno-7-113">113</a></span>
<span class="normal"><a href="#__codelineno-7-114">114</a></span>
<span class="normal"><a href="#__codelineno-7-115">115</a></span>
<span class="normal"><a href="#__codelineno-7-116">116</a></span>
<span class="normal"><a href="#__codelineno-7-117">117</a></span>
<span class="normal"><a href="#__codelineno-7-118">118</a></span>
<span class="normal"><a href="#__codelineno-7-119">119</a></span>
<span class="normal"><a href="#__codelineno-7-120">120</a></span>
<span class="normal"><a href="#__codelineno-7-121">121</a></span>
<span class="normal"><a href="#__codelineno-7-122">122</a></span>
<span class="normal"><a href="#__codelineno-7-123">123</a></span>
<span class="normal"><a href="#__codelineno-7-124">124</a></span>
<span class="normal"><a href="#__codelineno-7-125">125</a></span>
<span class="normal"><a href="#__codelineno-7-126">126</a></span>
<span class="normal"><a href="#__codelineno-7-127">127</a></span>
<span class="normal"><a href="#__codelineno-7-128">128</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Jobs</span><span class="p">;</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Mathematics</span><span class="p">;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="k">using</span><span class="w"> </span><span class="nn">XNodeCore</span><span class="p">;</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Burst</span><span class="p">;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="k">using</span><span class="w"> </span><span class="nn">Unity.Collections</span><span class="p">;</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ProceduralModelling.ModelNodes</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="p">{</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">    </span><span class="na">[CreateNodeMenu("Mesh/Operators/Extrude")]</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ExtrudeMeshOperatorNode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MeshOperatorNode</span><span class="o">&lt;</span><span class="n">ExtrudeMeshOperatorJob</span><span class="o">&gt;</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">InMultiField</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InMultiField</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">InSingleField</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">flipFace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InSingleField</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17"></a>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="w">        </span><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ConfigureJob</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">ExtrudeMeshOperatorJob</span><span class="w"> </span><span class="n">job</span><span class="p">)</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="w">            </span><span class="n">job</span><span class="p">.</span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offset</span><span class="p">.</span><span class="n">ToNativeArray</span><span class="p">(</span><span class="n">job</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">vertices</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span><span class="w"> </span><span class="n">Allocator</span><span class="p">.</span><span class="n">Persistent</span><span class="p">);</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="w">            </span><span class="n">job</span><span class="p">.</span><span class="n">flipFace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flipFace</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23"></a>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="w">        </span><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">DisposeJob</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">ExtrudeMeshOperatorJob</span><span class="w"> </span><span class="n">job</span><span class="p">)</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26"></a><span class="w">            </span><span class="n">job</span><span class="p">.</span><span class="n">offset</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29"></a>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="w">    </span><span class="na">[BurstCompile]</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ExtrudeMeshOperatorJob</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJob</span><span class="p">,</span><span class="w"> </span><span class="n">IMeshOperatorJob</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33"></a><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="n">MeshOperatorData</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">MeshOperatorData</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35"></a>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">NativeArray</span><span class="o">&lt;</span><span class="n">Vector3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">flipFace</span><span class="p">;</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38"></a>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">()</span>
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41"></a><span class="w">            </span><span class="n">NativeList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">edges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">GetEdges</span><span class="p">();</span>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42"></a>
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">originalVertexCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">maxVertexCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">originalVertexCount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45"></a>
</span><span id="__span-7-46"><a id="__codelineno-7-46" name="__codelineno-7-46"></a><span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">.</span><span class="n">SetCapacity</span><span class="p">(</span><span class="n">maxVertexCount</span><span class="p">);</span>
</span><span id="__span-7-47"><a id="__codelineno-7-47" name="__codelineno-7-47"></a><span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">.</span><span class="n">SetCapacity</span><span class="p">(</span><span class="n">maxVertexCount</span><span class="p">);</span>
</span><span id="__span-7-48"><a id="__codelineno-7-48" name="__codelineno-7-48"></a><span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="n">uv</span><span class="p">.</span><span class="n">SetCapacity</span><span class="p">(</span><span class="n">maxVertexCount</span><span class="p">);</span>
</span><span id="__span-7-49"><a id="__codelineno-7-49" name="__codelineno-7-49"></a>
</span><span id="__span-7-50"><a id="__codelineno-7-50" name="__codelineno-7-50"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">vertI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">vertI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">originalVertexCount</span><span class="p">;</span><span class="w"> </span><span class="n">vertI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-7-51"><a id="__codelineno-7-51" name="__codelineno-7-51"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-7-52"><a id="__codelineno-7-52" name="__codelineno-7-52"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">.</span><span class="n">AddNoResize</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">vertI</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">[</span><span class="n">vertI</span><span class="p">]);</span>
</span><span id="__span-7-53"><a id="__codelineno-7-53" name="__codelineno-7-53"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">.</span><span class="n">AddNoResize</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">vertI</span><span class="p">]);</span>
</span><span id="__span-7-54"><a id="__codelineno-7-54" name="__codelineno-7-54"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">uv</span><span class="p">.</span><span class="n">AddNoResize</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">uv</span><span class="p">[</span><span class="n">vertI</span><span class="p">]);</span>
</span><span id="__span-7-55"><a id="__codelineno-7-55" name="__codelineno-7-55"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-7-56"><a id="__codelineno-7-56" name="__codelineno-7-56"></a>
</span><span id="__span-7-57"><a id="__codelineno-7-57" name="__codelineno-7-57"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
</span><span id="__span-7-58"><a id="__codelineno-7-58" name="__codelineno-7-58"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">maxTriCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">originalTriangleCount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">edges</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">6</span><span class="p">);</span>
</span><span id="__span-7-59"><a id="__codelineno-7-59" name="__codelineno-7-59"></a>
</span><span id="__span-7-60"><a id="__codelineno-7-60" name="__codelineno-7-60"></a><span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">SetCapacity</span><span class="p">(</span><span class="n">maxTriCount</span><span class="p">);</span>
</span><span id="__span-7-61"><a id="__codelineno-7-61" name="__codelineno-7-61"></a>
</span><span id="__span-7-62"><a id="__codelineno-7-62" name="__codelineno-7-62"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">triI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">triI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="p">;</span><span class="w"> </span><span class="n">triI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-7-63"><a id="__codelineno-7-63" name="__codelineno-7-63"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-7-64"><a id="__codelineno-7-64" name="__codelineno-7-64"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">AddNoResize</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">originalVertexCount</span><span class="p">);</span>
</span><span id="__span-7-65"><a id="__codelineno-7-65" name="__codelineno-7-65"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-7-66"><a id="__codelineno-7-66" name="__codelineno-7-66"></a>
</span><span id="__span-7-67"><a id="__codelineno-7-67" name="__codelineno-7-67"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">flipFace</span><span class="p">)</span>
</span><span id="__span-7-68"><a id="__codelineno-7-68" name="__codelineno-7-68"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-7-69"><a id="__codelineno-7-69" name="__codelineno-7-69"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">vertI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">vertI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">originalVertexCount</span><span class="p">;</span><span class="w"> </span><span class="n">vertI</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-7-70"><a id="__codelineno-7-70" name="__codelineno-7-70"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-7-71"><a id="__codelineno-7-71" name="__codelineno-7-71"></a><span class="w">                    </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">vertI</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">vertI</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-7-72"><a id="__codelineno-7-72" name="__codelineno-7-72"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-7-73"><a id="__codelineno-7-73" name="__codelineno-7-73"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-7-74"><a id="__codelineno-7-74" name="__codelineno-7-74"></a>
</span><span id="__span-7-75"><a id="__codelineno-7-75" name="__codelineno-7-75"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">edgeI</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">edges</span><span class="p">)</span>
</span><span id="__span-7-76"><a id="__codelineno-7-76" name="__codelineno-7-76"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-7-77"><a id="__codelineno-7-77" name="__codelineno-7-77"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">originA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">edgeI</span><span class="p">;</span>
</span><span id="__span-7-78"><a id="__codelineno-7-78" name="__codelineno-7-78"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">originB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MeshUtilities</span><span class="p">.</span><span class="n">NextTriangleIndex</span><span class="p">(</span><span class="n">edgeI</span><span class="p">);</span>
</span><span id="__span-7-79"><a id="__codelineno-7-79" name="__codelineno-7-79"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">addedA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">originA</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="p">];</span>
</span><span id="__span-7-80"><a id="__codelineno-7-80" name="__codelineno-7-80"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">addedB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">originB</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="p">];</span>
</span><span id="__span-7-81"><a id="__codelineno-7-81" name="__codelineno-7-81"></a><span class="w">                </span><span class="n">originA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">originA</span><span class="p">];</span>
</span><span id="__span-7-82"><a id="__codelineno-7-82" name="__codelineno-7-82"></a><span class="w">                </span><span class="n">originB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">originB</span><span class="p">];</span>
</span><span id="__span-7-83"><a id="__codelineno-7-83" name="__codelineno-7-83"></a>
</span><span id="__span-7-84"><a id="__codelineno-7-84" name="__codelineno-7-84"></a><span class="w">                </span><span class="n">Vector3</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector3</span><span class="p">.</span><span class="n">Cross</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">originB</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">originA</span><span class="p">],</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">addedA</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">originA</span><span class="p">]);</span>
</span><span id="__span-7-85"><a id="__codelineno-7-85" name="__codelineno-7-85"></a>
</span><span id="__span-7-86"><a id="__codelineno-7-86" name="__codelineno-7-86"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">originA</span><span class="p">);</span>
</span><span id="__span-7-87"><a id="__codelineno-7-87" name="__codelineno-7-87"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">originB</span><span class="p">);</span>
</span><span id="__span-7-88"><a id="__codelineno-7-88" name="__codelineno-7-88"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">addedA</span><span class="p">);</span>
</span><span id="__span-7-89"><a id="__codelineno-7-89" name="__codelineno-7-89"></a>
</span><span id="__span-7-90"><a id="__codelineno-7-90" name="__codelineno-7-90"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">originA</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">norm</span><span class="p">;</span>
</span><span id="__span-7-91"><a id="__codelineno-7-91" name="__codelineno-7-91"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">originB</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">norm</span><span class="p">;</span>
</span><span id="__span-7-92"><a id="__codelineno-7-92" name="__codelineno-7-92"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">addedA</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">norm</span><span class="p">;</span>
</span><span id="__span-7-93"><a id="__codelineno-7-93" name="__codelineno-7-93"></a>
</span><span id="__span-7-94"><a id="__codelineno-7-94" name="__codelineno-7-94"></a><span class="w">                </span><span class="n">norm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector3</span><span class="p">.</span><span class="n">Cross</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">originB</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">originA</span><span class="p">],</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">addedB</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">addedA</span><span class="p">]);</span>
</span><span id="__span-7-95"><a id="__codelineno-7-95" name="__codelineno-7-95"></a>
</span><span id="__span-7-96"><a id="__codelineno-7-96" name="__codelineno-7-96"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">addedA</span><span class="p">);</span>
</span><span id="__span-7-97"><a id="__codelineno-7-97" name="__codelineno-7-97"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">originB</span><span class="p">);</span>
</span><span id="__span-7-98"><a id="__codelineno-7-98" name="__codelineno-7-98"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">addedB</span><span class="p">);</span>
</span><span id="__span-7-99"><a id="__codelineno-7-99" name="__codelineno-7-99"></a>
</span><span id="__span-7-100"><a id="__codelineno-7-100" name="__codelineno-7-100"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">addedA</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">norm</span><span class="p">;</span>
</span><span id="__span-7-101"><a id="__codelineno-7-101" name="__codelineno-7-101"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">originB</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">norm</span><span class="p">;</span>
</span><span id="__span-7-102"><a id="__codelineno-7-102" name="__codelineno-7-102"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">addedB</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">norm</span><span class="p">;</span>
</span><span id="__span-7-103"><a id="__codelineno-7-103" name="__codelineno-7-103"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-7-104"><a id="__codelineno-7-104" name="__codelineno-7-104"></a>
</span><span id="__span-7-105"><a id="__codelineno-7-105" name="__codelineno-7-105"></a><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">edgeI</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">edges</span><span class="p">)</span>
</span><span id="__span-7-106"><a id="__codelineno-7-106" name="__codelineno-7-106"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-7-107"><a id="__codelineno-7-107" name="__codelineno-7-107"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">edgeI</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">edgeI</span><span class="p">]].</span><span class="n">normalized</span><span class="p">;</span>
</span><span id="__span-7-108"><a id="__codelineno-7-108" name="__codelineno-7-108"></a><span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">edgeI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">normals</span><span class="p">[</span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">edgeI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="p">]].</span><span class="n">normalized</span><span class="p">;</span>
</span><span id="__span-7-109"><a id="__codelineno-7-109" name="__codelineno-7-109"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-7-110"><a id="__codelineno-7-110" name="__codelineno-7-110"></a>
</span><span id="__span-7-111"><a id="__codelineno-7-111" name="__codelineno-7-111"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">flipFace</span><span class="p">)</span>
</span><span id="__span-7-112"><a id="__codelineno-7-112" name="__codelineno-7-112"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-7-113"><a id="__codelineno-7-113" name="__codelineno-7-113"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">triI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">triI</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">originalTriangleCount</span><span class="p">;</span><span class="w"> </span><span class="n">triI</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</span><span id="__span-7-114"><a id="__codelineno-7-114" name="__codelineno-7-114"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-7-115"><a id="__codelineno-7-115" name="__codelineno-7-115"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="p">];</span>
</span><span id="__span-7-116"><a id="__codelineno-7-116" name="__codelineno-7-116"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">];</span>
</span><span id="__span-7-117"><a id="__codelineno-7-117" name="__codelineno-7-117"></a><span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">];</span>
</span><span id="__span-7-118"><a id="__codelineno-7-118" name="__codelineno-7-118"></a>
</span><span id="__span-7-119"><a id="__codelineno-7-119" name="__codelineno-7-119"></a><span class="w">                    </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-7-120"><a id="__codelineno-7-120" name="__codelineno-7-120"></a><span class="w">                    </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-7-121"><a id="__codelineno-7-121" name="__codelineno-7-121"></a><span class="w">                    </span><span class="n">data</span><span class="p">.</span><span class="n">triangles</span><span class="p">[</span><span class="n">triI</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-7-122"><a id="__codelineno-7-122" name="__codelineno-7-122"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-7-123"><a id="__codelineno-7-123" name="__codelineno-7-123"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-7-124"><a id="__codelineno-7-124" name="__codelineno-7-124"></a>
</span><span id="__span-7-125"><a id="__codelineno-7-125" name="__codelineno-7-125"></a><span class="w">            </span><span class="n">edges</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span><span id="__span-7-126"><a id="__codelineno-7-126" name="__codelineno-7-126"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-127"><a id="__codelineno-7-127" name="__codelineno-7-127"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-128"><a id="__codelineno-7-128" name="__codelineno-7-128"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</div>
</div>
</div></div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.sections"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a7c05c9e.min.js"></script>
      
    
  </body>
</html>